{"version":3,"file":"OnboardingGuide.js","sources":["components/OnboardingGuide.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvSFAvRGVza3RvcC9MaVNob3AvTGlTaG9wL2NvbXBvbmVudHMvT25ib2FyZGluZ0d1aWRlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"og-mask\">\r\n    <view v-if=\"currentRect\" class=\"og-highlight\" :style=\"highlightStyle\"></view>\r\n    <view class=\"og-panel\" :style=\"panelStyle\" :class=\"['orient-' + orientation]\">\r\n      <view class=\"og-content\">\r\n        <text class=\"og-step-title\">新手指引</text>\r\n        <view class=\"og-step-body\">\r\n          <text class=\"og-step-text\">{{ steps[current] }}</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"og-actions\">\r\n\r\n        <button class=\"og-btn\" :disabled=\"current === 0\" @click=\"onPrev\">上一步</button>\r\n        <view class=\"og-index\">{{ current + 1 }}/{{ steps.length }}</view>\r\n        <button v-if=\"current < steps.length - 1\" class=\"og-btn primary\" @click=\"onNext\">下一步</button>\r\n        <button v-else class=\"og-btn primary\" @click=\"finish\">我知道了</button>\r\n        <text class=\"og-skip\" @click=\"finish\">跳过</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'OnboardingGuide',\r\n  props: {\r\n    visible: { type: Boolean, default: false },\r\n    initialIndex: { type: Number, default: 0 },\r\n    targets: { type: Array, default: () => [] },\r\n    steps: {\r\n      type: Array,\r\n      default() {\r\n        return [\r\n          '顶部搜索可快速查找商品与店铺',\r\n          '左侧分类导航支持展开子分类',\r\n          '轮播图可直达热门商品',\r\n          '猜你喜欢展示为你推荐的商品',\r\n          '我的与购物车位于右侧快捷入口',\r\n          '商品卡片支持查看详情与加入购物车',\r\n          '订单页面查看物流、支付与历史订单',\r\n          '个人中心管理头像、地址与偏好设置'\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return { current: 0, winW: 360, winH: 640 }\r\n  },\r\n  watch: {\r\n    initialIndex: {\r\n      immediate: true,\r\n      handler(val) {\r\n        const i = Number(val || 0)\r\n        if (i >= 0 && i < this.steps.length) this.current = i\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    try {\r\n      const s = typeof uni !== 'undefined' && uni.getSystemInfoSync ? uni.getSystemInfoSync() : null\r\n      const ww = (s && (s.windowWidth || s.screenWidth)) || (typeof window !== 'undefined' ? window.innerWidth : this.winW)\r\n      const wh = (s && (s.windowHeight || s.screenHeight)) || (typeof window !== 'undefined' ? window.innerHeight : this.winH)\r\n      this.winW = ww || this.winW\r\n      this.winH = wh || this.winH\r\n    } catch (e) { }\r\n  },\r\n  computed: {\r\n    currentRect() {\r\n      const r = this.targets && this.targets[this.current]\r\n      if (!r) return null\r\n      const pad = 8\r\n      return {\r\n        left: Math.max(0, (r.left || 0) - pad),\r\n        top: Math.max(0, (r.top || 0) - pad),\r\n        width: (r.width || 0) + pad * 2,\r\n        height: (r.height || 0) + pad * 2\r\n      }\r\n    },\r\n    highlightStyle() {\r\n      const r = this.currentRect\r\n      if (!r) return {}\r\n      return {\r\n        left: r.left + 'px',\r\n        top: r.top + 'px',\r\n        width: r.width + 'px',\r\n        height: r.height + 'px'\r\n      }\r\n    },\r\n    orientation() {\r\n      const r = this.currentRect\r\n      if (!r) return 'bottom'\r\n      const topSpace = r.top\r\n      const bottomSpace = Math.max(0, this.winH - (r.top + r.height))\r\n      const leftSpace = r.left\r\n      const rightSpace = Math.max(0, this.winW - (r.left + r.width))\r\n      const maxSpace = Math.max(topSpace, bottomSpace, leftSpace, rightSpace)\r\n      if (maxSpace === bottomSpace) return 'bottom'\r\n      if (maxSpace === topSpace) return 'top'\r\n      if (maxSpace === rightSpace) return 'right'\r\n      return 'left'\r\n    },\r\n    panelWidth() {\r\n      const w = Math.min(320, Math.max(240, this.winW - 24))\r\n      return w\r\n    },\r\n    panelHeight() {\r\n      return 140\r\n    },\r\n    extraBottomMargin() {\r\n      const isMp = (typeof window === 'undefined')\r\n      const t = String((this.steps && this.steps[this.current]) || '')\r\n      const hit = t.indexOf('个人信息') >= 0 || t.indexOf('房间选择') >= 0\r\n      return isMp && hit ? 60 : 0\r\n    },\r\n    panelStyle() {\r\n      const r = this.currentRect\r\n      if (!r) {\r\n        const fallbackLeft = Math.max(12, (this.winW - this.panelWidth) / 2)\r\n        const fallbackTop = Math.max(12, this.winH - this.panelHeight - 20 - this.extraBottomMargin)\r\n        return {\r\n          position: 'fixed',\r\n          left: fallbackLeft + 'px',\r\n          top: fallbackTop + 'px',\r\n          width: this.panelWidth + 'px',\r\n          minHeight: this.panelHeight + 'px'\r\n        }\r\n      }\r\n      const gap = 12\r\n      let top = 0\r\n      let left = 0\r\n      if (this.orientation === 'bottom') {\r\n        top = r.top + r.height + gap\r\n        left = r.left + r.width / 2 - this.panelWidth / 2\r\n      } else if (this.orientation === 'top') {\r\n        top = r.top - this.panelHeight - gap\r\n        left = r.left + r.width / 2 - this.panelWidth / 2\r\n      } else if (this.orientation === 'right') {\r\n        top = r.top + r.height / 2 - this.panelHeight / 2\r\n        left = r.left + r.width + gap\r\n      } else {\r\n        top = r.top + r.height / 2 - this.panelHeight / 2\r\n        left = r.left - this.panelWidth - gap\r\n      }\r\n      const clamp = (v, min, max) => Math.max(min, Math.min(v, max))\r\n      left = clamp(left, 12, Math.max(12, this.winW - this.panelWidth - 12))\r\n      top = clamp(top, 12, Math.max(12, this.winH - this.panelHeight - 12 - this.extraBottomMargin))\r\n      return {\r\n        position: 'fixed',\r\n        left: left + 'px',\r\n        top: top + 'px',\r\n        width: this.panelWidth + 'px',\r\n        minHeight: this.panelHeight + 'px'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onNext() { this.$emit('advance', this.current + 1) },\r\n    onPrev() { this.$emit('back', this.current - 1) },\r\n    finish() { this.$emit('close') }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.og-mask {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  display: block;\r\n  z-index: 9999;\r\n}\r\n\r\n.og-highlight {\r\n  position: fixed;\r\n  border: 3px solid #ff4d4f;\r\n  border-radius: 16px;\r\n  box-shadow: 0 0 0 2000px rgba(0, 0, 0, 0.35);\r\n  pointer-events: none;\r\n}\r\n\r\n.og-panel {\r\n  position: fixed;\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  box-shadow: 0 12rpx 40rpx rgba(0, 0, 0, 0.18);\r\n  padding: 16rpx 14rpx;\r\n  border: 1px solid #f0f0f0;\r\n}\r\n\r\n.og-content {\r\n  padding: 8rpx 6rpx 12rpx 6rpx;\r\n}\r\n\r\n.og-step-title {\r\n  font-size: 28rpx;\r\n  font-weight: 700;\r\n  color: #111;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.og-step-body {\r\n  min-height: 120rpx;\r\n}\r\n\r\n.og-step-text {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  line-height: 1.6;\r\n}\r\n\r\n.og-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.og-index {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.og-skip {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-left: -55rpx;\r\n  margin-right: 30px;\r\n}\r\n\r\n.og-btn {\r\n  height: 64rpx;\r\n  line-height: 64rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 24rpx;\r\n  border-radius: 12rpx;\r\n  background: #f7f7f7;\r\n  color: #222;\r\n}\r\n\r\n.og-btn.primary {\r\n  background: #000;\r\n  color: #fff;\r\n}\r\n\r\n.og-panel::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 16rpx;\r\n  height: 16rpx;\r\n  background: #ffffff;\r\n  border: 1px solid #f0f0f0;\r\n  box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.12);\r\n  transform: rotate(45deg);\r\n}\r\n\r\n.orient-bottom::after {\r\n  top: -8rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%) rotate(45deg);\r\n  border-right-color: transparent;\r\n  border-top-color: transparent;\r\n}\r\n\r\n.orient-top::after {\r\n  bottom: -8rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%) rotate(45deg);\r\n  border-left-color: transparent;\r\n  border-bottom-color: transparent;\r\n}\r\n\r\n.orient-right::after {\r\n  left: -8rpx;\r\n  top: 50%;\r\n  transform: translateY(-50%) rotate(45deg);\r\n  border-left-color: transparent;\r\n  border-top-color: transparent;\r\n}\r\n\r\n.orient-left::after {\r\n  right: -8rpx;\r\n  top: 50%;\r\n  transform: translateY(-50%) rotate(45deg);\r\n  border-right-color: transparent;\r\n  border-bottom-color: transparent;\r\n}\r\n</style>\r\n","import Component from 'C:/Users/HP/Desktop/LiShop/LiShop/components/OnboardingGuide.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":"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"}