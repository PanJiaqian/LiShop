{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\n\texport default {\r\n\t\tonLaunch: function() {\r\n\t\t\tconsole.log('App Launch')\r\n\t\t\ttry {\r\n\t\t\t\tconst allowed = new Set(['/pages/search/index', '/pages/category/list'])\r\n\t\t\t\tallowed.add('/pages/category/index')\r\n\t\t\t\tallowed.add('/pages/home/index')\r\n\t\t\t\tallowed.add('/pages/login/index')\r\n\t\t\t\tconst isLoggedIn = () => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst u = uni.getStorageSync('user') || null\r\n\t\t\t\t\t\tconst exp = uni.getStorageSync('token_expiration') || 0\r\n\t\t\t\t\t\treturn !!u && (!exp || Date.now() < exp)\r\n\t\t\t\t\t} catch (e) { return false }\r\n\t\t\t\t}\r\n\t\t\t\tconst guard = (args) => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (isLoggedIn()) return true\r\n\t\t\t\t\t\tconst raw = (args && args.url) || ''\r\n\t\t\t\t\t\tconst path = raw.split('?')[0]\r\n\t\t\t\t\t\tif (allowed.has(path)) return true\r\n\t\t\t\t\t\ttry { uni.$emit('global-login-prompt', { from: path, ts: Date.now() }) } catch (e) {}\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t} catch (e) { return false }\r\n\t\t\t\t}\r\n\t\t\t\tif (uni && typeof uni.addInterceptor === 'function') {\r\n\t\t\t\t\tuni.addInterceptor('navigateTo', { invoke: guard })\r\n\t\t\t\t\tuni.addInterceptor('switchTab', { invoke: guard })\r\n\t\t\t\t\tuni.addInterceptor('reLaunch', { invoke: guard })\r\n\t\t\t\t\tuni.addInterceptor('redirectTo', { invoke: guard })\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/*每个页面公共css */\r\n</style>\r\n","import App from './App'\r\n\r\n// #ifndef VUE3\r\nimport Vue from 'vue'\r\nimport './uni.promisify.adaptor'\r\nVue.config.productionTip = false\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n  ...App\r\n})\r\napp.$mount()\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nimport { createSSRApp } from 'vue'\r\nexport function createApp() {\r\n  const app = createSSRApp(App)\r\n  return {\r\n    app\r\n  }\r\n}\r\n// #endif"],"names":["uni","createSSRApp","App"],"mappings":";;;;;;;;;;;;;;;;;;;;;AACC,MAAK,YAAU;AAAA,EACd,UAAU,WAAW;AACpBA,kBAAAA,MAAA,MAAA,OAAA,gBAAY,YAAY;AACxB,QAAI;AACH,YAAM,UAAU,oBAAI,IAAI,CAAC,uBAAuB,sBAAsB,CAAC;AACvE,cAAQ,IAAI,uBAAuB;AACnC,cAAQ,IAAI,mBAAmB;AAC/B,cAAQ,IAAI,oBAAoB;AAChC,YAAM,aAAa,MAAM;AACxB,YAAI;AACH,gBAAM,IAAIA,cAAG,MAAC,eAAe,MAAM,KAAK;AACxC,gBAAM,MAAMA,cAAG,MAAC,eAAe,kBAAkB,KAAK;AACtD,iBAAO,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,IAAI;AAAA,QACrC,SAAS,GAAG;AAAE,iBAAO;AAAA,QAAM;AAAA,MAC5B;AACA,YAAM,QAAQ,CAAC,SAAS;AACvB,YAAI;AACH,cAAI,WAAY;AAAE,mBAAO;AACzB,gBAAM,MAAO,QAAQ,KAAK,OAAQ;AAClC,gBAAM,OAAO,IAAI,MAAM,GAAG,EAAE,CAAC;AAC7B,cAAI,QAAQ,IAAI,IAAI;AAAG,mBAAO;AAC9B,cAAI;AAAEA,0BAAAA,MAAI,MAAM,uBAAuB,EAAE,MAAM,MAAM,IAAI,KAAK,IAAI,EAAA,CAAG;AAAA,UAAE,SAAS,GAAG;AAAA,UAAC;AACpF,iBAAO;AAAA,QACR,SAAS,GAAG;AAAE,iBAAO;AAAA,QAAM;AAAA,MAC5B;AACA,UAAIA,uBAAO,OAAOA,oBAAI,mBAAmB,YAAY;AACpDA,sBAAAA,MAAI,eAAe,cAAc,EAAE,QAAQ,OAAO;AAClDA,sBAAAA,MAAI,eAAe,aAAa,EAAE,QAAQ,OAAO;AACjDA,sBAAAA,MAAI,eAAe,YAAY,EAAE,QAAQ,OAAO;AAChDA,sBAAAA,MAAI,eAAe,cAAc,EAAE,QAAQ,OAAO;AAAA,MACnD;AAAA,aACQ,GAAG;AAAA,IAAC;AAAA,EACb;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACvB;AACD;ACzBM,SAAS,YAAY;AAC1B,QAAM,MAAMC,cAAY,aAACC,SAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}