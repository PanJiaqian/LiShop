{"version":3,"file":"index.js","sources":["pages/product/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdC9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"page product-page\" :class=\"{ 'no-scroll': mpSheet || roomSelectorVisible }\">\r\n    <Skeleton :loading=\"!product\" :showTitle=\"true\" />\r\n    <block v-if=\"product\">\r\n      <!-- #ifdef H5 -->\r\n      <view class=\"h5-product-bg\">\r\n        <view class=\"h5-topbar\">\r\n          <button class=\"back-btn\" @click=\"goBack\">â†</button>\r\n        </view>\r\n        <view class=\"h5-product-card\">\r\n          <view class=\"pd-grid\">\r\n            <!-- å·¦ä¾§ï¼šå¯æ»šåŠ¨ï¼ŒåŒ…å«ç”»å»Š + å‚æ•° + å›¾æ–‡è¯¦æƒ… -->\r\n            <view class=\"pd-left\">\r\n              <view id=\"og-product-gallery\" class=\"pd-gallery\">\r\n                <swiper class=\"pd-main\" :current=\"current\" :autoplay=\"false\" circular interval=\"3000\" @change=\"onSwiperChange\">\r\n                  <swiper-item v-for=\"(src, i) in images\" :key=\"i\">\r\n                    <video\r\n                      v-if=\"isVideo(src)\"\r\n                      :id=\"i === current ? 'pd-video' : ('pd-video-' + i)\"\r\n                      class=\"pd-main\"\r\n                      :src=\"i === current ? videoSrc : src\"\r\n                      :poster=\"product.image || '/static/logo.png'\"\r\n                      :controls=\"true\"\r\n                      :autoplay=\"false\"\r\n                      playsinline\r\n                      webkit-playsinline\r\n                      crossorigin=\"anonymous\"\r\n                      object-fit=\"contain\"\r\n                      :muted=\"true\"\r\n                      @play=\"pauseCarousel\"\r\n                      @ended=\"onVideoEnded\"\r\n                    />\r\n                    <image v-else class=\"pd-main\" :src=\"src\" mode=\"aspectFit\" @click=\"previewCurrentImage\" />\r\n                  </swiper-item>\r\n                </swiper>\r\n                <view class=\"pd-thumbs\">\r\n                  <view v-for=\"(src, i) in images\" :key=\"i\" class=\"pd-thumb\" :class=\"{ active: i === current }\"\r\n                    @click=\"current = i\" style=\"position: relative; overflow: hidden;\">\r\n                    <image :src=\"isVideo(src) ? (product.image || '/static/logo.png') : src\" mode=\"aspectFill\"\r\n                      style=\"width: 100%; height: 100%; display: block;\" />\r\n                    <view v-if=\"isVideo(src)\"\r\n                      style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;\">\r\n                      <text style=\"color: #fff; font-size: 12px;\">â–¶</text>\r\n                    </view>\r\n                  </view>\r\n                </view>\r\n              </view>\r\n\r\n              <view class=\"pd-card pd-params\">\r\n                <text class=\"pd-section-title\" selectable=\"true\">å‚æ•°ä¿¡æ¯</text>\r\n                <view class=\"pd-param-grid\">\r\n                  <view class=\"pd-param-item\"><text class=\"key\" selectable=\"true\">å‹å·</text><text class=\"val\" selectable=\"true\">{{ product.id || 'é»˜è®¤æ¬¾'\r\n                  }}</text></view>\r\n                  <view class=\"pd-param-item\"><text class=\"key\" selectable=\"true\">åç§°</text><text class=\"val\" selectable=\"true\">{{ product.title }}</text>\r\n                  </view>\r\n                  <view class=\"pd-param-item\"><text class=\"key\" selectable=\"true\">è§„æ ¼</text><text class=\"val\" selectable=\"true\">é»˜è®¤è§„æ ¼</text></view>\r\n                  <view class=\"pd-param-item\"><text class=\"key\" selectable=\"true\">äº§åœ°</text><text class=\"val\" selectable=\"true\">{{ product.shipping_origin ?\r\n                    product.shipping_origin.replace(/çœ|å¸‚/g, '') : 'â€”' }}</text></view>\r\n                  <view class=\"pd-param-item\"><text class=\"key\" selectable=\"true\">å•ä½</text><text class=\"val\" selectable=\"true\">ä»¶</text></view>\r\n                  <!-- <view class=\"pd-param-item\"><text class=\"key\">ä»·æ ¼</text><text class=\"val\">Â¥{{ product.price.toFixed(2)\r\n                  }}</text></view> -->\r\n                  <view class=\"pd-param-item\"><text class=\"key\" selectable=\"true\">å‘è´§</text><text class=\"val\" selectable=\"true\">{{\r\n                    product.shipping_time_hours ? (product.shipping_time_hours + 'å°æ—¶') : 'å¾…å®š' }}</text></view>\r\n                  <!-- <view class=\"pd-param-item\"><text class=\"key\">å”®å</text><text class=\"val\">{{\r\n                    product.support_no_reason_return_7d ? 'ä¸ƒå¤©æ— ç†ç”±' : 'æ— ' }}</text></view> -->\r\n                </view>\r\n              </view>\r\n\r\n              <view class=\"pd-card pd-detail\">\r\n                <text class=\"pd-section-title\" selectable=\"true\">å›¾æ–‡è¯¦æƒ…</text>\r\n                <image v-for=\"(src, i) in product.details_images\" :key=\"'d' + i\" class=\"pd-detail-img\" :src=\"src\"\r\n                  mode=\"widthFix\" @click=\"previewDetailImage(src)\" />\r\n              </view>\r\n            </view>\r\n\r\n            <!-- å³ä¾§ï¼šä¿æŒç°æœ‰ä¿¡æ¯ä¸æŒ‰é’®ï¼Œä¸åšå…¶å®ƒæ”¹åŠ¨ -->\r\n            <view class=\"pd-right\">\r\n              <view class=\"pd-info\">\r\n                <view class=\"pd-title-row\">\r\n                  <text class=\"pd-title\" selectable=\"true\">{{ product.title }}</text>\r\n                  <text class=\"fav-star\" :class=\"{ active: isFavorite }\" @click=\"favProduct\">{{ isFavorite ? 'â˜…' : 'â˜†' }}</text>\r\n                </view>\r\n                <view class=\"pd-meta\">\r\n                  <text selectable=\"true\">{{ product.is_free_shipping ? 'åŒ…é‚®' : 'ä¸åŒ…é‚®' }} ï½œ {{ product.shipping_time_hours ?\r\n                    (product.shipping_time_hours + 'å°æ—¶å†…å‘è´§') : 'å‘è´§æ—¶é—´å¾…å®š' }} ï½œ {{ product.support_no_reason_return_7d ?\r\n                      'ä¸ƒå¤©æ— ç†ç”±' : 'ä¸æ”¯æŒä¸ƒå¤©æ— ç†ç”±' }}</text>\r\n                </view>\r\n                <view class=\"pd-price-row\">\r\n                  <text class=\"pd-price\" selectable=\"true\">{{ displayTopPriceWithSymbol }}</text>\r\n                  <text class=\"pd-coupon\" selectable=\"true\">åˆ¸åæ›´ä½</text>\r\n                </view>\r\n\r\n\r\n                <view>\r\n                  <text class=\"pd-section-title\" selectable=\"true\">è§„æ ¼æ˜ç»†</text>\r\n                  <view v-if=\"specsLoading\"><text class=\"pd-meta\">åŠ è½½ä¸­...</text></view>\r\n                  <view v-else-if=\"specs && specs.length\" class=\"specs-list\">\r\n                    <view class=\"spec-item\" v-for=\"(it, i) in specs\" :key=\"'h5sp' + i\"\r\n                      :class=\"{ active: selectedSpecIndex === i, disabled: isSpecDisabled(it) }\" @click=\"onClickSpec(it, i)\">\r\n                      <!-- <image class=\"spec-thumb\" :src=\"it.image_url || '/static/logo.png'\" mode=\"aspectFill\" /> -->\r\n                      <view class=\"spec-info\">\r\n                        <text class=\"spec-name\" selectable=\"true\">{{ it.name }}</text>\r\n                        <view class=\"spec-price-row\">\r\n                          <text class=\"spec-price\" selectable=\"true\">{{ formatPriceWithSymbol(it.price) }}</text>\r\n                          <text v-if=\"Number(it.original_price) > 0\" class=\"spec-oprice\">Â¥{{\r\n                            Number(it.original_price).toFixed(2) }}</text>\r\n                        </view>\r\n                        <text class=\"spec-unit\" selectable=\"true\">å•ä½ï¼š{{ it.unit || 'â€”' }}</text>\r\n                      </view>\r\n                      <view v-if=\"String(it.product_type || '').toLowerCase() === 'stagnant' && Number(it.inventory) === 0\" class=\"spec-mask\">\r\n                        <image class=\"spec-mask-ico\" src=\"/static/no.png\" mode=\"aspectFit\" />\r\n                      </view>\r\n                    </view>\r\n                  </view>\r\n                  <view v-else><text class=\"pd-meta\">æš‚æ— è§„æ ¼æ•°æ®</text></view>\r\n                </view>\r\n\r\n                <view class=\"pd-address\">\r\n                  <text class=\"pd-section-title\" selectable=\"true\">æ”¶è´§åœ°å€</text>\r\n                  <view class=\"address-card\">\r\n                    <view v-if=\"selectedAddress\" class=\"addr-body\">\r\n                      <text class=\"addr-line\" selectable=\"true\">{{ selectedAddress.receiver }} {{ selectedAddress.phone }}</text>\r\n                      <text class=\"addr-line\" selectable=\"true\">{{ selectedAddress.province }} {{ selectedAddress.city }} {{\r\n                        selectedAddress.district }} {{ selectedAddress.detail_address }}</text>\r\n                    </view>\r\n                    <view v-else class=\"addr-empty\" selectable=\"true\">æœªé€‰æ‹©æ”¶è´§åœ°å€</view>\r\n                    <view class=\"addr-actions\">\r\n                      <button class=\"addr-btn\" @click=\"openH5AddressSheet\">é€‰æ‹©åœ°å€</button>\r\n                    </view>\r\n                  </view>\r\n                </view>\r\n\r\n                <view class=\"pd-form\">\r\n                  <view class=\"pd-field inline\">\r\n                    <text class=\"pd-section-title\" selectable=\"true\">æˆ¿é—´</text>\r\n                    <view id=\"og-room-select\" class=\"picker-display\" @click=\"openRoomSheet\">{{ roomName || 'è¯·é€‰æ‹©æˆ¿é—´' }}</view>\r\n                  </view>\r\n                  <!-- <view class=\"pd-field inline\">\r\n              <text class=\"label\">è‰²æ¸©</text>\r\n              <input class=\"pd-input\" v-model=\"specTemp\" placeholder=\"å¦‚ 3000K / 4000K\" />\r\n            </view> -->\r\n                  <view class=\"pd-field inline\" v-if=\"selectedSpec && selectedSpec.has_length === 1\">\r\n                    <text class=\"label\">é•¿åº¦</text>\r\n                    <input class=\"pd-input\" v-model=\"specLength\" placeholder=\"å¡«å†™æ•°å­—\" />\r\n                    <text class=\"unit-tip\">{{ lengthUnitText }}</text>\r\n                  </view>\r\n                  <view class=\"pd-field inline\">\r\n                    <text class=\"label\">å¤‡æ³¨</text>\r\n                    <input class=\"pd-input\" v-model=\"h5OrderNote\" placeholder=\"å¡«å†™å¤‡æ³¨\" />\r\n                  </view>\r\n                </view>\r\n\r\n                <view class=\"pd-actions-row\">\r\n                  <!-- <text class=\"label\" selectable=\"true\">æ•°é‡</text> -->\r\n                  <view class=\"qty-box-large\">\r\n                    <view class=\"qty-btn\" @click=\"decQty\">-</view>\r\n                    <input class=\"qty-input\" v-model=\"qty\" type=\"number\" placeholder=\"æ•°é‡\" @blur=\"normalizeQty\" />\r\n                    <view class=\"qty-btn\" @click=\"incQty\">+</view>\r\n                  </view>\r\n                  <button class=\"btn-action btn-cart\" @click=\"addToCartWithQty\">åŠ å…¥è´­ç‰©è½¦</button>\r\n                  <button class=\"btn-action btn-buy\" @click=\"buyNow\">ç«‹å³è´­ä¹°</button>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <FloatingNav :hoverReveal=\"true\" />\r\n      <!-- #endif -->\r\n\r\n      <!-- #ifdef MP-WEIXIN -->\r\n      <!-- èƒŒæ™¯å›¾ç§»é™¤ -->\r\n      <!-- #endif -->\r\n\r\n      <!-- #ifndef H5 -->\r\n      <swiper class=\"cover\" indicator-dots :current=\"current\" :autoplay=\"false\" circular interval=\"3000\" @change=\"onSwiperChange\">\r\n        <swiper-item v-for=\"(item, index) in images\" :key=\"index\">\r\n          <video\r\n            v-if=\"isVideo(item)\"\r\n            :id=\"index === current ? 'mp-video' : ('mp-video-' + index)\"\r\n            :src=\"item\"\r\n            controls\r\n            style=\"width: 100%; height: 100%;\"\r\n            object-fit=\"contain\"\r\n            :autoplay=\"false\"\r\n            @play=\"pauseCarousel\"\r\n            @ended=\"onVideoEnded\"\r\n          ></video>\r\n          <image v-else :src=\"item\" mode=\"aspectFill\" style=\"width: 100%; height: 100%;\" @click=\"previewMpImage(item)\" />\r\n        </swiper-item>\r\n      </swiper>\r\n      <view class=\"info mp-info-spacing\">\r\n        <view class=\"mp-title-row\">\r\n          <text class=\"title\" selectable=\"true\">{{ product.title }}</text>\r\n          <text class=\"fav-star\" :class=\"{ active: isFavorite }\" @click=\"favProduct\">{{ isFavorite ? 'â˜…' : 'â˜†' }}</text>\r\n        </view>\r\n        <view class=\"mp-price-row\">\r\n          <text class=\"price\" selectable=\"true\">{{ formatPriceWithSymbol(product.price) }}</text>\r\n          <text class=\"sales\" selectable=\"true\">é”€é‡ {{ product.sales }}</text>\r\n        </view>\r\n      </view>\r\n      <!-- MP ç«¯å‚æ•°ä¿¡æ¯ä¸å›¾æ–‡è¯¦æƒ… -->\r\n      <view class=\"mp-section mp-section-spacing\">\r\n        <text class=\"mp-title\" selectable=\"true\">å‚æ•°ä¿¡æ¯</text>\r\n        <view class=\"mp-param-grid\">\r\n          <view class=\"mp-param-item\"><text class=\"key\" selectable=\"true\">å‹å·</text><text class=\"val\" selectable=\"true\">{{ product.id || 'é»˜è®¤æ¬¾' }}</text>\r\n          </view>\r\n          <view class=\"mp-param-item\"><text class=\"key\" selectable=\"true\">åç§°</text><text class=\"val\" selectable=\"true\">{{ product.title }}</text></view>\r\n          <view class=\"mp-param-item\"><text class=\"key\" selectable=\"true\">è§„æ ¼</text><text class=\"val\" selectable=\"true\">é»˜è®¤è§„æ ¼</text></view>\r\n          <view class=\"mp-param-row-inline\">\r\n            <view class=\"mp-param-item inline\"><text class=\"key\" selectable=\"true\">äº§åœ°</text><text class=\"val\" selectable=\"true\">{{ product.shipping_origin ?\r\n              product.shipping_origin.replace(/çœ|å¸‚/g, '') :\r\n              'â€”' }}</text></view>\r\n            <view class=\"mp-param-item inline\"><text class=\"key\" selectable=\"true\">å•ä½</text><text class=\"val\" selectable=\"true\">ä»¶</text></view>\r\n            <view class=\"mp-param-item inline\"><text class=\"key\" selectable=\"true\">å•ä½ä»·æ ¼</text><text class=\"val\" selectable=\"true\">Â¥{{\r\n              product.price.toFixed(2)\r\n            }}</text></view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"mp-section\">\r\n        <text class=\"mp-title\" selectable=\"true\">å›¾æ–‡è¯¦æƒ…</text>\r\n        <image v-for=\"(src, i) in product.details_images\" :key=\"'md' + i\" class=\"mp-detail-img\" :src=\"src\"\r\n          mode=\"widthFix\" @click=\"previewDetailImage(src)\" />\r\n      </view>\r\n      <view class=\"footer\">\r\n        <!-- #ifdef MP-WEIXIN -->\r\n        <button id=\"og-product-add\" class=\"btn-cart\" @click=\"openSpecSheet\">åŠ å…¥è´­ç‰©è½¦</button>\r\n        <!-- #endif -->\r\n        <!-- #ifndef MP-WEIXIN -->\r\n        <button id=\"og-product-add\" class=\"btn-cart\" @click=\"addToCart\">åŠ å…¥è´­ç‰©è½¦</button>\r\n        <!-- #endif -->\r\n      </view>\r\n\r\n      <!-- #ifdef MP-WEIXIN -->\r\n      <view v-if=\"mpSheet\" class=\"mp-mask\" @click=\"closeSpecSheet\" catchtouchmove=\"true\"\r\n        @touchmove.stop.prevent=\"() => { }\">\r\n        <view class=\"mp-sheet\" @click.stop>\r\n          <view class=\"mp-title\" selectable=\"true\">å¡«å†™è§„æ ¼</view>\r\n          <scroll-view scroll-y class=\"mp-scroll-view\">\r\n            <view class=\"mp-address-bar\" @click=\"openMpAddressSheet\">\r\n              <view class=\"bar-left\">\r\n                <text class=\"addr-icon\">ğŸ“</text>\r\n                <view class=\"bar-info\">\r\n                  <text v-if=\"selectedAddress\" class=\"bar-line\">{{ selectedAddress.receiver }} {{ selectedAddress.phone\r\n                  }}</text>\r\n                  <text v-if=\"selectedAddress\" class=\"bar-line\">{{ selectedAddress.province }} {{ selectedAddress.city\r\n                  }} {{ selectedAddress.district }} {{ selectedAddress.detail_address }}</text>\r\n                  <text v-else class=\"bar-line\">è¯·é€‰æ‹©æ”¶è´§åœ°å€</text>\r\n                </view>\r\n              </view>\r\n              <button size=\"mini\" class=\"bar-btn\">é€‰æ‹©æ”¶è´§åœ°å€</button>\r\n            </view>\r\n            <!-- è§„æ ¼æ˜ç»†ï¼ˆé€‚é… data.childrenï¼‰ï¼Œå‚è€ƒæ·˜å®/äº¬ä¸œæ ·å¼ -->\r\n            <view class=\"mp-title\" selectable=\"true\">è§„æ ¼æ˜ç»†</view>\r\n            <view v-if=\"specsLoading\" class=\"mp-param-grid\">\r\n              <view class=\"mp-param-item\"><text class=\"key\">åŠ è½½ä¸­...</text><text class=\"val\"></text></view>\r\n            </view>\r\n            <view v-else-if=\"specs && specs.length\" class=\"specs-list\">\r\n              <view class=\"spec-item\" v-for=\"(it, i) in (isSpecsCollapsed ? specs.slice(0, 2) : specs)\"\r\n                :key=\"'mpsp' + i\" :class=\"{ active: selectedSpecIndex === i, disabled: isSpecDisabled(it) }\" @click=\"onClickSpec(it, i)\">\r\n                <!-- <image class=\"spec-thumb\" :src=\"it.image_url || '/static/logo.png'\" mode=\"aspectFill\" /> -->\r\n                <view class=\"spec-info\">\r\n                  <text class=\"spec-name\" selectable=\"true\">{{ it.name }}</text>\r\n                  <view class=\"spec-price-row\">\r\n                    <text class=\"spec-price\" selectable=\"true\">{{ formatPriceWithSymbol(it.price) }}</text>\r\n                    <text v-if=\"Number(it.original_price) > 0\" class=\"spec-oprice\">Â¥{{\r\n                      Number(it.original_price).toFixed(2) }}</text>\r\n                  </view>\r\n                  <text class=\"spec-unit\" selectable=\"true\">å•ä½ï¼š{{ it.unit || 'â€”' }}</text>\r\n                </view>\r\n                <view v-if=\"String(it.product_type || '').toLowerCase() === 'stagnant' && Number(it.inventory) === 0\" class=\"spec-mask\">\r\n                  <image class=\"spec-mask-ico\" src=\"/static/no.png\" mode=\"aspectFit\" />\r\n                </view>\r\n              </view>\r\n              <!-- å±•å¼€/æ”¶èµ·æŒ‰é’® -->\r\n              <view v-if=\"specs.length >= 3\" class=\"specs-toggle\" @click=\"isSpecsCollapsed = !isSpecsCollapsed\">\r\n                <text>{{ isSpecsCollapsed ? 'å±•å¼€æ›´å¤š' : 'æ”¶èµ·' }}</text>\r\n                <text class=\"toggle-icon\">{{ isSpecsCollapsed ? 'â–¼' : 'â–²' }}</text>\r\n              </view>\r\n            </view>\r\n            <view v-else class=\"mp-param-grid\">\r\n              <view class=\"mp-param-item\"><text class=\"key\">æš‚æ— è§„æ ¼æ•°æ®</text><text class=\"val\">â€”</text></view>\r\n            </view>\r\n\r\n            <view class=\"mp-field\"><text class=\"label\">æˆ¿é—´</text>\r\n              <view id=\"og-mp-room-select\" class=\"mp-input\" @click=\"openMpRoomSheet\">{{ mpRoom || 'è¯·é€‰æ‹©æˆ¿é—´' }}</view>\r\n            </view>\r\n            <!-- <view class=\"mp-field\"><text class=\"label\">è‰²æ¸©</text><input class=\"mp-input\" v-model=\"mpTemp\"\r\n              placeholder=\"å¦‚ 3000K\" /></view> -->\r\n            <view class=\"mp-field\" v-if=\"selectedSpec && selectedSpec.has_length === 1\">\r\n              <text class=\"label\">é•¿åº¦</text>\r\n              <input class=\"mp-input\" v-model=\"mpLength\" placeholder=\"å¡«å†™æ•°å­—\" />\r\n              <text v-if=\"selectedSpec.length_unit\" class=\"unit-tip\">{{ selectedSpec.length_unit }}</text>\r\n            </view>\r\n            <view class=\"mp-field\">\r\n              <text class=\"label\">å¤‡æ³¨</text>\r\n              <input class=\"mp-input\" v-model=\"mpOrderNote\" placeholder=\"å¡«å†™å¤‡æ³¨\" />\r\n            </view>\r\n            <view class=\"mp-field\">\r\n              <view class=\"qty-stepper\">\r\n                <button class=\"step\" @click=\"mpQty = Math.max(1, Number(mpQty) - 1)\">-</button>\r\n                <input class=\"count-input\" v-model=\"mpQty\" type=\"number\" placeholder=\"å¡«å†™æ•°é‡\" @blur=\"normalizeMpQty\" />\r\n                <button class=\"step\" @click=\"mpQty = Math.max(1, Number(mpQty) + 1)\">+</button>\r\n              </view>\r\n            </view>\r\n          </scroll-view>\r\n          <view class=\"mp-actions\">\r\n            <button class=\"mp-btn ghost\" @click=\"closeSpecSheet\">å–æ¶ˆ</button>\r\n            <button class=\"mp-btn primary\" @click=\"confirmSpecToCart\">ç¡®å®šåŠ å…¥</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <!-- MP Room Selection Modal -->\r\n      <!-- #endif -->\r\n      <!-- #endif -->\r\n    </block>\r\n    <RoomSelector :visible=\"roomSelectorVisible\" :rooms=\"selectorRooms\" :type=\"selectorType\"\r\n      :selectedName=\"selectorSelectedName\" @close=\"closeRoomSheet\" @select=\"onRoomSelect\" @create=\"onRoomCreate\"\r\n      @createAddress=\"onCreateAddress\" />\r\n  </view>\r\n  <OnboardingGuide\r\n    v-if=\"showOnboarding\"\r\n    :steps=\"onboardingSteps\"\r\n    :targets=\"onboardingRects\"\r\n    :initialIndex=\"onboardingIndex\"\r\n    @advance=\"handleOnboardingNext\"\r\n    @back=\"handleOnboardingPrev\"\r\n    @close=\"closeOnboarding\"\r\n  />\r\n  <LoginPrompt :visible=\"showLoginModal\" @close=\"closeLoginModal\" @confirm=\"goLogin\" />\r\n</template>\r\n\r\n<script>\r\nimport { getProductDetail, getProductSpecs, getRooms, createRoom, addCartItem, getCartItems, createOrderByIds, getAddresses, addAddress, createDirectOrder, addFavorite, deleteFavorite } from '../../api/index.js'\r\nimport RoomSelector from '../../components/RoomSelector.vue'\r\nimport FloatingNav from '@/components/FloatingNav.vue'\r\nimport Skeleton from '@/components/Skeleton.vue'\r\nimport OnboardingGuide from '@/components/OnboardingGuide.vue'\r\nimport LoginPrompt from '@/components/LoginPrompt.vue'\r\n\r\nexport default {\r\n  components: { RoomSelector, FloatingNav, Skeleton, OnboardingGuide, LoginPrompt },\r\n  data() { return { hls: null, product: null, current: 0, qty: 1, specTemp: '', specLength: '', roomName: '', roomId: '', roomsRaw: [], mpSheet: false, mpRoomSheet: false, mpTemp: '', mpLength: '', mpRoom: '', mpQty: 1, mpOrderNote: '', specs: [], specsLoading: false, roomSheet: false, roomsList: [], roomInput: '', selectedSpecIndex: -1, isSpecsCollapsed: true, lockScroll: false, lockScrollTop: 0, roomSelectorVisible: false, roomSelectorMode: 'h5', addresses: [], selectedAddress: null, h5OrderNote: '', isFavorite: false, swiperTimer: null, carouselInterval: 3000, lockCarousel: false, showOnboarding: false, onboardingRects: [], onboardingSteps: [], onboardingIndex: 0, showLoginModal: false } },\r\n  onLoad(query) {\r\n    const id = decodeURIComponent(query?.id || '')\r\n    if (!id) { this.product = { id: '', title: 'å•†å“', price: 0, sales: 0, image: '/static/logo.png', images: ['/static/logo.png'] }; return }\r\n    getProductDetail({ available_product_id: id })\r\n      .then((res) => {\r\n        const d = res?.data || {}\r\n        const clean = (u) => typeof u === 'string' ? u.replace(/`/g, '').trim() : ''\r\n        const arr = (x) => Array.isArray(x) ? x.map(clean).filter(Boolean) : []\r\n        const main = arr(d.main_image)\r\n        const videos = arr(d.video_url)\r\n        const detailImgs = arr(d.images)\r\n        const price = Number(d.price ?? 0) || 0\r\n        const base = {\r\n          id: d.available_product_id || id,\r\n          title: d.name || ('å•†å“ ' + id),\r\n          price,\r\n          sales: 0,\r\n          type: d.type || d.product_type || '',\r\n          comment: d.comment || '',\r\n          shipping_origin: clean(d.shipping_origin) || '',\r\n          main_media: [...main, ...videos].length ? [...main, ...videos] : ['/static/logo.png'],\r\n          details_images: detailImgs,\r\n          shipping_time_hours: d.shipping_time_hours || 0,\r\n          support_no_reason_return_7d: d.support_no_reason_return_7d || 0,\r\n          is_free_shipping: d.is_free_shipping || 0,\r\n          image: main[0] || '/static/logo.png',\r\n          images: [...main, ...videos].length ? [...main, ...videos] : ['/static/logo.png']\r\n        }\r\n        this.product = base\r\n        this.isFavorite = (String(d.is_favorite) === '1') || (d.is_favorite === 1) || (d.is_favorite === true)\r\n        this.fetchSpecs(base.id)\r\n        this.resetCarouselTimer()\r\n        this.$nextTick(() => {\r\n          const src = this.currentImage\r\n          if (this.isVideo(src)) {\r\n            this.lockCarousel = true\r\n            this.stopCarousel()\r\n            try {\r\n              const ctx1 = uni.createVideoContext('pd-video', this)\r\n              const ctx2 = uni.createVideoContext('mp-video', this)\r\n              if (ctx1 && typeof ctx1.play === 'function') ctx1.play()\r\n              else if (ctx2 && typeof ctx2.play === 'function') ctx2.play()\r\n            } catch (e) {}\r\n          }\r\n        })\r\n      })\r\n      .catch(() => {\r\n        // æ¥å£å¤±è´¥æ—¶ä¿åº•å±•ç¤º\r\n        this.product = { id, title: 'å•†å“ ' + id, price: 0, sales: 0, shipping_origin: '', image: '/static/logo.png', images: ['/static/logo.png'] }\r\n        this.fetchSpecs(id)\r\n        this.resetCarouselTimer()\r\n        this.$nextTick(() => {\r\n          const src = this.currentImage\r\n          if (this.isVideo(src)) {\r\n            this.lockCarousel = true\r\n            this.stopCarousel()\r\n            try {\r\n              const ctx1 = uni.createVideoContext('pd-video', this)\r\n              const ctx2 = uni.createVideoContext('mp-video', this)\r\n              if (ctx1 && typeof ctx1.play === 'function') ctx1.play()\r\n              else if (ctx2 && typeof ctx2.play === 'function') ctx2.play()\r\n            } catch (e) {}\r\n          }\r\n        })\r\n      })\r\n  },\r\n  created() {\r\n    try {\r\n      const h = () => { this.showLoginModal = true }\r\n      this._globalLoginHandler = h\r\n      uni.$on('global-login-prompt', h)\r\n    } catch (e) {}\r\n  },\r\n  onUnload() {\r\n    try {\r\n      if (this._globalLoginHandler) uni.$off('global-login-prompt', this._globalLoginHandler)\r\n      this._globalLoginHandler = null\r\n    } catch (e) {}\r\n  },\r\n  computed: {\r\n    selectorType() {\r\n      return this.roomSelectorMode === 'addr' ? 'addr' : 'room'\r\n    },\r\n    isStagnantProduct() {\r\n      const t = String(this.product?.type || this.product?.product_type || this.product?.category || '').toLowerCase()\r\n      if (!t) {\r\n        const c = String((this.product && this.product.comment) || '').toLowerCase()\r\n        return c.includes('stagnant') || c.includes('å‘†æ»')\r\n      }\r\n      return t.includes('stagnant') || t.includes('å‘†æ»')\r\n    },\r\n    images() {\r\n      const imgs = (this.product && this.product.main_media) || []\r\n      return imgs.length ? imgs : [this.product?.image || '/static/logo.png']\r\n    },\r\n    currentImage() {\r\n      const arr = this.images\r\n      return arr[this.current] || arr[0]\r\n    },\r\n    videoSrc() {\r\n      const src = this.currentImage\r\n      if (!this.isVideo(src)) return ''\r\n      if (src.includes('.m3u8')) return ''\r\n      const hasQuery = src.includes('?')\r\n      const t = Date.now()\r\n      return hasQuery ? (src + '&t=' + t) : (src + '?t=' + t)\r\n    },\r\n    selectedSpec() {\r\n      return (this.selectedSpecIndex >= 0 && this.specs[this.selectedSpecIndex]) ? this.specs[this.selectedSpecIndex] : null\r\n    },\r\n    addressRooms() {\r\n      return (this.addresses || []).map(a => ({ name: `${a.receiver} ${a.phone} ${[a.province, a.city, a.district, a.detail_address].filter(Boolean).join(' ')}`.trim(), raw: a }))\r\n    },\r\n    selectorRooms() {\r\n      return this.roomSelectorMode === 'addr' ? this.addressRooms : this.roomsRaw\r\n    },\r\n    selectorSelectedName() {\r\n      if (this.roomSelectorMode === 'mp') return this.mpRoom || ''\r\n      if (this.roomSelectorMode === 'h5') return this.roomName || ''\r\n      const a = this.selectedAddress\r\n      return a ? `${a.receiver} ${a.phone} ${[a.province, a.city, a.district, a.detail_address].filter(Boolean).join(' ')}`.trim() : ''\r\n    },\r\n    mpAddressDisplay() {\r\n      const a = this.selectedAddress\r\n      return a ? `${a.receiver} ${a.phone} ${[a.province, a.city, a.district, a.detail_address].filter(Boolean).join(' ')}`.trim() : ''\r\n    },\r\n    lengthUnitText() {\r\n      try {\r\n        const u = String(this.selectedSpec?.length_unit || '').toLowerCase()\r\n        if (u.includes('mm')) return 'mm'\r\n        if (u.includes('cm')) return 'cm'\r\n        if (u.includes('dm')) return 'dm'\r\n        if (u.includes('m')) return 'm'\r\n        return 'm'\r\n      } catch (e) { return 'm' }\r\n    },\r\n    displayTopPrice() {\r\n      const sel = this.selectedSpec\r\n      const rawBase = sel ? sel.price : this.product?.price\r\n      if (rawBase === '-' || rawBase === 'â€”') return '-'\r\n      const basePerM = Number(rawBase || 0) || 0\r\n      if (sel && sel.has_length === 1) {\r\n        const rawStr = (this.specLength || '').replace(/[^0-9.]/g, '')\r\n        const raw = rawStr ? Number(rawStr) : 0\r\n        if (raw > 0) {\r\n          const meters = this.toMeters(raw, this.lengthUnitText)\r\n          return (basePerM * meters).toFixed(2)\r\n        }\r\n        return `${basePerM.toFixed(2)}/m`\r\n      }\r\n      return basePerM.toFixed(2)\r\n    },\r\n    displayTopPriceWithSymbol() {\r\n      const s = this.displayTopPrice\r\n      if (s === '-') return '-'\r\n      return 'Â¥' + s\r\n    }\r\n  },\r\n  watch: {\r\n    currentImage: {\r\n      handler(val) { this.initHls(val) },\r\n      immediate: true\r\n    }\r\n    ,\r\n    current(val) {\r\n      const src = (this.images || [])[val]\r\n      if (this.isVideo(src)) {\r\n        this.$nextTick(() => {\r\n          try {\r\n            const ctx1 = uni.createVideoContext('pd-video', this)\r\n            const ctx2 = uni.createVideoContext('mp-video', this)\r\n            if (ctx1 && typeof ctx1.play === 'function') ctx1.play()\r\n            else if (ctx2 && typeof ctx2.play === 'function') ctx2.play()\r\n          } catch (e) { }\r\n        })\r\n        this.lockCarousel = true\r\n      } else {\r\n        this.lockCarousel = false\r\n        this.resetCarouselTimer()\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    if (this.hls) {\r\n      this.hls.destroy()\r\n      this.hls = null\r\n    }\r\n    this.stopCarousel()\r\n  },\r\n  onShow() {\r\n    this.loadAddresses()\r\n    try {\r\n      const cont = !!uni.getStorageSync('onboarding_continue')\r\n      const sel = uni.getStorageSync('onboarding_target_selector') || ''\r\n      const idx = Number(uni.getStorageSync('onboarding_index') || 0)\r\n      const stepsStored = uni.getStorageSync('onboarding_steps') || []\r\n      if (cont && sel) {\r\n        if (Array.isArray(stepsStored) && stepsStored.length) this.onboardingSteps = stepsStored\r\n        const safeIdx = Math.max(0, Math.min(idx, this.onboardingSteps.length - 1))\r\n        this.onboardingIndex = safeIdx\r\n        this.$nextTick(() => {\r\n          let isH5 = false\r\n          try { isH5 = typeof window !== 'undefined' } catch (e) { isH5 = false }\r\n          if (sel === '#og-room-modal' || sel === '#og-room-modal-list') {\r\n            if (isH5) this.openRoomSheet()\r\n            else this.openMpRoomSheet()\r\n            setTimeout(() => { this.tryShowOnboarding('#og-room-modal-list', 10) }, 220)\r\n          } else {\r\n            this.tryShowOnboarding(sel, 8)\r\n          }\r\n        })\r\n      }\r\n    } catch (e) {}\r\n  },\r\n  methods: {\r\n    tryShowOnboarding(sel, tries) {\r\n      const max = Math.max(1, Number(tries || 6))\r\n      const attempt = (left) => {\r\n        let isH5 = false\r\n        try { isH5 = typeof window !== 'undefined' } catch (e) { isH5 = false }\r\n        if (isH5) {\r\n          const el = typeof document !== 'undefined' ? document.querySelector(sel) : null\r\n          if (el) {\r\n            this.refreshOnboardingRect(sel)\r\n            return\r\n          }\r\n        } else {\r\n          const q = uni.createSelectorQuery().in(this)\r\n          q.select(sel).boundingClientRect()\r\n          q.exec(res => {\r\n            const r = (res || [])[0]\r\n            if (r) {\r\n              this.refreshOnboardingRect(sel)\r\n              return\r\n            }\r\n          })\r\n        }\r\n        if (!this.showOnboarding) this.showOnboarding = true\r\n        if (left > 0) { setTimeout(() => attempt(left - 1), 160) }\r\n      }\r\n      attempt(max)\r\n    },\r\n    goBack() {\r\n      if (typeof window !== 'undefined' && window.history && window.history.length > 1) { window.history.back(); return }\r\n      if (uni && uni.switchTab) { uni.switchTab({ url: '/pages/home/index' }); return }\r\n      if (uni && uni.navigateTo) { uni.navigateTo({ url: '/pages/home/index' }); return }\r\n    },\r\n    initHls(src) {\r\n      // #ifdef H5\r\n      if (this.hls) {\r\n        this.hls.destroy()\r\n        this.hls = null\r\n      }\r\n      if (!src || !this.isVideo(src)) return\r\n      if (!src.includes('.m3u8')) return\r\n\r\n      this.$nextTick(() => {\r\n        let el = document.querySelector('#pd-video video') || document.querySelector('#pd-video')\r\n        if (el && el.tagName !== 'VIDEO') el = el.querySelector('video')\r\n        if (!el) return\r\n        try { el.setAttribute('crossorigin', 'anonymous') } catch (e) { }\r\n\r\n        if (window.Hls && Hls.isSupported()) {\r\n          this.hls = new Hls()\r\n          const hasQuery = src.includes('?')\r\n          const bust = hasQuery ? (src + '&t=' + Date.now()) : (src + '?t=' + Date.now())\r\n          this.hls.loadSource(bust)\r\n          this.hls.attachMedia(el)\r\n          this.hls.on(Hls.Events.ERROR, (event, data) => {\r\n            if (data && data.fatal) {\r\n              try { this.hls.destroy() } catch (e) { }\r\n              this.hls = null\r\n              try { uni.showToast({ title: 'è§†é¢‘èµ„æºæœªæ‰¾åˆ°', icon: 'none' }) } catch (e) { }\r\n              const imgs = (this.images || []).filter(u => !this.isVideo(u))\r\n              if (imgs.length) {\r\n                const idx = (this.images || []).findIndex(u => u === imgs[0])\r\n                this.current = idx >= 0 ? idx : 0\r\n              } else {\r\n                this.current = 0\r\n              }\r\n            }\r\n          })\r\n        } else if (el && el.canPlayType && el.canPlayType('application/vnd.apple.mpegurl')) {\r\n          const hasQuery = src.includes('?')\r\n          el.src = hasQuery ? (src + '&t=' + Date.now()) : (src + '?t=' + Date.now())\r\n        }\r\n      })\r\n      // #endif\r\n    },\r\n    isVideo(src) {\r\n      if (!src) return false\r\n      return src.includes('.mp4') || src.includes('.m3u8')\r\n    },\r\n    onSwiperChange(e) {\r\n      try {\r\n        const idx = (e && e.detail && typeof e.detail.current === 'number') ? e.detail.current : 0\r\n        this.current = idx\r\n        const src = (this.images || [])[idx]\r\n        if (this.isVideo(src)) {\r\n          this.lockCarousel = true\r\n          this.stopCarousel()\r\n          this.$nextTick(() => {\r\n            try {\r\n              const ctx1 = uni.createVideoContext('pd-video', this)\r\n              const ctx2 = uni.createVideoContext('mp-video', this)\r\n              if (ctx1 && typeof ctx1.play === 'function') ctx1.play()\r\n              else if (ctx2 && typeof ctx2.play === 'function') ctx2.play()\r\n            } catch (e) { }\r\n          })\r\n        } else {\r\n          this.lockCarousel = false\r\n          this.resetCarouselTimer()\r\n        }\r\n      } catch (e) {}\r\n    },\r\n    pauseCarousel() {\r\n      this.lockCarousel = true\r\n      this.stopCarousel()\r\n    },\r\n    onVideoEnded() {\r\n      this.lockCarousel = false\r\n      const n = (this.images || []).length || 1\r\n      setTimeout(() => {\r\n        this.current = (this.current + 1) % n\r\n        this.resetCarouselTimer()\r\n      }, 1000)\r\n    },\r\n    startCarousel() {\r\n      if (this.swiperTimer) return\r\n      const interval = Number(this.carouselInterval) || 3000\r\n      this.swiperTimer = setInterval(() => {\r\n        try {\r\n          if (this.lockCarousel) return\r\n          const n = (this.images || []).length || 1\r\n          this.current = (this.current + 1) % n\r\n        } catch (e) {}\r\n      }, interval)\r\n    },\r\n    stopCarousel() {\r\n      try {\r\n        if (this.swiperTimer) { clearInterval(this.swiperTimer); this.swiperTimer = null }\r\n      } catch (e) {}\r\n    },\r\n    resetCarouselTimer() {\r\n      this.stopCarousel()\r\n      this.startCarousel()\r\n    },\r\n    refreshOnboardingRect(sel) {\r\n      let isH5 = false\r\n      try { isH5 = typeof window !== 'undefined' } catch (e) { isH5 = false }\r\n      const total = this.onboardingSteps.length || 0\r\n      const arr = new Array(total).fill(null)\r\n      if (isH5) {\r\n        const el = typeof document !== 'undefined' ? document.querySelector(sel) : null\r\n        if (el) {\r\n          const r = el.getBoundingClientRect()\r\n          arr[this.onboardingIndex] = { left: r.left, top: r.top, width: r.width, height: r.height }\r\n          this.onboardingRects = arr\r\n          this.showOnboarding = true\r\n        }\r\n      } else {\r\n        const q = uni.createSelectorQuery().in(this)\r\n        q.select(sel).boundingClientRect()\r\n        q.exec(res => {\r\n          const r = (res || [])[0]\r\n          if (r) {\r\n            arr[this.onboardingIndex] = { left: r.left, top: r.top, width: r.width, height: r.height }\r\n            this.onboardingRects = arr\r\n            this.showOnboarding = true\r\n          }\r\n        })\r\n      }\r\n    },\r\n    handleOnboardingNext(nextIndex) {\r\n      const idx = Number(nextIndex || 0)\r\n      this.onboardingIndex = idx\r\n      try {\r\n        uni.setStorageSync('onboarding_index', idx)\r\n        if (Array.isArray(this.onboardingSteps) && this.onboardingSteps.length) {\r\n          uni.setStorageSync('onboarding_steps', this.onboardingSteps)\r\n        }\r\n      } catch (e) {}\r\n      try {\r\n        uni.setStorageSync('onboarding_continue', true)\r\n        const isH5 = typeof window !== 'undefined'\r\n        if (isH5) {\r\n          if (idx <= 4) {\r\n            const map = ['#og-search', '#og-cate', '#og-banner', '#og-guess', '#og-quick']\r\n            const sel = map[idx] || '#og-search'\r\n            uni.setStorageSync('onboarding_target_selector', sel)\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n            else uni.navigateTo({ url: '/pages/home/index' })\r\n          } else if (idx === 5) {\r\n            this.$nextTick(() => { this.refreshOnboardingRect('#og-product-add') })\r\n          } else if (idx === 6) {\r\n            this.openRoomSheet()\r\n            setTimeout(() => { this.refreshOnboardingRect('#og-room-modal-list') }, 220)\r\n          } else if (idx === 7) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-order-tabs')\r\n            uni.setStorageSync('onboarding_step_text', 'è®¢å•æ ‡ç­¾åˆ‡æ¢ä¸æŸ¥çœ‹')\r\n            uni.navigateTo({ url: '/pages/order/index' })\r\n          } else if (idx === 8) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n            uni.setStorageSync('onboarding_step_text', 'ä¸ªäººä¿¡æ¯ç®¡ç†')\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n            else uni.navigateTo({ url: '/pages/profile/index' })\r\n          } else if (idx === 9) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n            uni.setStorageSync('onboarding_step_text', 'åŠŸèƒ½åŒº')\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n            else uni.navigateTo({ url: '/pages/profile/index' })\r\n          } else if (idx === 10) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n            uni.setStorageSync('onboarding_step_text', 'æ”¶è´§åœ°å€ç®¡ç†')\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n            else uni.navigateTo({ url: '/pages/profile/index' })\r\n          }\r\n        } else {\r\n          if (idx <= 3) {\r\n            const map = ['#og-search', '#og-mp-cate', '#og-banner', '#og-mp-guess']\r\n            const sel = map[idx] || '#og-search'\r\n            uni.setStorageSync('onboarding_target_selector', sel)\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n            else uni.navigateTo({ url: '/pages/home/index' })\r\n          } else if (idx === 4) {\r\n            this.$nextTick(() => { this.refreshOnboardingRect('#og-product-add') })\r\n          } else if (idx === 5) {\r\n            this.openMpRoomSheet()\r\n            setTimeout(() => { this.refreshOnboardingRect('#og-room-modal-list') }, 220)\r\n          } else if (idx === 6) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-order-tabs')\r\n            uni.setStorageSync('onboarding_step_text', 'è®¢å•æ ‡ç­¾åˆ‡æ¢ä¸æŸ¥çœ‹')\r\n            uni.navigateTo({ url: '/pages/order/index' })\r\n          } else if (idx === 7) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n            uni.setStorageSync('onboarding_step_text', 'ä¸ªäººä¿¡æ¯ç®¡ç†')\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n            else uni.navigateTo({ url: '/pages/profile/index' })\r\n          } else if (idx === 8) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n            uni.setStorageSync('onboarding_step_text', 'åŠŸèƒ½åŒº')\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n            else uni.navigateTo({ url: '/pages/profile/index' })\r\n          } else if (idx === 9) {\r\n            uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n            uni.setStorageSync('onboarding_step_text', 'æ”¶è´§åœ°å€ç®¡ç†')\r\n            if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n            else uni.navigateTo({ url: '/pages/profile/index' })\r\n          }\r\n        }\r\n      } catch (e) {}\r\n    },\r\n    handleOnboardingPrev(prevIndex) {\r\n      const idx = Number(prevIndex || 0)\r\n      if (idx < 0) return\r\n      this.onboardingIndex = idx\r\n      try {\r\n        uni.setStorageSync('onboarding_index', idx)\r\n        uni.setStorageSync('onboarding_continue', true)\r\n      } catch (e) {}\r\n      const isH5 = typeof window !== 'undefined'\r\n      if (isH5) {\r\n        if (idx <= 4) {\r\n          const map = ['#og-search', '#og-cate', '#og-banner', '#og-guess', '#og-quick']\r\n          const sel = map[idx] || '#og-search'\r\n          uni.setStorageSync('onboarding_target_selector', sel)\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n          else uni.navigateTo({ url: '/pages/home/index' })\r\n          return\r\n        }\r\n        if (idx === 5) {\r\n          this.$nextTick(() => { this.refreshOnboardingRect('#og-product-add') })\r\n          return\r\n        }\r\n        if (idx === 6) {\r\n          this.openRoomSheet()\r\n          setTimeout(() => { this.refreshOnboardingRect('#og-room-modal-list') }, 220)\r\n          return\r\n        }\r\n        if (idx === 7) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-order-tabs')\r\n          uni.navigateTo({ url: '/pages/order/index' })\r\n          return\r\n        }\r\n        if (idx === 8) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 9) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 10) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n      } else {\r\n        if (idx <= 3) {\r\n          const map = ['#og-search', '#og-mp-cate', '#og-banner', '#og-mp-guess']\r\n          const sel = map[idx] || '#og-search'\r\n          uni.setStorageSync('onboarding_target_selector', sel)\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n          else uni.navigateTo({ url: '/pages/home/index' })\r\n          return\r\n        }\r\n        if (idx === 4) {\r\n          this.$nextTick(() => { this.refreshOnboardingRect('#og-product-add') })\r\n          return\r\n        }\r\n        if (idx === 5) {\r\n          this.openMpRoomSheet()\r\n          setTimeout(() => { this.refreshOnboardingRect('#og-room-modal-list') }, 220)\r\n          return\r\n        }\r\n        if (idx === 6) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-order-tabs')\r\n          uni.navigateTo({ url: '/pages/order/index' })\r\n          return\r\n        }\r\n        if (idx === 7) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 8) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 9) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n      }\r\n    },\r\n    closeOnboarding() {\r\n      this.showOnboarding = false\r\n      try {\r\n        uni.removeStorageSync('onboarding_continue')\r\n        uni.removeStorageSync('onboarding_target_selector')\r\n        uni.removeStorageSync('onboarding_step_text')\r\n        uni.removeStorageSync('onboarding_steps')\r\n        uni.removeStorageSync('onboarding_index')\r\n        uni.reLaunch({ url: '/pages/home/index' })\r\n      } catch (e) {}\r\n    },\r\n    // è·å–è§„æ ¼æ˜ç»†ï¼ˆæŒ‰äº§å“IDï¼‰ï¼Œé€‚é…è¿”å› data.children\r\n    fetchSpecs(availId) {\r\n      if (!availId) return\r\n      this.specsLoading = true\r\n      const clean = (u) => typeof u === 'string' ? u.replace(/`/g, '').trim() : ''\r\n      getProductSpecs({ available_product_id: availId })\r\n        .then((res) => {\r\n          if (res && res.message && res.message.includes('åº“å­˜')) uni.showToast({ title: res.message, icon: 'none' })\r\n          const children = (res && res.data && Array.isArray(res.data.children)) ? res.data.children : (Array.isArray(res?.children) ? res.children : [])\r\n          this.specs = (children || []).map((it) => ({\r\n            product_id: it.product_id || '',\r\n            name: it.name || '',\r\n            unit: it.unit || '',\r\n            length_unit: it.length_unit || '',\r\n            price: Number(it.price ?? 0) || 0,\r\n            original_price: Number(it.original_price ?? 0) || 0,\r\n            image_url: clean(it.image_url) || '',\r\n            inventory: it.inventory || 0,\r\n            has_length: it.has_length || 0,\r\n            specification: it.specification || '',\r\n            product_type: it.product_type || it.type || ''\r\n          }))\r\n        })\r\n        .catch(() => { this.specs = [] })\r\n        .finally(() => {\r\n          this.specsLoading = false\r\n          const idx = this.firstSelectableSpecIndex()\r\n          this.selectedSpecIndex = idx\r\n        })\r\n    },\r\n    selectSpec(index) {\r\n      if (this.selectedSpecIndex === index) return\r\n      this.selectedSpecIndex = index\r\n    },\r\n    isSpecDisabled(it) {\r\n      try {\r\n        const t = String(it?.product_type || '').toLowerCase()\r\n        if (t === 'stagnant' && Number(it?.inventory) === 0) return true\r\n        return false\r\n      } catch (e) { return false }\r\n    },\r\n    onClickSpec(it, i) {\r\n      if (this.isSpecDisabled(it)) return\r\n      this.selectSpec(i)\r\n    },\r\n    firstSelectableSpecIndex() {\r\n      try {\r\n        const arr = Array.isArray(this.specs) ? this.specs : []\r\n        for (let i = 0; i < arr.length; i++) {\r\n          if (!this.isSpecDisabled(arr[i])) return i\r\n        }\r\n        return -1\r\n      } catch (e) { return -1 }\r\n    },\r\n    previewCurrentImage() {\r\n      try {\r\n        const arr = (this.images || []).filter(u => !this.isVideo(u))\r\n        const cur = this.currentImage\r\n        const idx = arr.findIndex(u => u === cur)\r\n        const current = idx >= 0 ? arr[idx] : (arr[0] || '')\r\n        if (!current) return\r\n        uni.previewImage({ urls: arr.length ? arr : [current], current })\r\n      } catch (e) {}\r\n    },\r\n    previewDetailImage(src) {\r\n      try {\r\n        const arr = (this.product?.details_images || []).filter(u => typeof u === 'string')\r\n        const current = arr.includes(src) ? src : (arr[0] || '')\r\n        if (!current) return\r\n        uni.previewImage({ urls: arr.length ? arr : [current], current })\r\n      } catch (e) {}\r\n    },\r\n    previewMpImage(item) {\r\n      try {\r\n        if (this.isVideo(item)) return\r\n        const arr = (this.images || []).filter(u => !this.isVideo(u))\r\n        const current = arr.includes(item) ? item : (arr[0] || '')\r\n        if (!current) return\r\n        uni.previewImage({ urls: arr.length ? arr : [current], current })\r\n      } catch (e) {}\r\n    },\r\n    ensureLoggedIn() {\r\n      try {\r\n        const u = uni.getStorageSync('user') || null\r\n        const exp = uni.getStorageSync('token_expiration') || 0\r\n        const ok = !!u && (!exp || Date.now() < exp)\r\n        if (ok) return true\r\n        this.showLoginModal = true\r\n        return false\r\n      } catch (e) { return false }\r\n    },\r\n    closeLoginModal() { this.showLoginModal = false },\r\n    goLogin() { this.showLoginModal = false; uni.navigateTo({ url: '/pages/login/index' }) },\r\n    addToCart() {\r\n      if (!this.ensureLoggedIn()) return\r\n      const spec = (this.selectedSpecIndex >= 0 && this.specs[this.selectedSpecIndex]) ? this.specs[this.selectedSpecIndex] : null\r\n      const pid = spec ? spec.product_id : (this.product?.id || '')\r\n      addCartItem({ product_id: pid, quantity: 1 })\r\n        .then((res) => {\r\n          if (res && res.success) uni.showToast({ title: 'å·²åŠ å…¥è´­ç‰©è½¦', icon: 'success' })\r\n          else {\r\n            const tip = typeof res?.data === 'string' ? res.data : (res?.data?.reason || '')\r\n            const msg = tip || res?.message || 'åŠ å…¥å¤±è´¥'\r\n            uni.showToast({ title: msg, icon: 'none' })\r\n          }\r\n        })\r\n        .catch(() => { uni.showToast({ title: 'åŠ å…¥è´­ç‰©è½¦å¤±è´¥', icon: 'none' }) })\r\n    },\r\n    incQty() { this.qty = Math.max(1, Number(this.qty || 0) + 1) },\r\n    decQty() { this.qty = Math.max(1, Number(this.qty || 0) - 1) },\r\n    normalizeQty() {\r\n      const n = Number(this.qty)\r\n      this.qty = isNaN(n) ? 1 : Math.max(1, Math.floor(n))\r\n    },\r\n    addToCartWithQty() {\r\n      if (!this.ensureLoggedIn()) return\r\n      const chosen = (this.roomName || '').trim()\r\n      if (!chosen) { uni.showToast({ title: 'è¯·å…ˆå¡«å†™æˆ¿é—´å', icon: 'none' }); return }\r\n      const lengthNum = (this.specLength || '').replace(/[^0-9.]/g, '')\r\n      const lengthVal = lengthNum ? Number(lengthNum) : undefined\r\n      const needLength = this.selectedSpec && this.selectedSpec.has_length === 1\r\n      if (needLength && (!lengthVal || Number(lengthVal) <= 0)) {\r\n        uni.showToast({ title: 'è¯·å¡«å†™é•¿åº¦', icon: 'none' })\r\n        return\r\n      }\r\n      if (!this.qty || this.qty <= 0) {\r\n        uni.showToast({ title: 'è¯·å¡«å†™æ•°é‡', icon: 'none' })\r\n        return\r\n      }\r\n\r\n      const spec = (this.selectedSpecIndex >= 0 && this.specs[this.selectedSpecIndex]) ? this.specs[this.selectedSpecIndex] : null\r\n      if (spec && spec.specification && lengthVal) {\r\n        const max = parseFloat(spec.specification)\r\n        if (!isNaN(max) && lengthVal > max) {\r\n          uni.showModal({ title: 'æç¤º', content: 'é•¿åº¦ä¸èƒ½è¶…è¿‡ ' + spec.specification, showCancel: false })\r\n          return\r\n        }\r\n      }\r\n\r\n      const pid = spec ? spec.product_id : (this.product?.id || '')\r\n      const q = Math.max(1, Number(this.qty || 1))\r\n      addCartItem({ room_id: this.roomId, product_id: pid, length: lengthNum, quantity: q, color: this.specTemp || '', note: this.h5OrderNote || '' })\r\n        .then((res) => {\r\n          if (res && res.success) uni.showToast({ title: `å·²åŠ å…¥æˆ¿é—´ï¼š${chosen}`, icon: 'success' })\r\n          else {\r\n            const tip = typeof res?.data === 'string' ? res.data : (res?.data?.reason || '')\r\n            const msg = tip || res?.message || 'åŠ å…¥å¤±è´¥'\r\n            uni.showToast({ title: msg, icon: 'none' })\r\n          }\r\n        })\r\n        .catch(() => { uni.showToast({ title: 'åŠ å…¥è´­ç‰©è½¦å¤±è´¥', icon: 'none' }) })\r\n    },\r\n    buyNow() {\r\n      if (!this.ensureLoggedIn()) return\r\n      try {\r\n        const spec = this.selectedSpec\r\n        const pid = spec ? (spec.product_id || this.product?.id || '') : (this.product?.id || '')\r\n        const addrId = this.selectedAddress?.id || ''\r\n        const roomName = (this.roomName || '').trim()\r\n        if (!roomName) {\r\n          uni.showToast({ title: 'è¯·å¡«å†™æˆ¿é—´å', icon: 'none' })\r\n          return\r\n        }\r\n        const needLength = spec && spec.has_length === 1\r\n        const rawLen = (this.specLength || '').replace(/[^0-9.]/g, '')\r\n        const lenNum = rawLen ? Number(rawLen) : 0\r\n        if (needLength && (!lenNum || lenNum <= 0)) {\r\n          uni.showToast({ title: 'è¯·å¡«å†™é•¿åº¦', icon: 'none' })\r\n          return\r\n        }\r\n        if (!addrId) {\r\n          uni.showToast({ title: 'è¯·å…ˆé€‰æ‹©æ”¶è´§åœ°å€', icon: 'none' })\r\n          return\r\n        }\r\n        const roomId = this.roomId || ''\r\n        const qty = this.qty || 1\r\n        const note = this.h5OrderNote || ''\r\n        const lenMeters = !needLength ? '' : lenNum\r\n\r\n        const u = uni.getStorageSync('user') || null\r\n        const token = (u && (u.token || (u.data && u.data.token))) || ''\r\n\r\n        uni.showLoading({ title: 'ä¸‹å•ä¸­' })\r\n        createDirectOrder({ product_id: pid, address_id: addrId, note, length: lenMeters, quantity: qty, room_id: roomId, token })\r\n          .then((data) => {\r\n            uni.hideLoading()\r\n            if (data && data.success) {\r\n              uni.showToast({ title: 'ä¸‹å•æˆåŠŸ', icon: 'success' })\r\n              const orderId = (data && data.data && (data.data.order_id || data.data.id)) || ''\r\n              if (orderId) { uni.navigateTo({ url: '/pages/order/index?id=' + orderId }) }\r\n            } else {\r\n              const tip = typeof data?.data === 'string' ? data.data : (data?.data?.reason || '')\r\n              const msg = tip || (data && data.message) || 'ä¸‹å•å¤±è´¥'\r\n              uni.showToast({ title: msg, icon: 'none' })\r\n            }\r\n          })\r\n          .catch(() => { uni.hideLoading(); uni.showToast({ title: 'ç½‘ç»œé”™è¯¯', icon: 'none' }) })\r\n      } catch (e) { uni.showToast({ title: 'ä¸‹å•å¤±è´¥', icon: 'none' }) }\r\n    },\r\n    // MP-WEIXIN è§„æ ¼å¡«å†™\r\n    openSpecSheet() {\r\n      this.mpSheet = true\r\n      const pid = this.product?.id || ''\r\n      this.fetchSpecs(pid)\r\n      this.lockScroll = false\r\n    },\r\n    closeSpecSheet() { this.mpSheet = false; this.lockScroll = false },\r\n    // H5 æˆ¿é—´é€‰æ‹©å¼¹çª—\r\n    openRoomSheet() {\r\n      this.roomSelectorMode = 'h5'\r\n      this.roomSelectorVisible = true\r\n      this.fetchRooms()\r\n    },\r\n    closeRoomSheet() { this.roomSelectorVisible = false },\r\n    openH5AddressSheet() {\r\n      this.roomSelectorMode = 'addr'\r\n      this.roomSelectorVisible = true\r\n      this.loadAddresses()\r\n    },\r\n\r\n    fetchRooms() {\r\n      getRooms()\r\n        .then((res) => {\r\n          const raw = Array.isArray(res?.data?.items) ? res.data.items\r\n            : (Array.isArray(res?.items) ? res.items\r\n              : (Array.isArray(res?.data?.children) ? res.data.children\r\n                : (Array.isArray(res?.data?.list) ? res.data.list\r\n                  : (Array.isArray(res?.data) ? res.data : []))))\r\n          this.roomsRaw = (raw || []).map((it) => (typeof it === 'string') ? { id: '', name: it } : { id: (it?.id || it?.room_id || ''), name: (it?.name || it?.room_name || '') })\r\n          this.roomsList = this.roomsRaw.map(it => it.name).filter((x) => !!x)\r\n        })\r\n        .catch(() => { this.roomsList = [] })\r\n    },\r\n\r\n    loadAddresses() {\r\n      getAddresses().then(res => {\r\n        const raw = Array.isArray(res?.data?.items) ? res.data.items : (Array.isArray(res?.items) ? res.items : [])\r\n        this.addresses = raw.map(a => ({\r\n          id: a.addresses_id || a.id || '',\r\n          receiver: a.receiver || '',\r\n          phone: a.phone || '',\r\n          province: a.province || '',\r\n          city: a.city || '',\r\n          district: a.district || '',\r\n          detail_address: a.detail_address || '',\r\n          is_default: a.is_default === 1\r\n        }))\r\n        const cached = uni.getStorageSync('selected_address_id') || ''\r\n        let pick = this.addresses.find(x => x.id === cached) || this.addresses.find(x => x.is_default) || this.addresses[0]\r\n        this.selectedAddress = pick || null\r\n        if (this.roomSelectorMode === 'addr' && this.roomSelectorVisible && this.addresses.length === 0) {\r\n          try { uni.showToast({ title: 'æš‚æ— æ”¶è´§åœ°å€ï¼Œå»åˆ›å»ºå§', icon: 'none' }) } catch (e) { }\r\n        }\r\n      }).catch(() => { this.addresses = []; this.selectedAddress = null })\r\n    },\r\n\r\n    onRoomSelect(room) {\r\n      if (this.roomSelectorMode === 'addr') {\r\n        if (room && room.raw) {\r\n          this.selectedAddress = room.raw\r\n          try { uni.setStorageSync('selected_address_id', this.selectedAddress.id) } catch (e) { }\r\n        }\r\n      } else if (this.roomSelectorMode === 'mp') {\r\n        this.mpRoom = room.name\r\n      } else {\r\n        this.roomName = room.name\r\n        this.roomId = room.id\r\n      }\r\n      this.roomSelectorVisible = false\r\n    },\r\n\r\n    onRoomCreate(name) {\r\n      if (!name) return\r\n      createRoom({ name })\r\n        .then((res) => {\r\n          uni.showToast({ title: 'æˆ¿é—´å·²åˆ›å»º', icon: 'success' })\r\n          const rid = (res && res.data && (res.data.room_id || res.data.id)) || (res && (res.room_id || res.id)) || ''\r\n          if (this.roomSelectorMode === 'mp') {\r\n            this.mpRoom = name\r\n            if (rid) {\r\n              const exist = (this.roomsRaw || []).find(r => r.id === rid)\r\n              if (!exist) this.roomsRaw = [{ id: rid, name }, ...this.roomsRaw]\r\n            }\r\n          } else {\r\n            this.roomName = name\r\n            this.roomId = rid || this.roomId\r\n            if (rid) {\r\n              const exist = (this.roomsRaw || []).find(r => r.id === rid)\r\n              if (!exist) this.roomsRaw = [{ id: rid, name }, ...this.roomsRaw]\r\n            }\r\n          }\r\n          this.roomSelectorVisible = false\r\n          if (!rid) this.fetchRooms()\r\n        })\r\n        .catch(() => {\r\n          uni.showToast({ title: 'åˆ›å»ºæˆ¿é—´å¤±è´¥', icon: 'none' })\r\n        })\r\n    },\r\n\r\n    onCreateAddress(payload) {\r\n      const u = uni.getStorageSync('user')\r\n      const token = (u && (u.token || (u.data && u.data.token))) || ''\r\n      const data = { receiver: payload.receiver, phone: payload.phone, province: payload.province, city: payload.city, district: payload.district, detail_address: payload.detail_address, is_default: payload.is_default }\r\n      addAddress({ ...data, token }).then(res => {\r\n        if (res && res.success) {\r\n          const id = (res && res.data && (res.data.addresses_id || res.data.id)) || ''\r\n          const item = { id, receiver: data.receiver, phone: data.phone, province: data.province, city: data.city, district: data.district, detail_address: data.detail_address, is_default: data.is_default === 1 }\r\n          this.addresses = [item, ...this.addresses]\r\n          this.selectedAddress = item\r\n          try { uni.setStorageSync('selected_address_id', id) } catch (e) { }\r\n          uni.showToast({ title: 'å·²ä¿å­˜', icon: 'success' })\r\n          this.roomSelectorVisible = false\r\n        } else {\r\n          const tip = typeof res?.data === 'string' ? res.data : (res?.data?.reason || '')\r\n          const msg = tip || (res && res.message) || 'ä¿å­˜å¤±è´¥'\r\n          uni.showToast({ title: msg, icon: 'none' })\r\n        }\r\n      }).catch(() => {\r\n        uni.showToast({ title: 'ä¿å­˜å¤±è´¥', icon: 'none' })\r\n      })\r\n    },\r\n\r\n    confirmSpecToCart() {\r\n      const needLength = this.selectedSpec && this.selectedSpec.has_length === 1\r\n      if (!this.mpRoom || (needLength && !this.mpLength) || !this.mpQty) {\r\n        uni.showToast({ title: 'è¯·å¡«å†™æˆ¿é—´åã€é•¿åº¦ã€æ•°é‡', icon: 'none' })\r\n        return\r\n      }\r\n      const chosen = (this.mpRoom || '').trim()\r\n      const found = (this.roomsRaw || []).find(it => it.name === chosen)\r\n      const rid = found ? found.id : ''\r\n\r\n      const lengthNum = (this.mpLength || '').replace(/[^0-9.]/g, '')\r\n      const lengthVal = lengthNum ? Number(lengthNum) : undefined\r\n      const spec = (this.selectedSpecIndex >= 0 && this.specs[this.selectedSpecIndex]) ? this.specs[this.selectedSpecIndex] : null\r\n\r\n      if (spec && spec.specification && lengthVal) {\r\n        const max = parseFloat(spec.specification)\r\n        if (!isNaN(max) && lengthVal > max) {\r\n          uni.showModal({ title: 'æç¤º', content: 'é•¿åº¦ä¸èƒ½è¶…è¿‡ ' + spec.specification, showCancel: false })\r\n          return\r\n        }\r\n      }\r\n\r\n      const pid = spec ? spec.product_id : (this.product?.id || '')\r\n      const mq = Math.max(1, Number(this.mpQty || 1))\r\n      addCartItem({ room_id: rid, product_id: pid, length: lengthVal, quantity: mq, color: this.mpTemp || '', note: this.mpOrderNote || '' })\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            this.mpSheet = false\r\n            uni.showToast({ title: `å·²åŠ å…¥æˆ¿é—´ï¼š${chosen}`, icon: 'success' })\r\n          } else {\r\n            const tip = typeof res?.data === 'string' ? res.data : (res?.data?.reason || '')\r\n            const msg = tip || res?.message || 'åŠ å…¥å¤±è´¥'\r\n            uni.showToast({ title: msg, icon: 'none' })\r\n          }\r\n        })\r\n        .catch(() => { uni.showToast({ title: 'åŠ å…¥è´­ç‰©è½¦å¤±è´¥', icon: 'none' }) })\r\n    },\r\n    normalizeMpQty() {\r\n      const n = Number(this.mpQty)\r\n      this.mpQty = isNaN(n) ? 1 : Math.max(1, Math.floor(n))\r\n    },\r\n    // MP Room Sheet Methods\r\n    openMpRoomSheet() {\r\n      this.roomSelectorMode = 'mp'\r\n      this.roomSelectorVisible = true\r\n      this.fetchRooms()\r\n    },\r\n    openMpAddressSheet() {\r\n      this.roomSelectorMode = 'addr'\r\n      this.roomSelectorVisible = true\r\n      this.loadAddresses()\r\n    },\r\n    closeMpRoomSheet() { this.roomSelectorVisible = false; this.lockScroll = false },\r\n    formatPriceWithSymbol(val) {\r\n      try {\r\n        if (val === '-' || val === 'â€”') return '-'\r\n        const n = Number(val)\r\n        if (isNaN(n)) return '-'\r\n        return 'Â¥' + n.toFixed(2)\r\n      } catch (e) { return '-' }\r\n    },\r\n    displaySpecPrice(it) {\r\n      if (!it) return 0\r\n      const base = Number(it.price || 0) || 0\r\n      if (it.has_length !== 1) return base\r\n      const spec = String(it.specification || '').toLowerCase()\r\n      const unit = this.parseLengthUnit(it.length_unit || it.unit, spec)\r\n      const mult = this.unitMultiplier(unit)\r\n      return base * mult\r\n    },\r\n    parseLengthUnit(unit, spec) {\r\n      const u = String(unit || '').toLowerCase()\r\n      const s = String(spec || '').toLowerCase()\r\n      if (u.includes('mm') || /(^|[^a-z])mm([^a-z]|$)/.test(s)) return 'mm'\r\n      if (u.includes('cm') || /(^|[^a-z])cm([^a-z]|$)/.test(s)) return 'cm'\r\n      if (u.includes('dm') || /(^|[^a-z])dm([^a-z]|$)/.test(s)) return 'dm'\r\n      if (u.includes('m') || /(^|[^a-z])m([^a-z]|$)/.test(s)) return 'm'\r\n      return 'm'\r\n    },\r\n    unitMultiplier(unit) {\r\n      if (unit === 'mm') return 1000\r\n      if (unit === 'cm') return 100\r\n      if (unit === 'dm') return 10\r\n      return 1\r\n    },\r\n    toMeters(len, unit) {\r\n      const u = unit || 'm'\r\n      if (u === 'mm') return Number(len) / 1000\r\n      if (u === 'cm') return Number(len) / 100\r\n      if (u === 'dm') return Number(len) / 10\r\n      return Number(len)\r\n    },\r\n    favProduct() {\r\n      try {\r\n        const pid = this.product?.id || ''\r\n        const u = uni.getStorageSync('user') || null\r\n        const token = (u && (u.token || (u.data && u.data.token))) || ''\r\n        if (!pid) { uni.showToast({ title: 'å•†å“ä¿¡æ¯ç¼ºå¤±', icon: 'none' }); return }\r\n        if (!token) { uni.showToast({ title: 'è¯·å…ˆç™»å½•', icon: 'none' }); return }\r\n        if (!this.isFavorite) {\r\n          addFavorite({ product_id: pid, token }).then((res) => {\r\n            if (res && res.success) { this.isFavorite = true; uni.showToast({ title: 'å·²æ”¶è—', icon: 'success' }) }\r\n            else { uni.showToast({ title: res?.message || 'æ”¶è—å¤±è´¥', icon: 'none' }) }\r\n          }).catch(() => { uni.showToast({ title: 'æ”¶è—å¤±è´¥', icon: 'none' }) })\r\n        } else {\r\n          deleteFavorite({ product_id: pid, token }).then((res) => {\r\n            if (res && res.success) { this.isFavorite = false; uni.showToast({ title: 'å·²å–æ¶ˆæ”¶è—', icon: 'success' }) }\r\n            else { uni.showToast({ title: res?.message || 'å–æ¶ˆå¤±è´¥', icon: 'none' }) }\r\n          }).catch(() => { uni.showToast({ title: 'å–æ¶ˆå¤±è´¥', icon: 'none' }) })\r\n        }\r\n      } catch (e) { uni.showToast({ title: 'æ”¶è—å¤±è´¥', icon: 'none' }) }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  background: #f7f7f7;\r\n  min-height: 100vh;\r\n  padding-bottom: 120rpx;\r\n}\r\n\r\n/* #ifdef MP-WEIXIN */\r\n.product-page { position: relative; z-index: 1; }\r\n/* èƒŒæ™¯å›¾æ ·å¼å·²ç§»é™¤ */\r\n/* #endif */\r\n\r\n.cover {\r\n  width: 100%;\r\n  height: 500rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.info {\r\n  background: #fff;\r\n  padding: 20rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 32rpx;\r\n  display: block;\r\n}\r\n\r\n.pd-title-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 12rpx;\r\n}\r\n\r\n.mp-title-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 12rpx;\r\n}\r\n\r\n.fav-star {\r\n  font-size: 48rpx;\r\n  color: #ccc;\r\n}\r\n.fav-star.active {\r\n  /* background: #ffec99; */\r\n  color: #e3b609;\r\n  border-radius: 8rpx;\r\n  padding: 2rpx 8rpx;\r\n}\r\n\r\n.price {\r\n  color: #000;\r\n  font-size: 34rpx;\r\n  margin-top: 8rpx;\r\n  display: block;\r\n}\r\n\r\n.sales {\r\n  color: #999;\r\n  font-size: 26rpx;\r\n  margin-top: 8rpx;\r\n  display: block;\r\n}\r\n\r\n.footer {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: #fff;\r\n  box-shadow: 0 -8rpx 20rpx rgba(0, 0, 0, .06);\r\n  padding: 20rpx;\r\n}\r\n\r\n.btn-cart {\r\n  width: 100%;\r\n  /* #ifndef H5 */\r\n  background: #000;\r\n  /* #endif */\r\n  /* #ifdef H5 */\r\n  background: #ff8c3a;\r\n  /* #endif */\r\n  color: #fff;\r\n  border-radius: 999rpx;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n/* é€šç”¨ï¼šè§„æ ¼åˆ—è¡¨ï¼ˆH5 ä¸ MP å…±ç”¨ï¼‰ */\r\n.specs-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.login-mask {\r\n  position: fixed;\r\n  top: 0; left: 0; right: 0; bottom: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 10000;\r\n}\r\n.login-modal {\r\n  width: 720rpx;\r\n  max-width: 90vw;\r\n  background: #fff;\r\n  border-radius: 24rpx;\r\n  padding: 48rpx 40rpx;\r\n  box-shadow: 0 20rpx 40rpx rgba(0,0,0,0.12);\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 32rpx;\r\n}\r\n.login-title {\r\n  font-size: 34rpx;\r\n  font-weight: 700;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n.login-desc {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  text-align: center;\r\n}\r\n.login-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 24rpx;\r\n}\r\n.btn-pill {\r\n  min-width: 240rpx;\r\n  height: 72rpx;\r\n  line-height: 72rpx;\r\n  padding: 0 40rpx;\r\n  border-radius: 999rpx;\r\n  text-align: center;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n.btn-pill.confirm {\r\n  background: #000;\r\n  color: #fff;\r\n  box-shadow: 0 8rpx 20rpx rgba(0,0,0,0.15);\r\n}\r\n.btn-pill.cancel {\r\n  background: #fff;\r\n  color: #999;\r\n  border: 2rpx solid #e5e5e5;\r\n}\r\n\r\n.spec-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  padding: 12rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 12rpx;\r\n  /* background: #fafafa; */\r\n  transition: all .2s;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.spec-item.active {\r\n  border-color: #8d8a8a;\r\n  /* background: #fff5f0; */\r\n}\r\n\r\n.spec-item.disabled {\r\n  cursor: not-allowed;\r\n}\r\n\r\n.spec-mask {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.15);\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: flex-end;\r\n  padding: 12rpx;\r\n  border-radius: 12rpx;\r\n}\r\n\r\n.spec-mask-ico {\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n}\r\n.spec-thumb {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 10rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.spec-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6rpx;\r\n}\r\n\r\n.spec-name {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  line-height: 1.4;\r\n}\r\n\r\n.spec-price-row {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 10rpx;\r\n}\r\n\r\n.spec-price {\r\n  color: #000;\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n}\r\n\r\n.spec-oprice {\r\n  color: #999;\r\n  font-size: 24rpx;\r\n  text-decoration: line-through;\r\n}\r\n\r\n.spec-unit {\r\n  color: #666;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.specs-toggle {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 16rpx;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  background: #fafafa;\r\n  border-radius: 0 0 12rpx 12rpx;\r\n}\r\n\r\n.toggle-icon {\r\n  margin-left: 8rpx;\r\n  font-size: 20rpx;\r\n}\r\n\r\n.rooms-list {\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.rooms-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, minmax(0, 1fr));\r\n  grid-gap: 12rpx;\r\n}\r\n\r\n.rooms-title {\r\n  color: #666;\r\n  font-size: 26rpx;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.room-item {\r\n  padding: 12rpx 14rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 10rpx;\r\n  background: #fafafa;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.room-name {\r\n  color: #333;\r\n  font-size: 28rpx;\r\n}\r\n\r\n/* #ifdef H5 */\r\n/* Hide scrollbars */\r\n.product-page ::-webkit-scrollbar {\r\n  display: none;\r\n  width: 0 !important;\r\n  height: 0 !important;\r\n  -webkit-appearance: none;\r\n  background: transparent;\r\n}\r\n\r\n.footer {\r\n  display: none;\r\n}\r\n\r\n/* H5 Card Layout */\r\n.h5-product-bg {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: url('/static/product_detail_background.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n  z-index: 0;\r\n  overflow-y: auto;\r\n  padding: 40rpx;\r\n}\r\n\r\n.h5-topbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 2;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 100rpx;\r\n  padding: 20rpx;\r\n}\r\n\r\n.back-btn {\r\n  height: 60rpx;\r\n  width: 60rpx;\r\n  line-height: 60rpx;\r\n  padding: 0;\r\n  border: none !important;\r\n  border-radius: 0;\r\n  background: transparent !important;\r\n  box-shadow: none !important;\r\n  outline: none;\r\n  color: #000;\r\n  font-size: 44rpx;\r\n  transition: background .2s, transform .2s, color .2s;\r\n}\r\n\r\n.back-btn::after {\r\n  border: none !important;\r\n}\r\n\r\n.back-btn:hover {\r\n  transform: translateY(0.3rpx);\r\n  font-weight: 500;\r\n}\r\n\r\n.h5-product-card {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  /* background: rgba(255, 255, 255, 0.95); */\r\n  border-radius: 24rpx;\r\n  /* box-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.1); */\r\n  overflow: hidden;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.pd-grid {\r\n  display: grid;\r\n  grid-template-columns: 3fr 2fr;\r\n  grid-gap: 80rpx;\r\n  padding: 60rpx;\r\n  align-items: start;\r\n  margin-top: 100rpx;\r\n}\r\n\r\n/* New styles for inline params */\r\n.pd-param-item.inline-params {\r\n  display: contents;\r\n}\r\n\r\n.pd-param-item.inline-params .sub-item {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 10rpx;\r\n}\r\n\r\n/* Qty Stepper matching cart */\r\n.qty-box {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #f7f7f7;\r\n  border-radius: 6rpx;\r\n  height: 60rpx;\r\n}\r\n\r\n.qty-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #333;\r\n  font-size: 36rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.qty-num {\r\n  padding: 0 12rpx;\r\n  font-size: 24rpx;\r\n  color: #333;\r\n}\r\n\r\n.pd-left {\r\n  height: 100%;\r\n  background: transparent;\r\n  /* border: 1rpx solid rgba(255,255,255,0.35); */\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-sizing: border-box;\r\n  /* box-shadow: 0 12rpx 40rpx rgba(0,0,0,0.08); */\r\n  -webkit-backdrop-filter: saturate(120%) blur(8px);\r\n  backdrop-filter: saturate(120%) blur(8px);\r\n}\r\n\r\n.pd-right {\r\n  height: 100%;\r\n  background: transparent;\r\n  border: 1rpx solid rgba(255, 255, 255, 0.35);\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-sizing: border-box;\r\n  box-shadow: 0 12rpx 40rpx rgba(0, 0, 0, 0.08);\r\n  -webkit-backdrop-filter: saturate(120%) blur(8px);\r\n  backdrop-filter: saturate(120%) blur(8px);\r\n}\r\n\r\n/* å³ä¾§å¡ç‰‡ç½®é¡¶ä¸”è‡ªé€‚åº”é«˜åº¦ï¼Œä»…å½±å“ H5 */\r\n.pd-right {\r\n  height: auto;\r\n  position: sticky;\r\n  margin-top: 80rpx;\r\n  align-self: start;\r\n}\r\n\r\n.pd-left {\r\n  overflow-y: auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 50rpx;\r\n  padding-right: 6rpx;\r\n}\r\n\r\n.pd-gallery {\r\n  /* background: #fff; */\r\n  border-radius: 12rpx;\r\n  /* padding: 20rpx; */\r\n  position: relative;\r\n  border: 1rpx solid rgba(255, 255, 255, 0.35);\r\n  box-shadow: 0 12rpx 40rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.pd-main {\r\n  width: 100%;\r\n  height: 520rpx;\r\n  border-radius: 8rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.pd-thumbs {\r\n  position: static;\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 12rpx;\r\n  /* margin-top: 12rpx; */\r\n  overflow-x: auto;\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n  /* background: rgba(255,255,255,0.5); */\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  /* box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.06); */\r\n}\r\n\r\n.pd-thumbs::-webkit-scrollbar {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n\r\n.pd-thumb {\r\n  width: 88rpx;\r\n  height: 88rpx;\r\n  border-radius: 8rpx;\r\n  background: #f5f5f5;\r\n  border: 1rpx solid #eee;\r\n}\r\n\r\n.pd-thumb.active {\r\n  outline: 3rpx solid #333;\r\n}\r\n\r\n.pd-card {\r\n  background: transparent;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  border: 1rpx solid rgba(255, 255, 255, 0.35);\r\n  box-shadow: 0 12rpx 40rpx rgba(0, 0, 0, 0.08);\r\n  -webkit-backdrop-filter: saturate(120%) blur(8px);\r\n  backdrop-filter: saturate(120%) blur(8px);\r\n}\r\n\r\n.pd-section-title {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n  display: block;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.pd-param-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 16rpx 40rpx;\r\n  /* background: #fafafa; */\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n}\r\n\r\n.pd-param-item {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n  justify-content: flex-start;\r\n  gap: 20rpx;\r\n  border: none;\r\n  padding: 4rpx 0;\r\n}\r\n\r\n.pd-param-item .key {\r\n  color: #999;\r\n  font-size: 24rpx;\r\n  min-width: 80rpx;\r\n}\r\n\r\n.pd-param-item .val {\r\n  color: #333;\r\n  font-size: 26rpx;\r\n  margin-top: 0rpx;\r\n  flex: 1;\r\n}\r\n.pd-param-grid, .pd-param-item .key, .pd-param-item .val, .mp-param-grid, .mp-param-item .key, .mp-param-item .val {\r\n  user-select: text;\r\n  -webkit-user-select: text;\r\n}\r\n.product-page, .product-page * {\r\n  user-select: text;\r\n  -webkit-user-select: text;\r\n}\r\n\r\n.pd-detail-img {\r\n  width: 100%;\r\n  border-radius: 8rpx;\r\n  background: #f5f5f5;\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.pd-info {\r\n  background: transparent;\r\n  padding: 0;\r\n  box-shadow: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18rpx;\r\n}\r\n\r\n.pd-address .addr-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 12rpx;\r\n  padding: 12rpx;\r\n  background: #fafafa;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 10rpx;\r\n}\r\n\r\n.pd-address .addr-line {\r\n  display: block;\r\n  color: #333;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.pd-address .addr-btn {\r\n  background: #f7f7f7;\r\n  color: #333;\r\n  border: 1rpx solid #e6e6e6;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n/* H5 è§„æ ¼åˆ—è¡¨å·¦å›¾å³æ–‡æ’ç‰ˆï¼šä¸€è¡Œä¸¤åˆ— */\r\n.specs-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, minmax(0, 1fr));\r\n  grid-gap: 12rpx;\r\n}\r\n\r\n.spec-item {\r\n  flex-direction: row;\r\n  align-items: center;\r\n  box-shadow: 0 6rpx 16rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.spec-thumb {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n}\r\n\r\n.spec-info {\r\n  flex: 1;\r\n}\r\n\r\n.spec-price-row {\r\n  justify-content: flex-start;\r\n  gap: 10rpx;\r\n}\r\n\r\n.pd-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.pd-field {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 8rpx;\r\n}\r\n\r\n.pd-field.inline {\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  gap: 20rpx;\r\n}\r\n\r\n/* .pd-param-grid { display: flex; align-items: center; gap: 20rpx; white-space: nowrap; overflow: hidden; } */\r\n.pd-param-item {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  white-space: nowrap;\r\n}\r\n\r\n.pd-param-item .key,\r\n.pd-param-item .val {\r\n  white-space: nowrap;\r\n}\r\n\r\n.pd-param-item.inline-params {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.pd-param-item.inline-params .sub-item {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  white-space: nowrap;\r\n}\r\n\r\n.pd-param-item.inline-params .sub-item .val {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 40vw;\r\n}\r\n\r\n.picker-display {\r\n  flex: 1;\r\n  min-height: 64rpx;\r\n  line-height: 64rpx;\r\n  background: white;\r\n  border: 1rpx solid #e5e5e5;\r\n  border-radius: 10rpx;\r\n  padding: 0 14rpx;\r\n  color: #666;\r\n  max-width: 30%;\r\n}\r\n\r\n.pd-input {\r\n  width: 100%;\r\n  height: 64rpx;\r\n  line-height: 64rpx;\r\n  background: white;\r\n  border: 1rpx solid #e5e5e5;\r\n  border-radius: 10rpx;\r\n  padding: 0 14rpx;\r\n  max-width: 30%;\r\n}\r\n\r\n/* H5 å†…è”å­—æ®µè¾“å…¥å®½åº¦ç¼©å° */\r\n.pd-field.inline .pd-input,\r\n.pd-field.inline .picker-display {\r\n  flex: 1;\r\n  /* width: 60%; */\r\n}\r\n\r\n.unit-tip {\r\n  margin-left: 12rpx;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.pd-title {\r\n  font-size: 40rpx;\r\n  color: #222;\r\n  font-weight: 700;\r\n  display: block;\r\n  padding: 10rpx;\r\n}\r\n\r\n.pd-price-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.pd-price {\r\n  color: #000;\r\n  font-size: 50rpx;\r\n  font-weight: 700;\r\n}\r\n\r\n.pd-coupon {\r\n  background: #18FAE0;\r\n  color: #000;\r\n  padding: 8rpx 12rpx;\r\n  border-radius: 6rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.pd-meta {\r\n  color: #777;\r\n  font-size: 24rpx;\r\n  /* margin-top: 12rpx; */\r\n}\r\n\r\n.pd-qty-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 20rpx;\r\n  padding: 12rpx;\r\n  background: #fafafa;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 10rpx;\r\n}\r\n\r\n.qty-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.pd-qty-row .label {\r\n  color: #333;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.actions-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n}\r\n\r\n.actions-wrapper .btn-buy {\r\n  width: auto;\r\n  min-width: 140rpx;\r\n  height: 60rpx;\r\n  line-height: 60rpx;\r\n  font-size: 26rpx;\r\n  background: linear-gradient(135deg, #ff6a00, #ff2d55);\r\n  color: #fff;\r\n  border-radius: 30rpx;\r\n  padding: 0 20rpx;\r\n  margin: 0;\r\n}\r\n\r\n.pd-info .actions-wrapper .btn-cart {\r\n  flex: none;\r\n  width: auto;\r\n  min-width: 140rpx;\r\n  height: 60rpx;\r\n  line-height: 60rpx;\r\n  font-size: 26rpx;\r\n  background: #ff8c3a;\r\n  color: #fff;\r\n  border-radius: 30rpx;\r\n  padding: 0 20rpx;\r\n  margin: 0;\r\n}\r\n\r\n/* H5 æˆ¿é—´é€‰æ‹©å¼¹çª— */\r\n.h5-mask {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, .45);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.h5-sheet {\r\n  width: 820rpx;\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 12rpx 28rpx rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n.h5-title {\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n  color: #333;\r\n  padding-bottom: 12rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.h5-actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.h5-btn {\r\n  flex: 1;\r\n  height: 72rpx;\r\n  border-radius: 999rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.h5-btn.ghost {\r\n  background: #f7f7f7;\r\n  color: #333;\r\n  border: 1rpx solid #e6e6e6;\r\n}\r\n\r\n.h5-btn.primary {\r\n  background: linear-gradient(135deg, #ff6a00, #ff2d55);\r\n  color: #fff;\r\n  box-shadow: 0 6rpx 16rpx rgba(255, 106, 0, 0.35);\r\n}\r\n\r\n/* #endif */\r\n\r\n/* #ifdef MP-WEIXIN */\r\n.product-page.no-scroll {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.mp-mask {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, .55);\r\n  display: flex;\r\n  align-items: flex-end;\r\n  /* åº•éƒ¨å¼¹çª— */\r\n  justify-content: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.mp-sheet {\r\n  width: 100vw;\r\n  max-width: none;\r\n  background: #fff;\r\n  border-top-left-radius: 24rpx;\r\n  border-top-right-radius: 24rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 -8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 80vh;\r\n  overflow: hidden;\r\n  animation: mpSlideUp .22s ease-out;\r\n  padding-bottom: calc(24rpx + env(safe-area-inset-bottom));\r\n}\r\n\r\n.mp-scroll-view {\r\n  flex: 1;\r\n  min-height: 0;\r\n  margin-bottom: 16rpx;\r\n  height: 60vh;\r\n  overflow-y: scroll;\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n.mp-scroll-view::-webkit-scrollbar {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n\r\n.mp-title {\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n  color: #333;\r\n}\r\n.count-input {\r\n  width: 72rpx;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  border: none;\r\n  border-radius: 0;\r\n  text-align: center;\r\n  font-size: 30rpx;\r\n  background: transparent;\r\n  color: #333;\r\n  margin: 0 12rpx;\r\n}\r\n  /* padding-bottom: 12rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  margin-bottom: 20rpx;\r\n} */\r\n\r\n.mp-field {\r\n  display: flex;\r\n  align-items: center;\r\n  /* justify-content: space-between; */\r\n  gap: 12rpx;\r\n  margin: 16rpx 0;\r\n}\r\n\r\n.mp-input {\r\n  width: 60%;\r\n  height: 64rpx;\r\n  line-height: 64rpx;\r\n  background: #fff;\r\n  border: 1rpx solid #e6e6e6;\r\n  border-radius: 12rpx;\r\n  padding: 0 14rpx;\r\n}\r\n\r\n.mp-actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  margin-top: auto;\r\n  /* å›ºå®šåœ¨åº•éƒ¨ */\r\n  padding-top: 16rpx;\r\n  border-top: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.mp-btn {\r\n  flex: 1;\r\n  height: 72rpx;\r\n  border-radius: 999rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.mp-btn.ghost {\r\n  background: #f7f7f7;\r\n  color: #333;\r\n  border: 1rpx solid #e6e6e6;\r\n}\r\n\r\n.mp-btn.primary {\r\n  background: #000;\r\n  color: #fff;\r\n}\r\n\r\n/* ä½¿æ•°é‡æ­¥è¿›å™¨æ¨ªå‘æ’åˆ— */\r\n.mp-sheet .qty-stepper {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  background: #f7f7f7;\r\n  border-radius: 40rpx;\r\n  height: 80rpx;\r\n  padding: 0 4rpx;\r\n}\r\n\r\n/* æ·˜å®é£æ ¼ï¼šæ­¥è¿›å™¨åœ¨å¼¹çª—å†…çš„æ ·å¼é€‚é… */\r\n.mp-sheet .qty-stepper .step {\r\n  width: 64rpx;\r\n  height: 100%;\r\n  border-radius: 0;\r\n  background: transparent;\r\n  border: none;\r\n  color: #333;\r\n  font-size: 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.mp-sheet .qty-stepper .step::after {\r\n  border: none;\r\n}\r\n\r\n/* Remove button border */\r\n\r\n.mp-sheet .qty-stepper .count {\r\n  width: 80rpx;\r\n  text-align: center;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n\r\n@keyframes mpSlideUp {\r\n  from {\r\n    transform: translateY(100%);\r\n  }\r\n\r\n  to {\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n/* å‚æ•°ä¸å›¾æ–‡è¯¦æƒ…æ ·å¼ */\r\n.mp-section {\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  margin: 20rpx;\r\n}\r\n\r\n.mp-title {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.mp-param-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n  border-radius: 10rpx;\r\n  background: #fafafa;\r\n}\r\n\r\n.mp-param-item {\r\n  border: none;\r\n  padding: 10rpx;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.mp-param-item .key {\r\n  color: #666;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.mp-param-item .val {\r\n  color: #333;\r\n  font-size: 26rpx;\r\n  margin-top: 0rpx;\r\n}\r\n\r\n.mp-detail-img {\r\n  width: 100%;\r\n  border-radius: 8rpx;\r\n  background: #f5f5f5;\r\n  margin-top: 12rpx;\r\n}\r\n\r\n/* #endif */\r\n\r\n/* MP Modifications */\r\n.mp-info-spacing {\r\n  padding: 20rpx 40rpx;\r\n}\r\n\r\n.mp-section-spacing {\r\n  padding: 20rpx 20rpx;\r\n}\r\n\r\n.mp-price-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.mp-param-row-inline {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  margin-top: 12rpx;\r\n  border-top: 1rpx solid #eee;\r\n  padding-top: 12rpx;\r\n}\r\n\r\n.mp-param-item.inline {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  border: none;\r\n  padding: 0 10rpx;\r\n  gap: 4rpx;\r\n}\r\n\r\n.mp-param-item.inline .key {\r\n  margin-bottom: 0;\r\n  white-space: nowrap;\r\n}\r\n\r\n.mp-param-item.inline .val {\r\n  margin-top: 0;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* #ifdef MP-WEIXIN */\r\n.mp-param-grid {\r\n  width: 100%;\r\n  margin: 0 auto;\r\n}\r\n\r\n.mp-param-item .key {\r\n  min-width: 120rpx;\r\n  display: inline-block;\r\n}\r\n\r\n.pd-section-title {\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n/* #endif */\r\n\r\n/* Address Card Style from Cart Page (H5) */\r\n.address-card {\r\n  position: relative;\r\n  /* background: #fff; */\r\n  border-radius: 16rpx;\r\n  padding: 20rpx;\r\n  padding-right: 180rpx;\r\n  /* box-shadow: 0 4rpx 16rpx rgba(0,0,0,.06); */\r\n  /* border: 1rpx solid #eee; */\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.address-card .addr-title {\r\n  font-weight: 600;\r\n  color: #333;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.address-card .addr-body {\r\n  margin-top: 8rpx;\r\n  color: #555;\r\n  font-size: 24rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6rpx;\r\n}\r\n\r\n.address-card .addr-line {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n}\r\n\r\n.address-card .addr-empty {\r\n  margin-top: 8rpx;\r\n  color: #999;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.address-card .addr-actions {\r\n  position: absolute;\r\n  right: 20rpx;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  margin-top: 0;\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.address-card .addr-btn {\r\n  background: #fff;\r\n  border: 1rpx solid #ddd;\r\n  color: #333;\r\n  border-radius: 999rpx;\r\n  font-size: 24rpx;\r\n  padding: 0 20rpx;\r\n  height: 50rpx;\r\n  line-height: 48rpx;\r\n}\r\n\r\n.address-card .addr-btn {\r\n  background: #fff;\r\n  border: 1rpx solid #ddd;\r\n  color: #333;\r\n  border-radius: 999rpx;\r\n  font-size: 30rpx;\r\n  padding: 0 40rpx;\r\n  height: 72rpx;\r\n  line-height: 70rpx;\r\n}\r\n\r\n.address-card {\r\n  padding-right: 220rpx;\r\n}\r\n\r\n/* MP Address Bar Style from Cart Page */\r\n.mp-address-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20rpx;\r\n  /* background: #fff; */\r\n  border: 1rpx solid #e6e6e6;\r\n  border-radius: 12rpx;\r\n  margin: 16rpx 0;\r\n}\r\n\r\n.bar-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.addr-icon {\r\n  font-size: 28rpx;\r\n  color: #000;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.bar-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  font-size: 24rpx;\r\n  color: #555;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.bar-line {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.bar-btn {\r\n  background: #fff;\r\n  border: 1rpx solid #ddd;\r\n  color: #333;\r\n  border-radius: 999rpx;\r\n  margin: 0;\r\n  font-size: 24rpx;\r\n  padding: 0 24rpx;\r\n  height: 50rpx;\r\n  line-height: 48rpx;\r\n  flex-shrink: 0;\r\n}\r\n\r\n/* H5 Actions Row (3 buttons layout) */\r\n.pd-actions-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n  margin-top: 24rpx;\r\n}\r\n\r\n.qty-box-large {\r\n  width: 200rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 80rpx;\r\n  background: #f7f7f7;\r\n  border-radius: 40rpx;\r\n  padding: 0 4rpx;\r\n}\r\n\r\n.qty-box-large .qty-btn {\r\n  width: 64rpx;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 40rpx;\r\n  color: #333;\r\n}\r\n\r\n.qty-box-large .qty-num {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n.qty-box-large .qty-input {\r\n  width: 72rpx;\r\n  height: 100%;\r\n  border: none;\r\n  background: transparent;\r\n  text-align: center;\r\n  font-size: 30rpx;\r\n  color: #333;\r\n}\r\n\r\n.btn-action {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  border-radius: 40rpx;\r\n  font-size: 28rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n  margin: 0;\r\n  font-weight: 600;\r\n}\r\n\r\n.btn-action.btn-cart {\r\n  background: #d9d9d9;\r\n  color: #333;\r\n}\r\n\r\n.btn-action.btn-buy {\r\n  background: #000;\r\n  color: #fff;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/HP/Desktop/LiShop/LiShop/pages/product/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getProductDetail","uni","e","getProductSpecs","addCartItem","_a","createDirectOrder","getRooms","getAddresses","createRoom","addAddress","addFavorite","deleteFavorite"],"mappings":";;;;AA+UA,MAAK,eAAgB,MAAW;AAChC,oBAAoB,MAAW;AAC/B,MAAO,WAAU,MAAW;AAC5B,MAAK,kBAAmB,MAAW;AACnC,oBAAoB,MAAW;AAE/B,MAAK,YAAU;AAAA,EACb,YAAY,EAAE,cAAc,aAAa,UAAU,iBAAiB,YAAa;AAAA,EACjF,OAAO;AAAE,WAAO,EAAE,KAAK,MAAM,SAAS,MAAM,SAAS,GAAG,KAAK,GAAG,UAAU,IAAI,YAAY,IAAI,UAAU,IAAI,QAAQ,IAAI,UAAU,CAAE,GAAE,SAAS,OAAO,aAAa,OAAO,QAAQ,IAAI,UAAU,IAAI,QAAQ,IAAI,OAAO,GAAG,aAAa,IAAI,OAAO,CAAA,GAAI,cAAc,OAAO,WAAW,OAAO,WAAW,IAAI,WAAW,IAAI,mBAAmB,IAAI,kBAAkB,MAAM,YAAY,OAAO,eAAe,GAAG,qBAAqB,OAAO,kBAAkB,MAAM,WAAW,IAAI,iBAAiB,MAAM,aAAa,IAAI,YAAY,OAAO,aAAa,MAAM,kBAAkB,KAAM,cAAc,OAAO,gBAAgB,OAAO,iBAAiB,CAAE,GAAE,iBAAiB,CAAA,GAAI,iBAAiB,GAAG,gBAAgB;EAAS;AAAA,EAC3rB,OAAO,OAAO;AACZ,UAAM,KAAK,oBAAmB,+BAAO,OAAM,EAAE;AAC7C,QAAI,CAAC,IAAI;AAAE,WAAK,UAAU,EAAE,IAAI,IAAI,OAAO,MAAM,OAAO,GAAG,OAAO,GAAG,OAAO,oBAAoB,QAAQ,CAAC,kBAAkB;AAAK;AAAA,IAAO;AACvIA,+BAAiB,EAAE,sBAAsB,IAAI,EAC1C,KAAK,CAAC,QAAQ;AACb,YAAM,KAAI,2BAAK,SAAQ,CAAC;AACxB,YAAM,QAAQ,CAAC,MAAM,OAAO,MAAM,WAAW,EAAE,QAAQ,MAAM,EAAE,EAAE,KAAO,IAAE;AAC1E,YAAM,MAAM,CAAC,MAAM,MAAM,QAAQ,CAAC,IAAI,EAAE,IAAI,KAAK,EAAE,OAAO,OAAO,IAAI,CAAC;AACtE,YAAM,OAAO,IAAI,EAAE,UAAU;AAC7B,YAAM,SAAS,IAAI,EAAE,SAAS;AAC9B,YAAM,aAAa,IAAI,EAAE,MAAM;AAC/B,YAAM,QAAQ,OAAO,EAAE,SAAS,CAAC,KAAK;AACtC,YAAM,OAAO;AAAA,QACX,IAAI,EAAE,wBAAwB;AAAA,QAC9B,OAAO,EAAE,QAAS,QAAQ;AAAA,QAC1B;AAAA,QACA,OAAO;AAAA,QACP,MAAM,EAAE,QAAQ,EAAE,gBAAgB;AAAA,QAClC,SAAS,EAAE,WAAW;AAAA,QACtB,iBAAiB,MAAM,EAAE,eAAe,KAAK;AAAA,QAC7C,YAAY,CAAC,GAAG,MAAM,GAAG,MAAM,EAAE,SAAS,CAAC,GAAG,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB;AAAA,QACpF,gBAAgB;AAAA,QAChB,qBAAqB,EAAE,uBAAuB;AAAA,QAC9C,6BAA6B,EAAE,+BAA+B;AAAA,QAC9D,kBAAkB,EAAE,oBAAoB;AAAA,QACxC,OAAO,KAAK,CAAC,KAAK;AAAA,QAClB,QAAQ,CAAC,GAAG,MAAM,GAAG,MAAM,EAAE,SAAS,CAAC,GAAG,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB;AAAA,MAClF;AACA,WAAK,UAAU;AACf,WAAK,aAAc,OAAO,EAAE,WAAW,MAAM,OAAS,EAAE,gBAAgB,KAAO,EAAE,gBAAgB;AACjG,WAAK,WAAW,KAAK,EAAE;AACvB,WAAK,mBAAmB;AACxB,WAAK,UAAU,MAAM;AACnB,cAAM,MAAM,KAAK;AACjB,YAAI,KAAK,QAAQ,GAAG,GAAG;AACrB,eAAK,eAAe;AACpB,eAAK,aAAa;AAClB,cAAI;AACF,kBAAM,OAAOC,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,kBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,gBAAI,QAAQ,OAAO,KAAK,SAAS;AAAY,mBAAK,KAAK;AAAA,qBAC9C,QAAQ,OAAO,KAAK,SAAS;AAAY,mBAAK,KAAK;AAAA,mBACrD,GAAG;AAAA,UAAC;AAAA,QACf;AAAA,OACD;AAAA,KACF,EACA,MAAM,MAAM;AAEX,WAAK,UAAU,EAAE,IAAI,OAAO,QAAQ,IAAI,OAAO,GAAG,OAAO,GAAG,iBAAiB,IAAI,OAAO,oBAAoB,QAAQ,CAAC,kBAAkB,EAAE;AACzI,WAAK,WAAW,EAAE;AAClB,WAAK,mBAAmB;AACxB,WAAK,UAAU,MAAM;AACnB,cAAM,MAAM,KAAK;AACjB,YAAI,KAAK,QAAQ,GAAG,GAAG;AACrB,eAAK,eAAe;AACpB,eAAK,aAAa;AAClB,cAAI;AACF,kBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,kBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,gBAAI,QAAQ,OAAO,KAAK,SAAS;AAAY,mBAAK,KAAK;AAAA,qBAC9C,QAAQ,OAAO,KAAK,SAAS;AAAY,mBAAK,KAAK;AAAA,mBACrD,GAAG;AAAA,UAAC;AAAA,QACf;AAAA,OACD;AAAA,KACF;AAAA,EACJ;AAAA,EACD,UAAU;AACR,QAAI;AACF,YAAM,IAAI,MAAM;AAAE,aAAK,iBAAiB;AAAA,MAAK;AAC7C,WAAK,sBAAsB;AAC3BA,0BAAI,IAAI,uBAAuB,CAAC;AAAA,aACzB,GAAG;AAAA,IAAC;AAAA,EACd;AAAA,EACD,WAAW;AACT,QAAI;AACF,UAAI,KAAK;AAAqBA,sBAAG,MAAC,KAAK,uBAAuB,KAAK,mBAAmB;AACtF,WAAK,sBAAsB;AAAA,aACpB,GAAG;AAAA,IAAC;AAAA,EACd;AAAA,EACD,UAAU;AAAA,IACR,eAAe;AACb,aAAO,KAAK,qBAAqB,SAAS,SAAS;AAAA,IACpD;AAAA,IACD,oBAAoB;;AAClB,YAAM,IAAI,SAAO,UAAK,YAAL,mBAAc,WAAQ,UAAK,YAAL,mBAAc,mBAAgB,UAAK,YAAL,mBAAc,aAAY,EAAE,EAAE,YAAY;AAC/G,UAAI,CAAC,GAAG;AACN,cAAM,IAAI,OAAQ,KAAK,WAAW,KAAK,QAAQ,WAAY,EAAE,EAAE,YAAY;AAC3E,eAAO,EAAE,SAAS,UAAU,KAAK,EAAE,SAAS,IAAI;AAAA,MAClD;AACA,aAAO,EAAE,SAAS,UAAU,KAAK,EAAE,SAAS,IAAI;AAAA,IACjD;AAAA,IACD,SAAS;;AACP,YAAM,OAAQ,KAAK,WAAW,KAAK,QAAQ,cAAe,CAAC;AAC3D,aAAO,KAAK,SAAS,OAAO,GAAC,UAAK,YAAL,mBAAc,UAAS,kBAAkB;AAAA,IACvE;AAAA,IACD,eAAe;AACb,YAAM,MAAM,KAAK;AACjB,aAAO,IAAI,KAAK,OAAO,KAAK,IAAI,CAAC;AAAA,IAClC;AAAA,IACD,WAAW;AACT,YAAM,MAAM,KAAK;AACjB,UAAI,CAAC,KAAK,QAAQ,GAAG;AAAG,eAAO;AAC/B,UAAI,IAAI,SAAS,OAAO;AAAG,eAAO;AAClC,YAAM,WAAW,IAAI,SAAS,GAAG;AACjC,YAAM,IAAI,KAAK,IAAI;AACnB,aAAO,WAAY,MAAM,QAAQ,IAAM,MAAM,QAAQ;AAAA,IACtD;AAAA,IACD,eAAe;AACb,aAAQ,KAAK,qBAAqB,KAAK,KAAK,MAAM,KAAK,iBAAiB,IAAK,KAAK,MAAM,KAAK,iBAAiB,IAAI;AAAA,IACnH;AAAA,IACD,eAAe;AACb,cAAQ,KAAK,aAAa,CAAE,GAAE,IAAI,QAAM,EAAE,MAAM,GAAG,EAAE,QAAQ,IAAI,EAAE,KAAK,IAAI,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAAC,GAAG,KAAM,GAAE,KAAK,EAAA,EAAI;AAAA,IAC7K;AAAA,IACD,gBAAgB;AACd,aAAO,KAAK,qBAAqB,SAAS,KAAK,eAAe,KAAK;AAAA,IACpE;AAAA,IACD,uBAAuB;AACrB,UAAI,KAAK,qBAAqB;AAAM,eAAO,KAAK,UAAU;AAC1D,UAAI,KAAK,qBAAqB;AAAM,eAAO,KAAK,YAAY;AAC5D,YAAM,IAAI,KAAK;AACf,aAAO,IAAI,GAAG,EAAE,QAAQ,IAAI,EAAE,KAAK,IAAI,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAAC,GAAG,KAAO,IAAE;AAAA,IAChI;AAAA,IACD,mBAAmB;AACjB,YAAM,IAAI,KAAK;AACf,aAAO,IAAI,GAAG,EAAE,QAAQ,IAAI,EAAE,KAAK,IAAI,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAAC,GAAG,KAAO,IAAE;AAAA,IAChI;AAAA,IACD,iBAAiB;;AACf,UAAI;AACF,cAAM,IAAI,SAAO,UAAK,iBAAL,mBAAmB,gBAAe,EAAE,EAAE,YAAY;AACnE,YAAI,EAAE,SAAS,IAAI;AAAG,iBAAO;AAC7B,YAAI,EAAE,SAAS,IAAI;AAAG,iBAAO;AAC7B,YAAI,EAAE,SAAS,IAAI;AAAG,iBAAO;AAC7B,YAAI,EAAE,SAAS,GAAG;AAAG,iBAAO;AAC5B,eAAO;AAAA,MACT,SAAS,GAAG;AAAE,eAAO;AAAA,MAAI;AAAA,IAC1B;AAAA,IACD,kBAAkB;;AAChB,YAAM,MAAM,KAAK;AACjB,YAAM,UAAU,MAAM,IAAI,SAAQ,UAAK,YAAL,mBAAc;AAChD,UAAI,YAAY,OAAO,YAAY;AAAK,eAAO;AAC/C,YAAM,WAAW,OAAO,WAAW,CAAC,KAAK;AACzC,UAAI,OAAO,IAAI,eAAe,GAAG;AAC/B,cAAM,UAAU,KAAK,cAAc,IAAI,QAAQ,YAAY,EAAE;AAC7D,cAAM,MAAM,SAAS,OAAO,MAAM,IAAI;AACtC,YAAI,MAAM,GAAG;AACX,gBAAM,SAAS,KAAK,SAAS,KAAK,KAAK,cAAc;AACrD,kBAAQ,WAAW,QAAQ,QAAQ,CAAC;AAAA,QACtC;AACA,eAAO,GAAG,SAAS,QAAQ,CAAC,CAAC;AAAA,MAC/B;AACA,aAAO,SAAS,QAAQ,CAAC;AAAA,IAC1B;AAAA,IACD,4BAA4B;AAC1B,YAAM,IAAI,KAAK;AACf,UAAI,MAAM;AAAK,eAAO;AACtB,aAAO,MAAM;AAAA,IACf;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,cAAc;AAAA,MACZ,QAAQ,KAAK;AAAE,aAAK,QAAQ,GAAG;AAAA,MAAG;AAAA,MAClC,WAAW;AAAA,IACb;AAAA,IAEA,QAAQ,KAAK;AACX,YAAM,OAAO,KAAK,UAAU,CAAA,GAAI,GAAG;AACnC,UAAI,KAAK,QAAQ,GAAG,GAAG;AACrB,aAAK,UAAU,MAAM;AACnB,cAAI;AACF,kBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,kBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,gBAAI,QAAQ,OAAO,KAAK,SAAS;AAAY,mBAAK,KAAK;AAAA,qBAC9C,QAAQ,OAAO,KAAK,SAAS;AAAY,mBAAK,KAAK;AAAA,mBACrD,GAAG;AAAA,UAAE;AAAA,SACf;AACD,aAAK,eAAe;AAAA,aACf;AACL,aAAK,eAAe;AACpB,aAAK,mBAAmB;AAAA,MAC1B;AAAA,IACF;AAAA,EACD;AAAA,EACD,gBAAgB;AACd,QAAI,KAAK,KAAK;AACZ,WAAK,IAAI,QAAQ;AACjB,WAAK,MAAM;AAAA,IACb;AACA,SAAK,aAAa;AAAA,EACnB;AAAA,EACD,SAAS;AACP,SAAK,cAAc;AACnB,QAAI;AACF,YAAM,OAAO,CAAC,CAACA,oBAAI,eAAe,qBAAqB;AACvD,YAAM,MAAMA,cAAG,MAAC,eAAe,4BAA4B,KAAK;AAChE,YAAM,MAAM,OAAOA,cAAAA,MAAI,eAAe,kBAAkB,KAAK,CAAC;AAC9D,YAAM,cAAcA,cAAG,MAAC,eAAe,kBAAkB,KAAK,CAAC;AAC/D,UAAI,QAAQ,KAAK;AACf,YAAI,MAAM,QAAQ,WAAW,KAAK,YAAY;AAAQ,eAAK,kBAAkB;AAC7E,cAAM,UAAU,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,KAAK,gBAAgB,SAAS,CAAC,CAAC;AAC1E,aAAK,kBAAkB;AACvB,aAAK,UAAU,MAAM;AACnB,cAAI,OAAO;AACX,cAAI;AAAE,mBAAO,OAAO,WAAW;AAAA,UAAc,SAAO,GAAG;AAAE,mBAAO;AAAA,UAAM;AACtE,cAAI,QAAQ,oBAAoB,QAAQ,uBAAuB;AAC7D,gBAAI;AAAM,mBAAK,cAAc;AAAA;AACxB,mBAAK,gBAAgB;AAC1B,uBAAW,MAAM;AAAE,mBAAK,kBAAkB,uBAAuB,EAAE;AAAA,YAAG,GAAE,GAAG;AAAA,iBACtE;AACL,iBAAK,kBAAkB,KAAK,CAAC;AAAA,UAC/B;AAAA,SACD;AAAA,MACH;AAAA,aACO,GAAG;AAAA,IAAC;AAAA,EACd;AAAA,EACD,SAAS;AAAA,IACP,kBAAkB,KAAK,OAAO;AAC5B,YAAM,MAAM,KAAK,IAAI,GAAG,OAAO,SAAS,CAAC,CAAC;AAC1C,YAAM,UAAU,CAAC,SAAS;AACxB,YAAI,OAAO;AACX,YAAI;AAAE,iBAAO,OAAO,WAAW;AAAA,QAAc,SAAO,GAAG;AAAE,iBAAO;AAAA,QAAM;AACtE,YAAI,MAAM;AACR,gBAAM,KAAK,OAAO,aAAa,cAAc,SAAS,cAAc,GAAG,IAAI;AAC3E,cAAI,IAAI;AACN,iBAAK,sBAAsB,GAAG;AAC9B;AAAA,UACF;AAAA,eACK;AACL,gBAAM,IAAIA,cAAG,MAAC,oBAAmB,EAAG,GAAG,IAAI;AAC3C,YAAE,OAAO,GAAG,EAAE,mBAAmB;AACjC,YAAE,KAAK,SAAO;AACZ,kBAAM,KAAK,OAAO,CAAA,GAAI,CAAC;AACvB,gBAAI,GAAG;AACL,mBAAK,sBAAsB,GAAG;AAC9B;AAAA,YACF;AAAA,WACD;AAAA,QACH;AACA,YAAI,CAAC,KAAK;AAAgB,eAAK,iBAAiB;AAChD,YAAI,OAAO,GAAG;AAAE,qBAAW,MAAM,QAAQ,OAAO,CAAC,GAAG,GAAG;AAAA,QAAE;AAAA,MAC3D;AACA,cAAQ,GAAG;AAAA,IACZ;AAAA,IACD,SAAS;AACP,UAAI,OAAO,WAAW,eAAe,OAAO,WAAW,OAAO,QAAQ,SAAS,GAAG;AAAE,eAAO,QAAQ,KAAM;AAAE;AAAA,MAAO;AAClH,UAAIA,uBAAOA,cAAAA,MAAI,WAAW;AAAEA,sBAAG,MAAC,UAAU,EAAE,KAAK,qBAAqB;AAAG;AAAA,MAAO;AAChF,UAAIA,uBAAOA,cAAAA,MAAI,YAAY;AAAEA,sBAAG,MAAC,WAAW,EAAE,KAAK,qBAAqB;AAAG;AAAA,MAAO;AAAA,IACnF;AAAA,IACD,QAAQ,KAAK;AAAA,IAyCZ;AAAA,IACD,QAAQ,KAAK;AACX,UAAI,CAAC;AAAK,eAAO;AACjB,aAAO,IAAI,SAAS,MAAM,KAAK,IAAI,SAAS,OAAO;AAAA,IACpD;AAAA,IACD,eAAe,GAAG;AAChB,UAAI;AACF,cAAM,MAAO,KAAK,EAAE,UAAU,OAAO,EAAE,OAAO,YAAY,WAAY,EAAE,OAAO,UAAU;AACzF,aAAK,UAAU;AACf,cAAM,OAAO,KAAK,UAAU,CAAA,GAAI,GAAG;AACnC,YAAI,KAAK,QAAQ,GAAG,GAAG;AACrB,eAAK,eAAe;AACpB,eAAK,aAAa;AAClB,eAAK,UAAU,MAAM;AACnB,gBAAI;AACF,oBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,oBAAM,OAAOA,cAAG,MAAC,mBAAmB,YAAY,IAAI;AACpD,kBAAI,QAAQ,OAAO,KAAK,SAAS;AAAY,qBAAK,KAAK;AAAA,uBAC9C,QAAQ,OAAO,KAAK,SAAS;AAAY,qBAAK,KAAK;AAAA,qBACrDC,IAAG;AAAA,YAAE;AAAA,WACf;AAAA,eACI;AACL,eAAK,eAAe;AACpB,eAAK,mBAAmB;AAAA,QAC1B;AAAA,eACOA,IAAG;AAAA,MAAC;AAAA,IACd;AAAA,IACD,gBAAgB;AACd,WAAK,eAAe;AACpB,WAAK,aAAa;AAAA,IACnB;AAAA,IACD,eAAe;AACb,WAAK,eAAe;AACpB,YAAM,KAAK,KAAK,UAAU,CAAE,GAAE,UAAU;AACxC,iBAAW,MAAM;AACf,aAAK,WAAW,KAAK,UAAU,KAAK;AACpC,aAAK,mBAAmB;AAAA,MACzB,GAAE,GAAI;AAAA,IACR;AAAA,IACD,gBAAgB;AACd,UAAI,KAAK;AAAa;AACtB,YAAM,WAAW,OAAO,KAAK,gBAAgB,KAAK;AAClD,WAAK,cAAc,YAAY,MAAM;AACnC,YAAI;AACF,cAAI,KAAK;AAAc;AACvB,gBAAM,KAAK,KAAK,UAAU,CAAE,GAAE,UAAU;AACxC,eAAK,WAAW,KAAK,UAAU,KAAK;AAAA,iBAC7B,GAAG;AAAA,QAAC;AAAA,MACd,GAAE,QAAQ;AAAA,IACZ;AAAA,IACD,eAAe;AACb,UAAI;AACF,YAAI,KAAK,aAAa;AAAE,wBAAc,KAAK,WAAW;AAAG,eAAK,cAAc;AAAA,QAAK;AAAA,eAC1E,GAAG;AAAA,MAAC;AAAA,IACd;AAAA,IACD,qBAAqB;AACnB,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACpB;AAAA,IACD,sBAAsB,KAAK;AACzB,UAAI,OAAO;AACX,UAAI;AAAE,eAAO,OAAO,WAAW;AAAA,MAAc,SAAO,GAAG;AAAE,eAAO;AAAA,MAAM;AACtE,YAAM,QAAQ,KAAK,gBAAgB,UAAU;AAC7C,YAAM,MAAM,IAAI,MAAM,KAAK,EAAE,KAAK,IAAI;AACtC,UAAI,MAAM;AACR,cAAM,KAAK,OAAO,aAAa,cAAc,SAAS,cAAc,GAAG,IAAI;AAC3E,YAAI,IAAI;AACN,gBAAM,IAAI,GAAG,sBAAsB;AACnC,cAAI,KAAK,eAAe,IAAI,EAAE,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,OAAO,EAAE,OAAO,QAAQ,EAAE,OAAO;AACzF,eAAK,kBAAkB;AACvB,eAAK,iBAAiB;AAAA,QACxB;AAAA,aACK;AACL,cAAM,IAAID,cAAG,MAAC,oBAAmB,EAAG,GAAG,IAAI;AAC3C,UAAE,OAAO,GAAG,EAAE,mBAAmB;AACjC,UAAE,KAAK,SAAO;AACZ,gBAAM,KAAK,OAAO,CAAA,GAAI,CAAC;AACvB,cAAI,GAAG;AACL,gBAAI,KAAK,eAAe,IAAI,EAAE,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,OAAO,EAAE,OAAO,QAAQ,EAAE,OAAO;AACzF,iBAAK,kBAAkB;AACvB,iBAAK,iBAAiB;AAAA,UACxB;AAAA,SACD;AAAA,MACH;AAAA,IACD;AAAA,IACD,qBAAqB,WAAW;AAC9B,YAAM,MAAM,OAAO,aAAa,CAAC;AACjC,WAAK,kBAAkB;AACvB,UAAI;AACFA,4BAAI,eAAe,oBAAoB,GAAG;AAC1C,YAAI,MAAM,QAAQ,KAAK,eAAe,KAAK,KAAK,gBAAgB,QAAQ;AACtEA,wBAAAA,MAAI,eAAe,oBAAoB,KAAK,eAAe;AAAA,QAC7D;AAAA,eACO,GAAG;AAAA,MAAC;AACb,UAAI;AACFA,4BAAI,eAAe,uBAAuB,IAAI;AAC9C,cAAM,OAAO,OAAO,WAAW;AAC/B,YAAI,MAAM;AACR,cAAI,OAAO,GAAG;AACZ,kBAAM,MAAM,CAAC,cAAc,YAAY,cAAc,aAAa,WAAW;AAC7E,kBAAM,MAAM,IAAI,GAAG,KAAK;AACxBA,gCAAI,eAAe,8BAA8B,GAAG;AACpD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,qBAAqB;AAAA;AACxDA,4BAAAA,MAAI,WAAW,EAAE,KAAK,qBAAqB;AAAA,UAClD,WAAW,QAAQ,GAAG;AACpB,iBAAK,UAAU,MAAM;AAAE,mBAAK,sBAAsB,iBAAiB;AAAA,aAAG;AAAA,UACxE,WAAW,QAAQ,GAAG;AACpB,iBAAK,cAAc;AACnB,uBAAW,MAAM;AAAE,mBAAK,sBAAsB,qBAAqB;AAAA,YAAG,GAAE,GAAG;AAAA,UAC7E,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,gBAAgB;AACjEA,gCAAI,eAAe,wBAAwB,WAAW;AACtDA,0BAAAA,MAAI,WAAW,EAAE,KAAK,sBAAsB;AAAA,UAC9C,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,kBAAkB;AACnEA,gCAAI,eAAe,wBAAwB,QAAQ;AACnD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,4BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AAAA,UACrD,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,kBAAkB;AACnEA,gCAAI,eAAe,wBAAwB,KAAK;AAChD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,4BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AAAA,UACrD,WAAW,QAAQ,IAAI;AACrBA,gCAAI,eAAe,8BAA8B,kBAAkB;AACnEA,gCAAI,eAAe,wBAAwB,QAAQ;AACnD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,4BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AAAA,UACrD;AAAA,eACK;AACL,cAAI,OAAO,GAAG;AACZ,kBAAM,MAAM,CAAC,cAAc,eAAe,cAAc,cAAc;AACtE,kBAAM,MAAM,IAAI,GAAG,KAAK;AACxBA,gCAAI,eAAe,8BAA8B,GAAG;AACpD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,qBAAqB;AAAA;AACxDA,4BAAAA,MAAI,WAAW,EAAE,KAAK,qBAAqB;AAAA,UAClD,WAAW,QAAQ,GAAG;AACpB,iBAAK,UAAU,MAAM;AAAE,mBAAK,sBAAsB,iBAAiB;AAAA,aAAG;AAAA,UACxE,WAAW,QAAQ,GAAG;AACpB,iBAAK,gBAAgB;AACrB,uBAAW,MAAM;AAAE,mBAAK,sBAAsB,qBAAqB;AAAA,YAAG,GAAE,GAAG;AAAA,UAC7E,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,gBAAgB;AACjEA,gCAAI,eAAe,wBAAwB,WAAW;AACtDA,0BAAAA,MAAI,WAAW,EAAE,KAAK,sBAAsB;AAAA,UAC9C,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,kBAAkB;AACnEA,gCAAI,eAAe,wBAAwB,QAAQ;AACnD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,4BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AAAA,UACrD,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,kBAAkB;AACnEA,gCAAI,eAAe,wBAAwB,KAAK;AAChD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,4BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AAAA,UACrD,WAAW,QAAQ,GAAG;AACpBA,gCAAI,eAAe,8BAA8B,kBAAkB;AACnEA,gCAAI,eAAe,wBAAwB,QAAQ;AACnD,gBAAIA,cAAAA,MAAI;AAAWA,4BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,4BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AAAA,UACrD;AAAA,QACF;AAAA,eACO,GAAG;AAAA,MAAC;AAAA,IACd;AAAA,IACD,qBAAqB,WAAW;AAC9B,YAAM,MAAM,OAAO,aAAa,CAAC;AACjC,UAAI,MAAM;AAAG;AACb,WAAK,kBAAkB;AACvB,UAAI;AACFA,4BAAI,eAAe,oBAAoB,GAAG;AAC1CA,4BAAI,eAAe,uBAAuB,IAAI;AAAA,eACvC,GAAG;AAAA,MAAC;AACb,YAAM,OAAO,OAAO,WAAW;AAC/B,UAAI,MAAM;AACR,YAAI,OAAO,GAAG;AACZ,gBAAM,MAAM,CAAC,cAAc,YAAY,cAAc,aAAa,WAAW;AAC7E,gBAAM,MAAM,IAAI,GAAG,KAAK;AACxBA,8BAAI,eAAe,8BAA8B,GAAG;AACpD,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,qBAAqB;AAAA;AACxDA,0BAAAA,MAAI,WAAW,EAAE,KAAK,qBAAqB;AAChD;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACb,eAAK,UAAU,MAAM;AAAE,iBAAK,sBAAsB,iBAAiB;AAAA,WAAG;AACtE;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACb,eAAK,cAAc;AACnB,qBAAW,MAAM;AAAE,iBAAK,sBAAsB,qBAAqB;AAAA,UAAG,GAAE,GAAG;AAC3E;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,gBAAgB;AACjEA,wBAAAA,MAAI,WAAW,EAAE,KAAK,sBAAsB;AAC5C;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,kBAAkB;AACnE,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,0BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AACnD;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,kBAAkB;AACnE,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,0BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AACnD;AAAA,QACF;AACA,YAAI,QAAQ,IAAI;AACdA,8BAAI,eAAe,8BAA8B,kBAAkB;AACnE,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,0BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AACnD;AAAA,QACF;AAAA,aACK;AACL,YAAI,OAAO,GAAG;AACZ,gBAAM,MAAM,CAAC,cAAc,eAAe,cAAc,cAAc;AACtE,gBAAM,MAAM,IAAI,GAAG,KAAK;AACxBA,8BAAI,eAAe,8BAA8B,GAAG;AACpD,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,qBAAqB;AAAA;AACxDA,0BAAAA,MAAI,WAAW,EAAE,KAAK,qBAAqB;AAChD;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACb,eAAK,UAAU,MAAM;AAAE,iBAAK,sBAAsB,iBAAiB;AAAA,WAAG;AACtE;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACb,eAAK,gBAAgB;AACrB,qBAAW,MAAM;AAAE,iBAAK,sBAAsB,qBAAqB;AAAA,UAAG,GAAE,GAAG;AAC3E;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,gBAAgB;AACjEA,wBAAAA,MAAI,WAAW,EAAE,KAAK,sBAAsB;AAC5C;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,kBAAkB;AACnE,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,0BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AACnD;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,kBAAkB;AACnE,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,0BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AACnD;AAAA,QACF;AACA,YAAI,QAAQ,GAAG;AACbA,8BAAI,eAAe,8BAA8B,kBAAkB;AACnE,cAAIA,cAAAA,MAAI;AAAWA,0BAAG,MAAC,UAAU,EAAE,KAAK,wBAAwB;AAAA;AAC3DA,0BAAAA,MAAI,WAAW,EAAE,KAAK,uBAAqB,CAAG;AACnD;AAAA,QACF;AAAA,MACF;AAAA,IACD;AAAA,IACD,kBAAkB;AAChB,WAAK,iBAAiB;AACtB,UAAI;AACFA,sBAAG,MAAC,kBAAkB,qBAAqB;AAC3CA,sBAAG,MAAC,kBAAkB,4BAA4B;AAClDA,sBAAG,MAAC,kBAAkB,sBAAsB;AAC5CA,sBAAG,MAAC,kBAAkB,kBAAkB;AACxCA,sBAAG,MAAC,kBAAkB,kBAAkB;AACxCA,sBAAAA,MAAI,SAAS,EAAE,KAAK,qBAAqB;AAAA,eAClC,GAAG;AAAA,MAAC;AAAA,IACd;AAAA;AAAA,IAED,WAAW,SAAS;AAClB,UAAI,CAAC;AAAS;AACd,WAAK,eAAe;AACpB,YAAM,QAAQ,CAAC,MAAM,OAAO,MAAM,WAAW,EAAE,QAAQ,MAAM,EAAE,EAAE,KAAO,IAAE;AAC1EE,gCAAgB,EAAE,sBAAsB,SAAS,EAC9C,KAAK,CAAC,QAAQ;AACb,YAAI,OAAO,IAAI,WAAW,IAAI,QAAQ,SAAS,IAAI;AAAGF,wBAAAA,MAAI,UAAU,EAAE,OAAO,IAAI,SAAS,MAAM,QAAQ;AACxG,cAAM,WAAY,OAAO,IAAI,QAAQ,MAAM,QAAQ,IAAI,KAAK,QAAQ,IAAK,IAAI,KAAK,WAAY,MAAM,QAAQ,2BAAK,QAAQ,IAAI,IAAI,WAAW;AAC5I,aAAK,SAAS,YAAY,CAAA,GAAI,IAAI,CAAC,QAAQ;AAAA,UACzC,YAAY,GAAG,cAAc;AAAA,UAC7B,MAAM,GAAG,QAAQ;AAAA,UACjB,MAAM,GAAG,QAAQ;AAAA,UACjB,aAAa,GAAG,eAAe;AAAA,UAC/B,OAAO,OAAO,GAAG,SAAS,CAAC,KAAK;AAAA,UAChC,gBAAgB,OAAO,GAAG,kBAAkB,CAAC,KAAK;AAAA,UAClD,WAAW,MAAM,GAAG,SAAS,KAAK;AAAA,UAClC,WAAW,GAAG,aAAa;AAAA,UAC3B,YAAY,GAAG,cAAc;AAAA,UAC7B,eAAe,GAAG,iBAAiB;AAAA,UACnC,cAAc,GAAG,gBAAgB,GAAG,QAAQ;AAAA,QAC9C,EAAE;AAAA,OACH,EACA,MAAM,MAAM;AAAE,aAAK,QAAQ,CAAC;AAAA,MAAA,CAAG,EAC/B,QAAQ,MAAM;AACb,aAAK,eAAe;AACpB,cAAM,MAAM,KAAK,yBAAyB;AAC1C,aAAK,oBAAoB;AAAA,OAC1B;AAAA,IACJ;AAAA,IACD,WAAW,OAAO;AAChB,UAAI,KAAK,sBAAsB;AAAO;AACtC,WAAK,oBAAoB;AAAA,IAC1B;AAAA,IACD,eAAe,IAAI;AACjB,UAAI;AACF,cAAM,IAAI,QAAO,yBAAI,iBAAgB,EAAE,EAAE,YAAY;AACrD,YAAI,MAAM,cAAc,OAAO,yBAAI,SAAS,MAAM;AAAG,iBAAO;AAC5D,eAAO;AAAA,MACT,SAAS,GAAG;AAAE,eAAO;AAAA,MAAM;AAAA,IAC5B;AAAA,IACD,YAAY,IAAI,GAAG;AACjB,UAAI,KAAK,eAAe,EAAE;AAAG;AAC7B,WAAK,WAAW,CAAC;AAAA,IAClB;AAAA,IACD,2BAA2B;AACzB,UAAI;AACF,cAAM,MAAM,MAAM,QAAQ,KAAK,KAAK,IAAI,KAAK,QAAQ,CAAC;AACtD,iBAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,cAAI,CAAC,KAAK,eAAe,IAAI,CAAC,CAAC;AAAG,mBAAO;AAAA,QAC3C;AACA,eAAO;AAAA,MACT,SAAS,GAAG;AAAE,eAAO;AAAA,MAAG;AAAA,IACzB;AAAA,IACD,sBAAsB;AACpB,UAAI;AACF,cAAM,OAAO,KAAK,UAAU,CAAE,GAAE,OAAO,OAAK,CAAC,KAAK,QAAQ,CAAC,CAAC;AAC5D,cAAM,MAAM,KAAK;AACjB,cAAM,MAAM,IAAI,UAAU,OAAK,MAAM,GAAG;AACxC,cAAM,UAAU,OAAO,IAAI,IAAI,GAAG,IAAK,IAAI,CAAC,KAAK;AACjD,YAAI,CAAC;AAAS;AACdA,4BAAI,aAAa,EAAE,MAAM,IAAI,SAAS,MAAM,CAAC,OAAO,GAAG,SAAS;AAAA,eACzD,GAAG;AAAA,MAAC;AAAA,IACd;AAAA,IACD,mBAAmB,KAAK;;AACtB,UAAI;AACF,cAAM,SAAO,UAAK,YAAL,mBAAc,mBAAkB,IAAI,OAAO,OAAK,OAAO,MAAM,QAAQ;AAClF,cAAM,UAAU,IAAI,SAAS,GAAG,IAAI,MAAO,IAAI,CAAC,KAAK;AACrD,YAAI,CAAC;AAAS;AACdA,4BAAI,aAAa,EAAE,MAAM,IAAI,SAAS,MAAM,CAAC,OAAO,GAAG,SAAS;AAAA,eACzD,GAAG;AAAA,MAAC;AAAA,IACd;AAAA,IACD,eAAe,MAAM;AACnB,UAAI;AACF,YAAI,KAAK,QAAQ,IAAI;AAAG;AACxB,cAAM,OAAO,KAAK,UAAU,CAAE,GAAE,OAAO,OAAK,CAAC,KAAK,QAAQ,CAAC,CAAC;AAC5D,cAAM,UAAU,IAAI,SAAS,IAAI,IAAI,OAAQ,IAAI,CAAC,KAAK;AACvD,YAAI,CAAC;AAAS;AACdA,4BAAI,aAAa,EAAE,MAAM,IAAI,SAAS,MAAM,CAAC,OAAO,GAAG,SAAS;AAAA,eACzD,GAAG;AAAA,MAAC;AAAA,IACd;AAAA,IACD,iBAAiB;AACf,UAAI;AACF,cAAM,IAAIA,cAAG,MAAC,eAAe,MAAM,KAAK;AACxC,cAAM,MAAMA,cAAG,MAAC,eAAe,kBAAkB,KAAK;AACtD,cAAM,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,IAAI;AACxC,YAAI;AAAI,iBAAO;AACf,aAAK,iBAAiB;AACtB,eAAO;AAAA,MACT,SAAS,GAAG;AAAE,eAAO;AAAA,MAAM;AAAA,IAC5B;AAAA,IACD,kBAAkB;AAAE,WAAK,iBAAiB;AAAA,IAAO;AAAA,IACjD,UAAU;AAAE,WAAK,iBAAiB;AAAOA,0BAAI,WAAW,EAAE,KAAK,qBAAqB,CAAC;AAAA,IAAG;AAAA,IACxF,YAAY;;AACV,UAAI,CAAC,KAAK,eAAc;AAAI;AAC5B,YAAM,OAAQ,KAAK,qBAAqB,KAAK,KAAK,MAAM,KAAK,iBAAiB,IAAK,KAAK,MAAM,KAAK,iBAAiB,IAAI;AACxH,YAAM,MAAM,OAAO,KAAK,eAAc,UAAK,YAAL,mBAAc,OAAM;AAC1DG,gBAAAA,YAAY,EAAE,YAAY,KAAK,UAAU,GAAG,EACzC,KAAK,CAAC,QAAQ;;AACb,YAAI,OAAO,IAAI;AAASH,8BAAI,UAAU,EAAE,OAAO,UAAU,MAAM,WAAW;AAAA,aACrE;AACH,gBAAM,MAAM,QAAO,2BAAK,UAAS,WAAW,IAAI,SAAQI,MAAA,2BAAK,SAAL,gBAAAA,IAAW,WAAU;AAC7E,gBAAM,MAAM,QAAO,2BAAK,YAAW;AACnCJ,wBAAG,MAAC,UAAU,EAAE,OAAO,KAAK,MAAM,QAAQ;AAAA,QAC5C;AAAA,OACD,EACA,MAAM,MAAM;AAAEA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAQ,CAAA;AAAA,OAAG;AAAA,IACrE;AAAA,IACD,SAAS;AAAE,WAAK,MAAM,KAAK,IAAI,GAAG,OAAO,KAAK,OAAO,CAAC,IAAI,CAAC;AAAA,IAAG;AAAA,IAC9D,SAAS;AAAE,WAAK,MAAM,KAAK,IAAI,GAAG,OAAO,KAAK,OAAO,CAAC,IAAI,CAAC;AAAA,IAAG;AAAA,IAC9D,eAAe;AACb,YAAM,IAAI,OAAO,KAAK,GAAG;AACzB,WAAK,MAAM,MAAM,CAAC,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,MAAM,CAAC,CAAC;AAAA,IACpD;AAAA,IACD,mBAAmB;;AACjB,UAAI,CAAC,KAAK,eAAc;AAAI;AAC5B,YAAM,UAAU,KAAK,YAAY,IAAI,KAAK;AAC1C,UAAI,CAAC,QAAQ;AAAEA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAAG;AAAA,MAAO;AACzE,YAAM,aAAa,KAAK,cAAc,IAAI,QAAQ,YAAY,EAAE;AAChE,YAAM,YAAY,YAAY,OAAO,SAAS,IAAI;AAClD,YAAM,aAAa,KAAK,gBAAgB,KAAK,aAAa,eAAe;AACzE,UAAI,eAAe,CAAC,aAAa,OAAO,SAAS,KAAK,IAAI;AACxDA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,QAAQ;AAC9C;AAAA,MACF;AACA,UAAI,CAAC,KAAK,OAAO,KAAK,OAAO,GAAG;AAC9BA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,QAAQ;AAC9C;AAAA,MACF;AAEA,YAAM,OAAQ,KAAK,qBAAqB,KAAK,KAAK,MAAM,KAAK,iBAAiB,IAAK,KAAK,MAAM,KAAK,iBAAiB,IAAI;AACxH,UAAI,QAAQ,KAAK,iBAAiB,WAAW;AAC3C,cAAM,MAAM,WAAW,KAAK,aAAa;AACzC,YAAI,CAAC,MAAM,GAAG,KAAK,YAAY,KAAK;AAClCA,wBAAAA,MAAI,UAAU,EAAE,OAAO,MAAM,SAAS,YAAY,KAAK,eAAe,YAAY,OAAO;AACzF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,MAAM,OAAO,KAAK,eAAc,UAAK,YAAL,mBAAc,OAAM;AAC1D,YAAM,IAAI,KAAK,IAAI,GAAG,OAAO,KAAK,OAAO,CAAC,CAAC;AAC3CG,4BAAY,EAAE,SAAS,KAAK,QAAQ,YAAY,KAAK,QAAQ,WAAW,UAAU,GAAG,OAAO,KAAK,YAAY,IAAI,MAAM,KAAK,eAAe,IAAI,EAC5I,KAAK,CAAC,QAAQ;;AACb,YAAI,OAAO,IAAI;AAASH,wBAAAA,MAAI,UAAU,EAAE,OAAO,SAAS,MAAM,IAAI,MAAM,WAAW;AAAA,aAC9E;AACH,gBAAM,MAAM,QAAO,2BAAK,UAAS,WAAW,IAAI,SAAQI,MAAA,2BAAK,SAAL,gBAAAA,IAAW,WAAU;AAC7E,gBAAM,MAAM,QAAO,2BAAK,YAAW;AACnCJ,wBAAG,MAAC,UAAU,EAAE,OAAO,KAAK,MAAM,QAAQ;AAAA,QAC5C;AAAA,OACD,EACA,MAAM,MAAM;AAAEA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAQ,CAAA;AAAA,OAAG;AAAA,IACrE;AAAA,IACD,SAAS;;AACP,UAAI,CAAC,KAAK,eAAc;AAAI;AAC5B,UAAI;AACF,cAAM,OAAO,KAAK;AAClB,cAAM,MAAM,OAAQ,KAAK,gBAAc,UAAK,YAAL,mBAAc,OAAM,OAAO,UAAK,YAAL,mBAAc,OAAM;AACtF,cAAM,WAAS,UAAK,oBAAL,mBAAsB,OAAM;AAC3C,cAAM,YAAY,KAAK,YAAY,IAAI,KAAK;AAC5C,YAAI,CAAC,UAAU;AACbA,wBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C;AAAA,QACF;AACA,cAAM,aAAa,QAAQ,KAAK,eAAe;AAC/C,cAAM,UAAU,KAAK,cAAc,IAAI,QAAQ,YAAY,EAAE;AAC7D,cAAM,SAAS,SAAS,OAAO,MAAM,IAAI;AACzC,YAAI,eAAe,CAAC,UAAU,UAAU,IAAI;AAC1CA,wBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,QAAQ;AAC9C;AAAA,QACF;AACA,YAAI,CAAC,QAAQ;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,QAAQ;AACjD;AAAA,QACF;AACA,cAAM,SAAS,KAAK,UAAU;AAC9B,cAAM,MAAM,KAAK,OAAO;AACxB,cAAM,OAAO,KAAK,eAAe;AACjC,cAAM,YAAY,CAAC,aAAa,KAAK;AAErC,cAAM,IAAIA,cAAG,MAAC,eAAe,MAAM,KAAK;AACxC,cAAM,QAAS,MAAM,EAAE,SAAU,EAAE,QAAQ,EAAE,KAAK,UAAY;AAE9DA,sBAAAA,MAAI,YAAY,EAAE,OAAO,MAAI,CAAG;AAChCK,kBAAAA,kBAAkB,EAAE,YAAY,KAAK,YAAY,QAAQ,MAAM,QAAQ,WAAW,UAAU,KAAK,SAAS,QAAQ,MAAI,CAAG,EACtH,KAAK,CAAC,SAAS;;AACdL,wBAAAA,MAAI,YAAY;AAChB,cAAI,QAAQ,KAAK,SAAS;AACxBA,0BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,WAAW;AAChD,kBAAM,UAAW,QAAQ,KAAK,SAAS,KAAK,KAAK,YAAY,KAAK,KAAK,OAAQ;AAC/E,gBAAI,SAAS;AAAEA,4BAAAA,MAAI,WAAW,EAAE,KAAK,2BAA2B,QAAM,CAAG;AAAA,YAAE;AAAA,iBACtE;AACL,kBAAM,MAAM,QAAO,6BAAM,UAAS,WAAW,KAAK,SAAQI,MAAA,6BAAM,SAAN,gBAAAA,IAAY,WAAU;AAChF,kBAAM,MAAM,OAAQ,QAAQ,KAAK,WAAY;AAC7CJ,0BAAG,MAAC,UAAU,EAAE,OAAO,KAAK,MAAM,QAAQ;AAAA,UAC5C;AAAA,SACD,EACA,MAAM,MAAM;AAAEA,wBAAAA,MAAI,YAAW;AAAIA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAO,CAAC;AAAA,SAAG;AAAA,eAC7E,GAAG;AAAEA,sBAAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAO,CAAC;AAAA,MAAE;AAAA,IAC9D;AAAA;AAAA,IAED,gBAAgB;;AACd,WAAK,UAAU;AACf,YAAM,QAAM,UAAK,YAAL,mBAAc,OAAM;AAChC,WAAK,WAAW,GAAG;AACnB,WAAK,aAAa;AAAA,IACnB;AAAA,IACD,iBAAiB;AAAE,WAAK,UAAU;AAAO,WAAK,aAAa;AAAA,IAAO;AAAA;AAAA,IAElE,gBAAgB;AACd,WAAK,mBAAmB;AACxB,WAAK,sBAAsB;AAC3B,WAAK,WAAW;AAAA,IACjB;AAAA,IACD,iBAAiB;AAAE,WAAK,sBAAsB;AAAA,IAAO;AAAA,IACrD,qBAAqB;AACnB,WAAK,mBAAmB;AACxB,WAAK,sBAAsB;AAC3B,WAAK,cAAc;AAAA,IACpB;AAAA,IAED,aAAa;AACXM,yBAAS,EACN,KAAK,CAAC,QAAQ;;AACb,cAAM,MAAM,MAAM,SAAQ,gCAAK,SAAL,mBAAW,KAAK,IAAI,IAAI,KAAK,QAClD,MAAM,QAAQ,2BAAK,KAAK,IAAI,IAAI,QAC9B,MAAM,SAAQ,gCAAK,SAAL,mBAAW,QAAQ,IAAI,IAAI,KAAK,WAC5C,MAAM,SAAQ,gCAAK,SAAL,mBAAW,IAAI,IAAI,IAAI,KAAK,OACxC,MAAM,QAAQ,2BAAK,IAAI,IAAI,IAAI,OAAO;AACjD,aAAK,YAAY,OAAO,CAAE,GAAE,IAAI,CAAC,OAAQ,OAAO,OAAO,WAAY,EAAE,IAAI,IAAI,MAAM,OAAO,EAAE,KAAK,yBAAI,QAAM,yBAAI,YAAW,IAAK,OAAO,yBAAI,UAAQ,yBAAI,cAAa,IAAK;AACxK,aAAK,YAAY,KAAK,SAAS,IAAI,QAAM,GAAG,IAAI,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAAA,OACpE,EACA,MAAM,MAAM;AAAE,aAAK,YAAY,CAAC;AAAA,MAAA,CAAG;AAAA,IACvC;AAAA,IAED,gBAAgB;AACdC,6BAAc,EAAC,KAAK,SAAO;;AACzB,cAAM,MAAM,MAAM,SAAQ,gCAAK,SAAL,mBAAW,KAAK,IAAI,IAAI,KAAK,QAAS,MAAM,QAAQ,2BAAK,KAAK,IAAI,IAAI,QAAQ;AACxG,aAAK,YAAY,IAAI,IAAI,QAAM;AAAA,UAC7B,IAAI,EAAE,gBAAgB,EAAE,MAAM;AAAA,UAC9B,UAAU,EAAE,YAAY;AAAA,UACxB,OAAO,EAAE,SAAS;AAAA,UAClB,UAAU,EAAE,YAAY;AAAA,UACxB,MAAM,EAAE,QAAQ;AAAA,UAChB,UAAU,EAAE,YAAY;AAAA,UACxB,gBAAgB,EAAE,kBAAkB;AAAA,UACpC,YAAY,EAAE,eAAe;AAAA,QAC/B,EAAE;AACF,cAAM,SAASP,cAAG,MAAC,eAAe,qBAAqB,KAAK;AAC5D,YAAI,OAAO,KAAK,UAAU,KAAK,OAAK,EAAE,OAAO,MAAM,KAAK,KAAK,UAAU,KAAK,OAAK,EAAE,UAAU,KAAK,KAAK,UAAU,CAAC;AAClH,aAAK,kBAAkB,QAAQ;AAC/B,YAAI,KAAK,qBAAqB,UAAU,KAAK,uBAAuB,KAAK,UAAU,WAAW,GAAG;AAC/F,cAAI;AAAEA,0BAAG,MAAC,UAAU,EAAE,OAAO,eAAe,MAAM,OAAQ,CAAA;AAAA,mBAAW,GAAG;AAAA,UAAE;AAAA,QAC5E;AAAA,OACD,EAAE,MAAM,MAAM;AAAE,aAAK,YAAY,CAAE;AAAE,aAAK,kBAAkB;AAAA,OAAM;AAAA,IACpE;AAAA,IAED,aAAa,MAAM;AACjB,UAAI,KAAK,qBAAqB,QAAQ;AACpC,YAAI,QAAQ,KAAK,KAAK;AACpB,eAAK,kBAAkB,KAAK;AAC5B,cAAI;AAAEA,0BAAAA,MAAI,eAAe,uBAAuB,KAAK,gBAAgB,EAAE;AAAA,UAAA,SAAW,GAAG;AAAA,UAAE;AAAA,QACzF;AAAA,MACF,WAAW,KAAK,qBAAqB,MAAM;AACzC,aAAK,SAAS,KAAK;AAAA,aACd;AACL,aAAK,WAAW,KAAK;AACrB,aAAK,SAAS,KAAK;AAAA,MACrB;AACA,WAAK,sBAAsB;AAAA,IAC5B;AAAA,IAED,aAAa,MAAM;AACjB,UAAI,CAAC;AAAM;AACXQ,gBAAU,WAAC,EAAE,MAAM,EAChB,KAAK,CAAC,QAAQ;AACbR,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,WAAW;AACjD,cAAM,MAAO,OAAO,IAAI,SAAS,IAAI,KAAK,WAAW,IAAI,KAAK,OAAS,QAAQ,IAAI,WAAW,IAAI,OAAQ;AAC1G,YAAI,KAAK,qBAAqB,MAAM;AAClC,eAAK,SAAS;AACd,cAAI,KAAK;AACP,kBAAM,SAAS,KAAK,YAAY,CAAA,GAAI,KAAK,OAAK,EAAE,OAAO,GAAG;AAC1D,gBAAI,CAAC;AAAO,mBAAK,WAAW,CAAC,EAAE,IAAI,KAAK,KAAG,GAAK,GAAG,KAAK,QAAQ;AAAA,UAClE;AAAA,eACK;AACL,eAAK,WAAW;AAChB,eAAK,SAAS,OAAO,KAAK;AAC1B,cAAI,KAAK;AACP,kBAAM,SAAS,KAAK,YAAY,CAAA,GAAI,KAAK,OAAK,EAAE,OAAO,GAAG;AAC1D,gBAAI,CAAC;AAAO,mBAAK,WAAW,CAAC,EAAE,IAAI,KAAK,KAAG,GAAK,GAAG,KAAK,QAAQ;AAAA,UAClE;AAAA,QACF;AACA,aAAK,sBAAsB;AAC3B,YAAI,CAAC;AAAK,eAAK,WAAW;AAAA,OAC3B,EACA,MAAM,MAAM;AACXA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAA,OAChD;AAAA,IACJ;AAAA,IAED,gBAAgB,SAAS;AACvB,YAAM,IAAIA,cAAAA,MAAI,eAAe,MAAM;AACnC,YAAM,QAAS,MAAM,EAAE,SAAU,EAAE,QAAQ,EAAE,KAAK,UAAY;AAC9D,YAAM,OAAO,EAAE,UAAU,QAAQ,UAAU,OAAO,QAAQ,OAAO,UAAU,QAAQ,UAAU,MAAM,QAAQ,MAAM,UAAU,QAAQ,UAAU,gBAAgB,QAAQ,gBAAgB,YAAY,QAAQ,WAAW;AACpNS,gBAAU,WAAC,EAAE,GAAG,MAAM,MAAM,CAAC,EAAE,KAAK,SAAO;;AACzC,YAAI,OAAO,IAAI,SAAS;AACtB,gBAAM,KAAM,OAAO,IAAI,SAAS,IAAI,KAAK,gBAAgB,IAAI,KAAK,OAAQ;AAC1E,gBAAM,OAAO,EAAE,IAAI,UAAU,KAAK,UAAU,OAAO,KAAK,OAAO,UAAU,KAAK,UAAU,MAAM,KAAK,MAAM,UAAU,KAAK,UAAU,gBAAgB,KAAK,gBAAgB,YAAY,KAAK,eAAe,EAAE;AACzM,eAAK,YAAY,CAAC,MAAM,GAAG,KAAK,SAAS;AACzC,eAAK,kBAAkB;AACvB,cAAI;AAAET,0BAAG,MAAC,eAAe,uBAAuB,EAAE;AAAA,UAAE,SAAS,GAAG;AAAA,UAAE;AAClEA,wBAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAC/C,eAAK,sBAAsB;AAAA,eACtB;AACL,gBAAM,MAAM,QAAO,2BAAK,UAAS,WAAW,IAAI,SAAQ,gCAAK,SAAL,mBAAW,WAAU;AAC7E,gBAAM,MAAM,OAAQ,OAAO,IAAI,WAAY;AAC3CA,wBAAG,MAAC,UAAU,EAAE,OAAO,KAAK,MAAM,QAAQ;AAAA,QAC5C;AAAA,OACD,EAAE,MAAM,MAAM;AACbA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAA,OAC9C;AAAA,IACF;AAAA,IAED,oBAAoB;;AAClB,YAAM,aAAa,KAAK,gBAAgB,KAAK,aAAa,eAAe;AACzE,UAAI,CAAC,KAAK,UAAW,cAAc,CAAC,KAAK,YAAa,CAAC,KAAK,OAAO;AACjEA,sBAAG,MAAC,UAAU,EAAE,OAAO,gBAAgB,MAAM,QAAQ;AACrD;AAAA,MACF;AACA,YAAM,UAAU,KAAK,UAAU,IAAI,KAAK;AACxC,YAAM,SAAS,KAAK,YAAY,CAAA,GAAI,KAAK,QAAM,GAAG,SAAS,MAAM;AACjE,YAAM,MAAM,QAAQ,MAAM,KAAK;AAE/B,YAAM,aAAa,KAAK,YAAY,IAAI,QAAQ,YAAY,EAAE;AAC9D,YAAM,YAAY,YAAY,OAAO,SAAS,IAAI;AAClD,YAAM,OAAQ,KAAK,qBAAqB,KAAK,KAAK,MAAM,KAAK,iBAAiB,IAAK,KAAK,MAAM,KAAK,iBAAiB,IAAI;AAExH,UAAI,QAAQ,KAAK,iBAAiB,WAAW;AAC3C,cAAM,MAAM,WAAW,KAAK,aAAa;AACzC,YAAI,CAAC,MAAM,GAAG,KAAK,YAAY,KAAK;AAClCA,wBAAAA,MAAI,UAAU,EAAE,OAAO,MAAM,SAAS,YAAY,KAAK,eAAe,YAAY,OAAO;AACzF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,MAAM,OAAO,KAAK,eAAc,UAAK,YAAL,mBAAc,OAAM;AAC1D,YAAM,KAAK,KAAK,IAAI,GAAG,OAAO,KAAK,SAAS,CAAC,CAAC;AAC9CG,gBAAW,YAAC,EAAE,SAAS,KAAK,YAAY,KAAK,QAAQ,WAAW,UAAU,IAAI,OAAO,KAAK,UAAU,IAAI,MAAM,KAAK,eAAe,IAAI,EACnI,KAAK,CAAC,QAAQ;;AACb,YAAI,OAAO,IAAI,SAAS;AACtB,eAAK,UAAU;AACfH,8BAAI,UAAU,EAAE,OAAO,SAAS,MAAM,IAAI,MAAM,WAAW;AAAA,eACtD;AACL,gBAAM,MAAM,QAAO,2BAAK,UAAS,WAAW,IAAI,SAAQI,MAAA,2BAAK,SAAL,gBAAAA,IAAW,WAAU;AAC7E,gBAAM,MAAM,QAAO,2BAAK,YAAW;AACnCJ,wBAAG,MAAC,UAAU,EAAE,OAAO,KAAK,MAAM,QAAQ;AAAA,QAC5C;AAAA,OACD,EACA,MAAM,MAAM;AAAEA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAQ,CAAA;AAAA,OAAG;AAAA,IACrE;AAAA,IACD,iBAAiB;AACf,YAAM,IAAI,OAAO,KAAK,KAAK;AAC3B,WAAK,QAAQ,MAAM,CAAC,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,MAAM,CAAC,CAAC;AAAA,IACtD;AAAA;AAAA,IAED,kBAAkB;AAChB,WAAK,mBAAmB;AACxB,WAAK,sBAAsB;AAC3B,WAAK,WAAW;AAAA,IACjB;AAAA,IACD,qBAAqB;AACnB,WAAK,mBAAmB;AACxB,WAAK,sBAAsB;AAC3B,WAAK,cAAc;AAAA,IACpB;AAAA,IACD,mBAAmB;AAAE,WAAK,sBAAsB;AAAO,WAAK,aAAa;AAAA,IAAO;AAAA,IAChF,sBAAsB,KAAK;AACzB,UAAI;AACF,YAAI,QAAQ,OAAO,QAAQ;AAAK,iBAAO;AACvC,cAAM,IAAI,OAAO,GAAG;AACpB,YAAI,MAAM,CAAC;AAAG,iBAAO;AACrB,eAAO,MAAM,EAAE,QAAQ,CAAC;AAAA,MAC1B,SAAS,GAAG;AAAE,eAAO;AAAA,MAAI;AAAA,IAC1B;AAAA,IACD,iBAAiB,IAAI;AACnB,UAAI,CAAC;AAAI,eAAO;AAChB,YAAM,OAAO,OAAO,GAAG,SAAS,CAAC,KAAK;AACtC,UAAI,GAAG,eAAe;AAAG,eAAO;AAChC,YAAM,OAAO,OAAO,GAAG,iBAAiB,EAAE,EAAE,YAAY;AACxD,YAAM,OAAO,KAAK,gBAAgB,GAAG,eAAe,GAAG,MAAM,IAAI;AACjE,YAAM,OAAO,KAAK,eAAe,IAAI;AACrC,aAAO,OAAO;AAAA,IACf;AAAA,IACD,gBAAgB,MAAM,MAAM;AAC1B,YAAM,IAAI,OAAO,QAAQ,EAAE,EAAE,YAAY;AACzC,YAAM,IAAI,OAAO,QAAQ,EAAE,EAAE,YAAY;AACzC,UAAI,EAAE,SAAS,IAAI,KAAK,yBAAyB,KAAK,CAAC;AAAG,eAAO;AACjE,UAAI,EAAE,SAAS,IAAI,KAAK,yBAAyB,KAAK,CAAC;AAAG,eAAO;AACjE,UAAI,EAAE,SAAS,IAAI,KAAK,yBAAyB,KAAK,CAAC;AAAG,eAAO;AACjE,UAAI,EAAE,SAAS,GAAG,KAAK,wBAAwB,KAAK,CAAC;AAAG,eAAO;AAC/D,aAAO;AAAA,IACR;AAAA,IACD,eAAe,MAAM;AACnB,UAAI,SAAS;AAAM,eAAO;AAC1B,UAAI,SAAS;AAAM,eAAO;AAC1B,UAAI,SAAS;AAAM,eAAO;AAC1B,aAAO;AAAA,IACR;AAAA,IACD,SAAS,KAAK,MAAM;AAClB,YAAM,IAAI,QAAQ;AAClB,UAAI,MAAM;AAAM,eAAO,OAAO,GAAG,IAAI;AACrC,UAAI,MAAM;AAAM,eAAO,OAAO,GAAG,IAAI;AACrC,UAAI,MAAM;AAAM,eAAO,OAAO,GAAG,IAAI;AACrC,aAAO,OAAO,GAAG;AAAA,IAClB;AAAA,IACD,aAAa;;AACX,UAAI;AACF,cAAM,QAAM,UAAK,YAAL,mBAAc,OAAM;AAChC,cAAM,IAAIA,cAAG,MAAC,eAAe,MAAM,KAAK;AACxC,cAAM,QAAS,MAAM,EAAE,SAAU,EAAE,QAAQ,EAAE,KAAK,UAAY;AAC9D,YAAI,CAAC,KAAK;AAAEA,wBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAG;AAAA,QAAO;AACrE,YAAI,CAAC,OAAO;AAAEA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAG;AAAA,QAAO;AACrE,YAAI,CAAC,KAAK,YAAY;AACpBU,oBAAW,YAAC,EAAE,YAAY,KAAK,MAAI,CAAG,EAAE,KAAK,CAAC,QAAQ;AACpD,gBAAI,OAAO,IAAI,SAAS;AAAE,mBAAK,aAAa;AAAMV,4BAAAA,MAAI,UAAU,EAAE,OAAO,OAAO,MAAM,UAAQ,CAAG;AAAA,YAAE,OAC9F;AAAEA,4BAAG,MAAC,UAAU,EAAE,QAAO,2BAAK,YAAW,QAAQ,MAAM,OAAO,CAAC;AAAA,YAAE;AAAA,UACvE,CAAA,EAAE,MAAM,MAAM;AAAEA,0BAAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAAA,UAAA,CAAG;AAAA,eAC5D;AACLW,oBAAc,eAAC,EAAE,YAAY,KAAK,MAAI,CAAG,EAAE,KAAK,CAAC,QAAQ;AACvD,gBAAI,OAAO,IAAI,SAAS;AAAE,mBAAK,aAAa;AAAOX,4BAAAA,MAAI,UAAU,EAAE,OAAO,SAAS,MAAM,UAAQ,CAAG;AAAA,YAAE,OACjG;AAAEA,4BAAG,MAAC,UAAU,EAAE,QAAO,2BAAK,YAAW,QAAQ,MAAM,OAAO,CAAC;AAAA,YAAE;AAAA,UACvE,CAAA,EAAE,MAAM,MAAM;AAAEA,0BAAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAAA,UAAA,CAAG;AAAA,QACnE;AAAA,eACO,GAAG;AAAEA,sBAAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAO,CAAC;AAAA,MAAE;AAAA,IAC/D;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtzCA,GAAG,WAAW,eAAe;"}