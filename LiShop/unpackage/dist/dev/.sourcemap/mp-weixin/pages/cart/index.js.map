{"version":3,"file":"index.js","sources":["pages/cart/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2FydC9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <Skeleton :loading=\"loading\" :showTitle=\"true\" />\r\n    <!-- #ifdef MP-WEIXIN -->\r\n    <image class=\"page-bg\" src=\"/static/product_detail_background.jpg\" mode=\"aspectFill\" />\r\n    <!-- #endif -->\r\n    <!-- #ifdef H5 -->\r\n    <view class=\"cart-grid\">\r\n      <view class=\"cart-main\">\r\n        <view class=\"toolbar\">\r\n          <text class=\"review-title\">è´­ç‰©è½¦</text>\r\n          <view class=\"tool-right\">\r\n            <view class=\"chk all btn-style\" @click=\"toggleAll\">\r\n              <view class=\"chk-ico\" :class=\"{ on: isAllSelected }\"></view>\r\n              <text class=\"chk-txt\">{{ isAllSelected ? 'å–æ¶ˆå…¨é€‰' : 'é€‰æ‹©å…¨éƒ¨' }}</text>\r\n            </view>\r\n            <view class=\"chk btn-style\" @click=\"removeSelected\">\r\n              <text class=\"chk-txt\">åˆ é™¤ğŸ—‘ï¸</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <view v-if=\"cart.length\" class=\"list h5\">\r\n          <view class=\"group\" v-for=\"(grp, gi) in groups\" :key=\"grp.name\">\r\n            <view class=\"group-header\">\r\n              <!-- <text class=\"store-icon\">ğŸ </text> -->\r\n              <text class=\"room\">{{ grp.name }}</text>\r\n              <!-- <text class=\"arrow\">></text> -->\r\n            </view>\r\n            <view class=\"item h5-row\" v-for=\"it in grp.items\" :key=\"it.id\" :class=\"{ 'out-of-stock': it.isOutOfStock }\">\r\n              <view class=\"out-stock-mask\" v-if=\"it.isOutOfStock\"></view>\r\n              <view class=\"chk\" @click=\"toggleById(it.id)\">\r\n                <view class=\"chk-ico\" :class=\"{ on: it.selected, disabled: it.isOutOfStock }\"></view>\r\n              </view>\r\n              <image class=\"cover\" :src=\"it.image || '/static/logo.png'\" mode=\"aspectFill\" @click=\"openDetail(it)\" />\r\n              <text class=\"title\" @click=\"openDetail(it)\">{{ it.title }}</text>\r\n              <text class=\"attr-txt\">{{ it.attr }}</text>\r\n              <text class=\"price\">Â¥{{ it.price.toFixed(2) }}</text>\r\n              <view class=\"qty-box\">\r\n                  <view class=\"qty-btn\" @click.stop=\"decById(it.id)\">-</view>\r\n                  <text class=\"qty-num\">{{ it.quantity }}</text>\r\n                  <view class=\"qty-btn\" @click.stop=\"incById(it.id)\">+</view>\r\n              </view>\r\n              <text class=\"del-btn\" v-if=\"it.isOutOfStock\" @click.stop=\"removeById(it.id)\">åˆ é™¤</text>\r\n              <view class=\"stock-tip\" v-if=\"it.isOutOfStock\">æ— è´§</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view v-else class=\"empty\">è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ~</view>\r\n      </view>\r\n\r\n      <view class=\"cart-aside\">\r\n        <view class=\"summary-card\">\r\n          <view class=\"sum-title\">è®¢å•è¯¦æƒ…</view>\r\n          \r\n          <view class=\"addr-section\">\r\n            <view class=\"addr-label\">æ”¶è´§åœ°å€</view>\r\n            <view v-if=\"selectedAddress\" class=\"addr-content\">\r\n              <view class=\"addr-top-row\">\r\n                <text class=\"addr-name\">{{ selectedAddress.receiver }} {{ selectedAddress.phone }}</text>\r\n                <button size=\"mini\" class=\"btn-select-addr\" @click=\"openAddressPicker\">é€‰æ‹©åœ°å€</button>\r\n              </view>\r\n              <text class=\"addr-detail\">{{ selectedAddress.full }}</text>\r\n            </view>\r\n            <view v-else class=\"addr-empty\">\r\n               <text>è¯·é€‰æ‹©æ”¶è´§åœ°å€</text>\r\n               <button size=\"mini\" class=\"btn-select-addr\" @click=\"openAddressPicker\">é€‰æ‹©åœ°å€</button>\r\n            </view>\r\n          </view>\r\n          <view class=\"note-section\" style=\"margin-top: 20rpx;\">\r\n            <view class=\"note-label\" style=\"font-size: 24rpx; color: #434343; font-weight: 600;\">è®¢å•å¤‡æ³¨</view>\r\n            <input v-model=\"orderNote\" placeholder=\"å¡«å†™è®¢å•å¤‡æ³¨ä¿¡æ¯\" style=\"width: 95%; padding: 12rpx; border: 1rpx solid #eee; border-radius: 8rpx; margin-top: 8rpx;\" />\r\n          </view>\r\n\r\n          <view v-if=\"selectedCount > 0\" class=\"sum-body\">\r\n            <view class=\"thumbs\">\r\n              <image v-for=\"(src, i) in selectedThumbs\" :key=\"i\" :src=\"src\" class=\"thumb\" mode=\"aspectFill\" />\r\n            </view>\r\n            <view class=\"rows\">\r\n              <view class=\"row\">\r\n                <text class=\"label\">å•†å“æ€»ä»·</text>\r\n                <text class=\"value\">Â¥{{ selectedTotal.toFixed(2) }}</text>\r\n              </view>\r\n              <view class=\"row\">\r\n                <text class=\"label\">å…±å‡</text>\r\n                <text class=\"value reduce\">å‡ Â¥{{ totalReduce.toFixed(2) }}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"row total\">\r\n              <text class=\"label\">åˆè®¡</text>\r\n              <view class=\"total-box\">\r\n                <text class=\"pay\">Â¥{{ payable.toFixed(2) }}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"action-buttons\">\r\n              <button class=\"checkout\" @click=\"checkout\">ç»“ç®—</button>\r\n            </view>\r\n          </view>\r\n          <view v-else class=\"sum-empty\">\r\n            <view class=\"empty-ico\">ğŸ›’</view>\r\n            <view class=\"empty-tip\">é€‰æ‹©å•†å“æŸ¥çœ‹å®é™…æ”¯ä»˜ä»·æ ¼</view>\r\n            <view class=\"row total\">\r\n              <text class=\"label\">åˆè®¡</text>\r\n              <view class=\"total-box\">\r\n                <text class=\"pay\">Â¥ 0</text>\r\n              </view>\r\n            </view>\r\n            <button class=\"checkout disabled\">ç»“ç®—</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- #endif -->\r\n\r\n    <!-- #ifndef H5 -->\r\n    <view class=\"mp-address-bar\">\r\n      <view class=\"bar-left\">\r\n        <text class=\"addr-icon\">ğŸ“</text>\r\n        <view class=\"bar-info\">\r\n          <text v-if=\"selectedAddress\" class=\"bar-line\">{{ selectedAddress.receiver }} {{ selectedAddress.phone }}</text>\r\n          <text v-if=\"selectedAddress\" class=\"bar-line\">{{ selectedAddress.full }}</text>\r\n          <text v-else class=\"bar-line\">æœªé€‰æ‹©æ”¶è´§åœ°å€</text>\r\n        </view>\r\n      </view>\r\n      <button size=\"mini\" class=\"bar-btn\" @click=\"openAddressPicker\">é€‰æ‹©æ”¶è´§åœ°å€</button>\r\n    </view>\r\n    <view class=\"mp-note-bar\" style=\"margin: 16rpx 20rpx;\">\r\n      <text style=\"font-size: 26rpx; color: #333;\">å¤‡æ³¨</text>\r\n      <input v-model=\"mpOrderNote\" placeholder=\"å¡«å†™è®¢å•å¤‡æ³¨\" style=\"width: 100%; padding: 12rpx; border: 1rpx solid #eee; border-radius: 8rpx; margin-top: 8rpx;\" />\r\n    </view>\r\n    <view v-if=\"cart.length\" class=\"list\">\r\n      <view class=\"group\" v-for=\"(grp, gi) in groups\" :key=\"grp.name\">\r\n        <view class=\"group-header\">\r\n          <text class=\"room mp-room\" @click=\"openRoomPopup(grp)\">{{ grp.name }} â–¾</text>\r\n        </view>\r\n        <view class=\"item\" v-for=\"it in grp.items\" :key=\"it.id\" :class=\"{ 'out-of-stock': it.isOutOfStock }\">\r\n          <view class=\"out-stock-mask\" v-if=\"it.isOutOfStock\"></view>\r\n          <view class=\"chk\" @click=\"toggleById(it.id)\">\r\n            <view class=\"chk-ico\" :class=\"{ on: it.selected, disabled: it.isOutOfStock }\"></view>\r\n          </view>\r\n          <image class=\"cover\" :src=\"it.image || '/static/logo.png'\" mode=\"aspectFill\" @click=\"openDetail(it)\" />\r\n          <view class=\"meta\">\r\n            <view class=\"row-title\">\r\n              <text class=\"title\" @click=\"openDetail(it)\">{{ it.title }}</text>\r\n            </view>\r\n            <view class=\"row-attr\">\r\n              <text class=\"attr-txt\">{{ it.attr }}</text>\r\n            </view>\r\n            <view class=\"row-main\">\r\n              <view class=\"price-box\">\r\n                <text class=\"price\">Â¥{{ it.price.toFixed(2) }}</text>\r\n              </view>\r\n              <view class=\"qty-box mp-qty-box\">\r\n                <view class=\"qty-btn mp-qty-btn\" @click.stop=\"decById(it.id)\">-</view>\r\n                <text class=\"qty-num\">{{ it.quantity }}</text>\r\n                <view class=\"qty-btn mp-qty-btn\" @click.stop=\"incById(it.id)\">+</view>\r\n              </view>\r\n              <view class=\"actions-col\">\r\n                <text class=\"act-txt del\" v-if=\"it.isOutOfStock\" @click.stop=\"removeById(it.id)\">åˆ é™¤</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"stock-tip\" v-if=\"it.isOutOfStock\">æ— è´§</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-else class=\"empty\">è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ~</view>\r\n\r\n    <view class=\"footer\">\r\n      <view class=\"actions-left\" @click=\"toggleAll\">\r\n        <view class=\"chk btn-style\">\r\n          <view class=\"chk-ico\" :class=\"{ on: isAllSelected }\"></view>\r\n          <text class=\"chk-txt\">å…¨é€‰</text>\r\n        </view>\r\n      </view>\r\n      <text>åˆè®¡ï¼š<text class=\"sum\">Â¥{{ selectedTotal.toFixed(2) }}</text></text>\r\n      <view class=\"actions\">\r\n        <view class=\"footer-btn\" @click=\"clearRemote\">æ¸…ç©º</view>\r\n        <!-- <view class=\"footer-btn\" @click=\"handleExportExcel\">å¯¼å‡ºExcel</view> -->\r\n        <view class=\"footer-btn\" :class=\"{ disabled: selectedCount === 0 }\" @click=\"checkout\">å»ç»“ç®—({{ selectedCount }})</view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- æˆ¿é—´é€‰æ‹©å¼¹çª— -->\r\n    <view v-if=\"showRoomModal\" class=\"spec-modal-mask\" @click=\"closeRoomPopup\">\r\n      <view class=\"spec-modal room-modal\" @click.stop>\r\n        <view class=\"spec-header\">\r\n          <text class=\"spec-title\">é€‰æ‹©æˆ¿é—´</text>\r\n          <view class=\"spec-close\" @click=\"closeRoomPopup\">âœ•</view>\r\n        </view>\r\n        <scroll-view scroll-y class=\"spec-body\">\r\n          <view class=\"spec-list\">\r\n             <text v-for=\"r in rooms\" :key=\"r.id\" class=\"spec-opt\" :class=\"{ active: targetGroup && targetGroup.name === r.name }\" @click=\"selectRoom(r)\">{{ r.name }}</text>\r\n          </view>\r\n        </scroll-view>\r\n      </view>\r\n    </view>\r\n    <!-- #endif -->\r\n\r\n    <!-- #ifdef H5 -->\r\n    <FloatingNav />\r\n    <view class=\"floating-back\" @click=\"goBack\">â†</view>\r\n    <!-- #endif -->\r\n\r\n    <!-- è§„æ ¼é€‰æ‹©å¼¹çª— -->\r\n    <view v-if=\"showSpecModal\" class=\"spec-modal-mask\" @click=\"closeSpecPopup\">\r\n      <view class=\"spec-modal\" @click.stop>\r\n        <view class=\"spec-header\">\r\n          <image class=\"spec-img\" :src=\"editingItem.image || '/static/logo.png'\" mode=\"aspectFill\"></image>\r\n          <view class=\"spec-info\">\r\n            <text class=\"spec-price\">Â¥{{ editingItem.price }}</text>\r\n            <text class=\"spec-selected\">å·²é€‰: {{ editingItem.attr }}</text>\r\n          </view>\r\n          <view class=\"spec-close\" @click=\"closeSpecPopup\">âœ•</view>\r\n        </view>\r\n        <scroll-view scroll-y class=\"spec-body\">\r\n          <view class=\"spec-group\">\r\n            <text class=\"spec-title\">ç³»åˆ—</text>\r\n            <view class=\"spec-list\">\r\n              <text class=\"spec-opt active\">è‹¹æœ17ç³»åˆ—é’¢åŒ–è†œ</text>\r\n              <text class=\"spec-opt\">è‹¹æœ17ç³»åˆ—æ‰‹æœºå£³</text>\r\n              <text class=\"spec-opt\">è‹¹æœ16-15ç³»åˆ—æ‰‹æœºè´´è†œ</text>\r\n            </view>\r\n          </view>\r\n          <view class=\"spec-group\">\r\n            <text class=\"spec-title\">é¢œè‰²</text>\r\n            <view class=\"spec-list\">\r\n              <text class=\"spec-opt\">ä¸“ä¸šç‰ˆ-AsahiæŠ‘èŒåŸºæ</text>\r\n              <text class=\"spec-opt active\">ä¸“ä¸šç‰ˆ2ç‰‡è£…-AsahiåŸºæ</text>\r\n              <text class=\"spec-opt\">è¿‡æ»¤è“å…‰ç‰ˆ-æŠ¤çœ¼è®¤è¯</text>\r\n            </view>\r\n          </view>\r\n           <view class=\"spec-group\">\r\n            <text class=\"spec-title\">ç‰ˆæœ¬</text>\r\n            <view class=\"spec-list\">\r\n              <text class=\"spec-opt active\">iPhone16ProMax</text>\r\n              <text class=\"spec-opt\">16Plus/15Plus/14ProMax</text>\r\n            </view>\r\n          </view>\r\n        </scroll-view>\r\n        <view class=\"spec-footer\">\r\n          <button class=\"spec-btn cancel\" @click=\"closeSpecPopup\">å–æ¶ˆ</button>\r\n          <button class=\"spec-btn confirm\" @click=\"closeSpecPopup\">ç¡®è®¤</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <RoomSelector \r\n      :visible=\"showAddressSelector\" \r\n      :rooms=\"addressRooms\" \r\n      type=\"addr\"\r\n      :selectedName=\"selectedAddress ? (selectedAddress.receiver + ' ' + selectedAddress.phone + ' ' + selectedAddress.full).trim() : ''\"\r\n      @close=\"showAddressSelector = false\" \r\n      @select=\"onAddressSelect\" \r\n      @createAddress=\"onCreateAddress\"\r\n    />\r\n    <LoginPrompt :visible=\"showLoginModal\" @close=\"closeLoginModal\" @confirm=\"goLogin\" />\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport FloatingNav from '@/components/FloatingNav.vue'\r\nimport RoomSelector from '@/components/RoomSelector.vue'\r\nimport Skeleton from '@/components/Skeleton.vue'\r\nimport LoginPrompt from '@/components/LoginPrompt.vue'\r\nimport { getCartItems, deleteCartItem, clearCart, updateCartItem, getRooms, getCartItemsByIDs, createOrderByIds, exportOrderExcel, getAddresses, addAddress } from '../../api/index.js'\r\nexport default {\r\n  components: { FloatingNav, RoomSelector, Skeleton, LoginPrompt },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      cart: [],\r\n      showSpecModal: false,\r\n      editingItem: {},\r\n      // æˆ¿é—´é€‰æ‹©ç›¸å…³\r\n      rooms: [],\r\n      showRoomModal: false,\r\n      targetGroup: null,\r\n      addresses: [],\r\n      selectedAddress: null,\r\n      showAddressSelector: false,\r\n      orderNote: '',\r\n      mpOrderNote: '',\r\n      summaryData: {\r\n        total_price: 0,\r\n        total_original: 0,\r\n        is_free_shipping: 0\r\n      },\r\n      showLoginModal: false\r\n    }\r\n  },\r\n  computed: {\r\n    total() { return this.cart.reduce((s, it) => s + (it.price * (it.quantity || 1)), 0) },\r\n    // selectedTotal() { return this.cart.reduce((s, it) => s + (it.selected ? it.price * (it.quantity || 1) : 0), 0) },\r\n    selectedTotal() { return this.summaryData.total_original || 0 }, // ä½¿ç”¨APIè¿”å›çš„æ€»ä»·\r\n    selectedCount() { return this.cart.filter(it => it.selected).length },\r\n    isAllSelected() { \r\n        const validItems = this.cart.filter(it => !it.isOutOfStock)\r\n        return validItems.length > 0 && validItems.every(it => it.selected)\r\n    },\r\n    selectedThumbs() { return this.cart.filter(it => it.selected).slice(0, 4).map(it => it.image || '/static/logo.png') },\r\n    // officialReduce() { return this.cart.reduce((s, it) => s + (it.selected ? (it.officialReduce || 0) : 0), 0) },\r\n    // redReduce() { return this.cart.reduce((s, it) => s + (it.selected ? (it.redReduce || 0) : 0), 0) },\r\n    // extraReduce() { return this.cart.reduce((s, it) => s + (it.selected ? (it.reduce || 0) : 0), 0) },\r\n    // totalReduce() { return this.officialReduce + this.redReduce + this.extraReduce },\r\n    totalReduce() { return Math.max(0, (this.summaryData.total_original || 0) - (this.summaryData.total_price || 0)) },\r\n    payable() { return this.summaryData.total_price || 0 },\r\n    needForCoupon() { const need = Math.max(0, 800 - this.payable); return need.toFixed(2) },\r\n    addressRooms() {\r\n      return this.addresses.map(a => ({\r\n        name: `${a.receiver} ${a.phone} ${a.full}`.trim(),\r\n        raw: a\r\n      }))\r\n    },\r\n    groups: function () {\r\n      try {\r\n        const map = {};\r\n        (this.cart || []).forEach(it => {\r\n          const key = it.roomName || 'é»˜è®¤æˆ¿é—´'\r\n          if (!map[key]) map[key] = []\r\n          map[key].push(it)\r\n        })\r\n        return Object.keys(map).map(name => ({ name, items: map[name] }))\r\n      } catch (e) {\r\n        console.error('groups computed error', e)\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  onShow() {\r\n    // #ifdef MP-WEIXIN\r\n    try {\r\n      const u = uni.getStorageSync('user') || null\r\n      const exp = uni.getStorageSync('token_expiration') || 0\r\n      const ok = !!u && (!exp || Date.now() < exp)\r\n      if (!ok) {\r\n        this.showLoginModal = true\r\n        return\r\n      }\r\n    } catch (e) {}\r\n    // #endif\r\n    this.load()\r\n    this.loadAddresses()\r\n    // #ifdef H5\r\n    try { uni.hideTabBar({ animation: false }) } catch (e) { }\r\n    try {\r\n      const cur = (typeof location !== 'undefined' && location.href) ? location.href : ''\r\n      const ref = (typeof document !== 'undefined' && document.referrer) ? document.referrer : ''\r\n      if (ref && (!cur || ref !== cur)) {\r\n        uni.setStorageSync('last_cart_back', ref)\r\n      }\r\n    } catch (e) {}\r\n    // #endif\r\n  },\r\n  onLoad() {\r\n    try {\r\n      const h = () => { this.showLoginModal = true }\r\n      this._globalLoginHandler = h\r\n      uni.$on('global-login-prompt', h)\r\n    } catch (e) {}\r\n  },\r\n  onUnload() {\r\n    try {\r\n      if (this._globalLoginHandler) uni.$off('global-login-prompt', this._globalLoginHandler)\r\n      this._globalLoginHandler = null\r\n    } catch (e) {}\r\n  },\r\n    methods: {\r\n      closeLoginModal() {\r\n        this.showLoginModal = false\r\n        try {\r\n          let isH5 = false\r\n          try { isH5 = typeof window !== 'undefined' } catch (e) { isH5 = false }\r\n          if (!isH5) {\r\n            if (uni && uni.switchTab) { uni.switchTab({ url: '/pages/home/index' }); return }\r\n            if (uni && uni.navigateTo) { uni.navigateTo({ url: '/pages/home/index' }); return }\r\n          }\r\n        } catch (e) {}\r\n      },\r\n      goLogin() { this.showLoginModal = false; uni.navigateTo({ url: '/pages/login/index' }) },\r\n      goHome() {\r\n        if (uni && uni.switchTab) { uni.switchTab({ url: '/pages/home/index' }); return }\r\n        if (uni && uni.navigateTo) { uni.navigateTo({ url: '/pages/home/index' }); return }\r\n      },\r\n      goBack() { this.goHome() },\r\n      openDetail(item) {\r\n        try {\r\n          const id = (item && (item.availableProductId || item.available_product_id || item.productId || item.id)) || ''\r\n          if (!id) { uni.showToast({ title: 'å•†å“IDç¼ºå¤±', icon: 'none' }); return }\r\n          uni.navigateTo({ url: '/pages/product/index?id=' + encodeURIComponent(id) })\r\n        } catch (e) {}\r\n      },\r\n      loadAddresses() {\r\n        getAddresses().then(res => {\r\n          const raw = Array.isArray(res?.data?.items) ? res.data.items : (Array.isArray(res?.items) ? res.items : [])\r\n          this.addresses = raw.map(a => ({\r\n            id: a.addresses_id || a.id || '',\r\n          receiver: a.receiver || '',\r\n          phone: a.phone || '',\r\n          full: [a.province, a.city, a.district, a.detail_address].filter(Boolean).join(' '),\r\n          is_default: a.is_default === 1\r\n        }))\r\n        const cached = uni.getStorageSync('selected_address_id') || ''\r\n        let pick = this.addresses.find(x => x.id === cached) || this.addresses.find(x => x.is_default) || this.addresses[0]\r\n        this.selectedAddress = pick || null\r\n        if (this.showAddressSelector && this.addresses.length === 0) {\r\n          try { uni.showToast({ title: 'æš‚æ— æ”¶è´§åœ°å€ï¼Œå»åˆ›å»ºå§', icon: 'none' }) } catch (e) {}\r\n        }\r\n      }).catch(() => { this.addresses = []; this.selectedAddress = null })\r\n    },\r\n    openAddressPicker() {\r\n      this.showAddressSelector = true\r\n      this.loadAddresses()\r\n    },\r\n    onAddressSelect(room) {\r\n      if (room && room.raw) {\r\n        this.selectedAddress = room.raw\r\n        uni.setStorageSync('selected_address_id', room.raw.id)\r\n        this.showAddressSelector = false\r\n      }\r\n    },\r\n    onCreateAddress(payload) {\r\n      const u = uni.getStorageSync('user')\r\n      const token = (u && (u.token || (u.data && u.data.token))) || ''\r\n      const data = { receiver: payload.receiver, phone: payload.phone, province: payload.province, city: payload.city, district: payload.district, detail_address: payload.detail_address, is_default: payload.is_default }\r\n      addAddress({ ...data, token }).then(res => {\r\n        if (res && res.success) {\r\n          const id = (res && res.data && (res.data.addresses_id || res.data.id)) || ''\r\n          const item = { id, receiver: data.receiver, phone: data.phone, full: [data.province, data.city, data.district, data.detail_address].filter(Boolean).join(' '), is_default: data.is_default === 1 }\r\n          this.addresses = [item, ...this.addresses]\r\n          this.selectedAddress = item\r\n          try { uni.setStorageSync('selected_address_id', id) } catch (e) {}\r\n          uni.showToast({ title: 'å·²ä¿å­˜', icon: 'success' })\r\n          this.showAddressSelector = false\r\n        } else {\r\n          uni.showToast({ title: (res && res.message) ? res.message : 'ä¿å­˜å¤±è´¥', icon: 'none' })\r\n        }\r\n      }).catch(() => {\r\n        uni.showToast({ title: 'ä¿å­˜å¤±è´¥', icon: 'none' })\r\n      })\r\n    },\r\n    toAddressPage() { uni.navigateTo({ url: '/pages/address/index' }) },\r\n    load() {\r\n      getCartItems()\r\n        .then((res) => {\r\n          const isEmpty = typeof res === 'string' && (res.includes('ç©º') || res === 'å½“å‰è´­ç‰©è½¦ä¸ºç©º')\r\n          if (isEmpty) { this.cart = []; return }\r\n\r\n          const payload = res && res.data && typeof res.data === 'object' ? res.data : res\r\n          const groups = Array.isArray(payload?.groups) ? payload.groups : []\r\n          const list = []\r\n          for (const g of groups) {\r\n            const roomName = g && g.room_name ? g.room_name : ''\r\n            const items = Array.isArray(g && g.items) ? g.items : []\r\n            for (const x of items) {\r\n              const typeRaw = (x && (x.product_type || x.available_product_type || x.type || x.comment)) || ''\r\n              const typeLower = String(typeRaw || '').toLowerCase()\r\n              const isStagnant = typeLower.includes('stagnant') || typeLower.includes('å‘†æ»')\r\n              const isOutOfStock = (x.available_product_status === 0) || ((x.inventory === 0) && isStagnant)\r\n              list.push({\r\n                id: (x && x.id) ? x.id : '',\r\n                title: (x && (x.available_product_name || x.product_name)) ? (x.available_product_name || x.product_name) : '',\r\n                productId: (x && x.product_id) ? x.product_id : '',\r\n                availableProductId: (x && x.available_product_id) ? x.available_product_id : ((x && x.product_id) ? x.product_id : ''),\r\n                price: Number((x && x.price) !== undefined ? x.price : 0) || 0,\r\n                quantity: Number((x && x.quantity) !== undefined ? x.quantity : 1) || 1,\r\n                image: '/static/logo.png',\r\n                roomName: roomName || 'é»˜è®¤æˆ¿é—´',\r\n                roomId: g.room_id || '',\r\n                length: (Number(x.length) > 0 ? x.length : 0),\r\n                color: x.color || 'æš–ç™½',\r\n                note: x.note || '',\r\n                attr: ((x && x.length) ? ('é•¿åº¦ ' + x.length) : '') + ((x && x.note) ? (' ï½œ ' + x.note) : ''),\r\n                selected: false,\r\n                inventory: x.inventory,\r\n                status: x.status,\r\n                available: x.available_product_status,\r\n                stockMessage: x.message || (isOutOfStock ? 'è¯¥å•†å“å·²æ— åº“å­˜' : ''),\r\n                isOutOfStock: isOutOfStock\r\n              })\r\n            }\r\n          }\r\n          this.cart = list\r\n          this.fetchSummary()\r\n          this.loading = false\r\n        })\r\n        .catch((err) => {\r\n          console.error('Get cart failed', err)\r\n          try { this.cart = uni.getStorageSync('cart') || [] } catch (e) { this.cart = [] }\r\n          this.cart = (this.cart || []).map(it => ({\r\n            ...it,\r\n            quantity: it.quantity || 1,\r\n            selected: !!it.selected\r\n          }))\r\n          this.loading = false\r\n        })\r\n    },\r\n    fetchSummary() {\r\n        const selectedIds = this.cart.filter(it => it.selected).map(it => it.id)\r\n        if (selectedIds.length === 0) {\r\n            this.summaryData = { total_price: 0, total_original: 0, is_free_shipping: 0 }\r\n            return\r\n        }\r\n        getCartItemsByIDs({ ids: selectedIds }).then(res => {\r\n            if (res && res.success && res.data) {\r\n                this.summaryData = res.data\r\n            }\r\n        }).catch(e => console.error(e))\r\n    },\r\n    sync() { uni.setStorageSync('cart', this.cart) },\r\n    findIndexById(id) { return this.cart.findIndex(it => it.id === id) },\r\n    incById(id) {\r\n      const i = this.findIndexById(id)\r\n      if (i >= 0) {\r\n        const item = this.cart[i]\r\n        if (item.isOutOfStock) return\r\n        this.updateItemQuantity(item, item.quantity + 1)\r\n      }\r\n    },\r\n    decById(id) {\r\n      const i = this.findIndexById(id)\r\n      if (i >= 0) {\r\n        const item = this.cart[i]\r\n        if (item.quantity > 1) {\r\n          this.updateItemQuantity(item, item.quantity - 1)\r\n        }\r\n      }\r\n    },\r\n    updateItemQuantity(item, quantity) {\r\n      updateCartItem({\r\n        id: item.id,\r\n        room_id: item.roomId,\r\n        product_id: item.productId,\r\n        length: (Number(item.length) > 0 ? item.length : 0),\r\n        quantity: quantity,\r\n        color: item.color,\r\n        note: item.note\r\n      }).then(res => {\r\n        if (res && res.success) {\r\n          item.quantity = quantity\r\n          this.sync()\r\n          this.refreshItemPrice(item.id)\r\n        } else {\r\n          uni.showToast({ title: 'æ›´æ–°å¤±è´¥', icon: 'none' })\r\n        }\r\n      }).catch((err) => {\r\n        console.error(err)\r\n        uni.showToast({ title: 'æ›´æ–°å‡ºé”™', icon: 'none' })\r\n      })\r\n    },\r\n    refreshItemPrice(id) {\r\n      getCartItems()\r\n        .then((res) => {\r\n          const payload = res && res.data && typeof res.data === 'object' ? res.data : res\r\n          const groups = Array.isArray(payload?.groups) ? payload.groups : []\r\n          let found = null\r\n          for (const g of groups) {\r\n            const items = Array.isArray(g && g.items) ? g.items : []\r\n            const x = items.find(xx => xx && xx.id === id)\r\n            if (x) { found = x; break }\r\n          }\r\n          if (found) {\r\n            const i = this.findIndexById(id)\r\n            if (i >= 0) {\r\n              const it = this.cart[i]\r\n              it.price = Number(found.price !== undefined ? found.price : it.price) || it.price\r\n              it.quantity = Number(found.quantity !== undefined ? found.quantity : it.quantity) || it.quantity\r\n              it.inventory = found.inventory\r\n              it.available = found.available_product_status\r\n              it.isOutOfStock = (found.inventory === 0 || found.available_product_status === 0)\r\n            }\r\n          }\r\n        })\r\n        .finally(() => { this.fetchSummary() })\r\n    },\r\n    ensureLoggedIn() {\r\n      try {\r\n        const u = uni.getStorageSync('user') || null\r\n        const exp = uni.getStorageSync('token_expiration') || 0\r\n        const ok = !!u && (!exp || Date.now() < exp)\r\n        if (ok) return true\r\n        this.showLoginModal = true\r\n        return false\r\n      } catch (e) { return false }\r\n    },\r\n    removeById(id) {\r\n      deleteCartItem({ id })\r\n        .then(() => {\r\n          const i = this.findIndexById(id); if (i >= 0) { this.cart.splice(i, 1); this.sync(); this.fetchSummary() }\r\n          uni.showToast({ title: 'å·²åˆ é™¤', icon: 'success' })\r\n        })\r\n        .catch(() => {\r\n          const i = this.findIndexById(id); if (i >= 0) { this.cart.splice(i, 1); this.sync(); this.fetchSummary() }\r\n          uni.showToast({ title: 'æœ¬åœ°åˆ é™¤', icon: 'none' })\r\n        })\r\n    },\r\n    removeSelected() {\r\n      const ids = this.cart.filter(it => it.selected).map(it => it.id)\r\n      if (ids.length === 0) { return }\r\n      const tasks = ids.map(id => deleteCartItem({ id }))\r\n      Promise.allSettled(tasks).then(() => {\r\n        this.cart = this.cart.filter(it => !ids.includes(it.id))\r\n        this.sync()\r\n        this.fetchSummary()\r\n        uni.showToast({ title: 'å·²åˆ é™¤', icon: 'success' })\r\n      }).catch(() => {\r\n        this.cart = this.cart.filter(it => !ids.includes(it.id))\r\n        this.sync()\r\n        this.fetchSummary()\r\n        uni.showToast({ title: 'æœ¬åœ°åˆ é™¤', icon: 'none' })\r\n      })\r\n    },\r\n    clearRemote() {\r\n      if (!this.ensureLoggedIn()) return\r\n      let token = ''\r\n      try {\r\n        const u = uni.getStorageSync('user') || null\r\n        token = (u && (u.token || (u.data && u.data.token))) || ''\r\n      } catch (e) {}\r\n      clearCart({ token })\r\n        .then((res) => {\r\n          if (res && res.success) {\r\n            this.cart = []\r\n            this.sync()\r\n            this.fetchSummary()\r\n            uni.showToast({ title: 'å·²æ¸…ç©º', icon: 'success' })\r\n          } else {\r\n            uni.showToast({ title: (res && res.message) ? res.message : 'æ¸…ç©ºå¤±è´¥', icon: 'none' })\r\n          }\r\n        })\r\n        .catch(() => {\r\n          uni.showToast({ title: 'æ¸…ç©ºå¤±è´¥', icon: 'none' })\r\n        })\r\n    },\r\n    toggleById(id) { \r\n        const i = this.findIndexById(id); \r\n        if (i >= 0) { \r\n            if (this.cart[i].isOutOfStock) return\r\n            this.cart[i].selected = !this.cart[i].selected; \r\n            this.sync() \r\n            this.fetchSummary()\r\n        } \r\n    },\r\n    toggleAll() {\r\n      const validItems = this.cart.filter(it => !it.isOutOfStock)\r\n      if (validItems.length === 0) return\r\n      \r\n      const makeSelected = !this.isAllSelected\r\n      \r\n      this.cart.forEach(it => {\r\n          if (!it.isOutOfStock) it.selected = makeSelected\r\n          else it.selected = false\r\n      })\r\n      this.sync()\r\n      this.fetchSummary()\r\n    },\r\n    clear() { this.cart = []; this.sync(); this.fetchSummary() },\r\n    async checkout() {\r\n      if (!this.ensureLoggedIn()) return\r\n      if (this.selectedCount === 0) { uni.showToast({ title: 'è¯·é€‰æ‹©å•†å“', icon: 'none' }); return }\r\n      const selectedIds = this.cart.filter(it => it.selected).map(it => it.id)\r\n      const addressId = this.selectedAddress?.id || ''\r\n      if (!addressId) { uni.showToast({ title: 'è¯·å…ˆé€‰æ‹©æ”¶è´§åœ°å€', icon: 'none' }); return }\r\n      if (!addressId) { uni.showToast({ title: 'åœ°å€é€‰æ‹©å¼‚å¸¸', icon: 'none' }); return }\r\n\r\n      createOrderByIds({ ids: selectedIds, address_id: addressId, note: (this.orderNote || this.mpOrderNote || '') }).then(res => {\r\n          if (res && res.success) {\r\n             uni.showToast({ title: 'ä¸‹å•æˆåŠŸ', icon: 'success' })\r\n             // ç§»é™¤å·²é€‰å•†å“\r\n             this.cart = this.cart.filter(it => !it.selected); this.sync(); this.fetchSummary()\r\n             \r\n             // å¦‚æœè¿”å›äº†è®¢å•IDï¼Œè·³è½¬åˆ°è®¢å•é¡µ\r\n             const orderId = res.data?.order_id || res.data?.id\r\n             if (orderId) {\r\n                 setTimeout(() => {\r\n                    uni.navigateTo({ url: '/pages/order/index?id=' + orderId })\r\n                 }, 1000)\r\n             } else {\r\n                 setTimeout(() => {\r\n                    uni.navigateTo({ url: '/pages/order/index' })\r\n                 }, 1000)\r\n             }\r\n          } else {\r\n             uni.showToast({ title: res.message || 'ä¸‹å•å¤±è´¥', icon: 'none' })\r\n          }\r\n      }).catch(err => {\r\n          uni.showToast({ title: 'ä¸‹å•å‡ºé”™', icon: 'none' })\r\n          console.error(err)\r\n      })\r\n    },\r\n    handleExportExcel() {\r\n      if (this.selectedCount === 0) {\r\n        uni.showToast({ title: 'è¯·é€‰æ‹©å•†å“', icon: 'none' })\r\n        return\r\n      }\r\n      \r\n      const selectedIds = this.cart.filter(it => it.selected).map(it => it.id)\r\n      \r\n      uni.showModal({\r\n        title: 'å¯¼å‡ºæç¤º',\r\n        content: 'å¯¼å‡ºExcelå°†ä¸ºæ‚¨è‡ªåŠ¨ç”Ÿæˆè®¢å•ï¼Œç¡®è®¤ç»§ç»­ï¼Ÿ',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            // #ifdef MP-WEIXIN\r\n            uni.showModal({ title: 'æç¤º', content: 'å°ç¨‹åºæš‚ä¸æ”¯æŒå¯¼å‡º', showCancel: false })\r\n            return\r\n            // #endif\r\n            uni.showLoading({ title: 'æ­£åœ¨å¯¼å‡º...' })\r\n            createOrderByIds({ ids: selectedIds, address_id: (this.selectedAddress && this.selectedAddress.id) || '' }).then(res => {\r\n              if (res && res.success) {\r\n                const orderId = res.data?.order_id || res.data?.id\r\n                if (orderId) {\r\n                   exportOrderExcel({ order_id: orderId }).then(exportRes => {\r\n                     uni.hideLoading()\r\n                     // #ifdef H5\r\n                     if (exportRes && exportRes.blob) {\r\n                       try {\r\n                         const url = URL.createObjectURL(exportRes.blob)\r\n                         const a = document.createElement('a')\r\n                         a.href = url\r\n                         a.download = exportRes.filename || 'è®¢å•å¯¼å‡º.xlsx'\r\n                         document.body.appendChild(a)\r\n                         a.click()\r\n                         a.remove()\r\n                         try { URL.revokeObjectURL(url) } catch (e) {}\r\n                         this.cart = this.cart.filter(it => !it.selected); this.sync(); this.fetchSummary()\r\n                         return\r\n                       } catch (e) {}\r\n                     }\r\n                     // #endif\r\n                     const possibleUrl = (exportRes && exportRes.url) || (exportRes && exportRes.data && exportRes.data.url) || (exportRes && exportRes.data && typeof exportRes.data === 'string' ? exportRes.data : '')\r\n                     if (possibleUrl && typeof possibleUrl === 'string') {\r\n                       this.cart = this.cart.filter(it => !it.selected); this.sync(); this.fetchSummary()\r\n                       // #ifdef H5\r\n                       try { window.open(possibleUrl, '_blank') } catch (e) { window.location.href = possibleUrl }\r\n                       // #endif\r\n                       // #ifndef H5\r\n                       uni.setClipboardData({ data: possibleUrl, success: () => uni.showToast({ title: 'ä¸‹è½½é“¾æ¥å·²å¤åˆ¶', icon: 'none' }) })\r\n                       // #endif\r\n                     } else {\r\n                       uni.showToast({ title: 'æœªè·å–åˆ°å¯¼å‡ºé“¾æ¥', icon: 'none' })\r\n                     }\r\n                   }).catch(e => {\r\n                     uni.hideLoading()\r\n                     uni.showToast({ title: 'å¯¼å‡ºè¯·æ±‚å¤±è´¥', icon: 'none' })\r\n                   })\r\n                } else {\r\n                   uni.hideLoading()\r\n                   uni.showToast({ title: 'è®¢å•åˆ›å»ºå¼‚å¸¸', icon: 'none' })\r\n                }\r\n              } else {\r\n                uni.hideLoading()\r\n                uni.showToast({ title: res.message || 'ç”Ÿæˆè®¢å•å¤±è´¥', icon: 'none' })\r\n              }\r\n            }).catch(e => {\r\n              uni.hideLoading()\r\n              uni.showToast({ title: 'ç½‘ç»œè¯·æ±‚å¤±è´¥', icon: 'none' })\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    openSpecPopup(item) {\r\n      this.editingItem = item\r\n      this.showSpecModal = true\r\n    },\r\n    closeSpecPopup() {\r\n      this.showSpecModal = false\r\n      this.editingItem = {}\r\n    },\r\n    // æˆ¿é—´é€‰æ‹©é€»è¾‘\r\n    loadRooms() {\r\n      getRooms().then(res => {\r\n        const items = Array.isArray(res?.data?.items) ? res.data.items : []\r\n        this.rooms = items.map(r => ({\r\n          id: r.room_id,\r\n          name: r.name\r\n        }))\r\n      }).catch(err => {\r\n        console.error('Get rooms failed', err)\r\n        this.rooms = (uni.getStorageSync('rooms') || []).map(n => ({ id: n, name: n }))\r\n      })\r\n    },\r\n    openRoomPopup(group) {\r\n      this.targetGroup = group\r\n      this.showRoomModal = true\r\n      if (this.rooms.length === 0) {\r\n        this.loadRooms()\r\n      }\r\n    },\r\n    closeRoomPopup() {\r\n      this.showRoomModal = false\r\n      this.targetGroup = null\r\n    },\r\n    selectRoom(room) {\r\n      if (!this.targetGroup || !this.targetGroup.items) return\r\n      const items = this.targetGroup.items\r\n      // æ‰¹é‡æ›´æ–°è¯¥ç»„ä¸‹çš„å•†å“åˆ°æ–°æˆ¿é—´\r\n      // ç”±äºAPIæ˜¯å•ä¸ªæ›´æ–°ï¼Œå¾ªç¯è°ƒç”¨ï¼ˆä¼˜åŒ–ï¼šå¦‚æœæœ‰æ‰¹é‡æ¥å£æ›´å¥½ï¼Œè¿™é‡Œåªèƒ½å¾ªç¯ï¼‰\r\n\r\n      uni.showLoading({ title: 'ç§»åŠ¨ä¸­' })\r\n      const promises = items.map(item => {\r\n        return updateCartItem({\r\n          id: item.id,\r\n          room_id: room.id,\r\n          product_id: item.productId,\r\n          length: (Number(item.length) > 0 ? item.length : 0),\r\n          quantity: item.quantity,\r\n          color: item.color,\r\n          note: item.note\r\n        })\r\n      })\r\n\r\n      Promise.all(promises).then(() => {\r\n        uni.hideLoading()\r\n        uni.showToast({ title: 'å·²ç§»åŠ¨åˆ° ' + room.name, icon: 'success' })\r\n        this.closeRoomPopup()\r\n        this.load() // é‡æ–°åŠ è½½è´­ç‰©è½¦\r\n      }).catch(() => {\r\n        uni.hideLoading()\r\n        uni.showToast({ title: 'ç§»åŠ¨éƒ¨åˆ†å¤±è´¥', icon: 'none' })\r\n        this.closeRoomPopup()\r\n        this.load()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  min-height: 100vh;\r\n  padding-bottom: 120rpx;\r\n}\r\n/* #ifdef H5 */\r\n.page {\r\n  background: url('/static/product_detail_background.jpg') no-repeat center center fixed;\r\n  background-size: cover;\r\n}\r\n/* #endif */\r\n\r\n.review-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.addr-sub-title {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.list {\r\n  background: #fff;\r\n}\r\n\r\n.item {\r\n  display: flex;\r\n  padding: 20rpx;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  position: relative;\r\n}\r\n\r\n.out-stock-mask {\r\n  position: absolute;\r\n  top: 0; left: 0; right: 0; bottom: 0;\r\n  background: rgba(255,255,255,0.6);\r\n  z-index: 5;\r\n  pointer-events: none;\r\n}\r\n\r\n.stock-tip {\r\n  position: absolute;\r\n  right: 20rpx;\r\n  bottom: 20rpx;\r\n  background: rgba(0,0,0,0.6);\r\n  color: #fff;\r\n  padding: 4rpx 12rpx;\r\n  font-size: 24rpx;\r\n  border-radius: 4rpx;\r\n  z-index: 6;\r\n}\r\n\r\n.chk-ico.disabled {\r\n  background: #eee;\r\n  border-color: #ddd;\r\n}\r\n\r\n.item.out-of-stock .chk { pointer-events: none; }\r\n\r\n.cover {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n  border-radius: 12rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.meta {\r\n  flex: 1;\r\n  margin-left: 16rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  display: block;\r\n}\r\n\r\n.price {\r\n  color: #e1251b;\r\n  font-size: 30rpx;\r\n  margin-top: 8rpx;\r\n  display: block;\r\n}\r\n\r\n.qty {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.count {\r\n  margin: 0 16rpx;\r\n}\r\n\r\n.del {\r\n  margin-left: 12rpx;\r\n}\r\n\r\n.empty {\r\n  padding: 60rpx;\r\n  text-align: center;\r\n  color: #999;\r\n}\r\n\r\n.footer {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: #fff;\r\n  box-shadow: 0 -8rpx 20rpx rgba(0, 0, 0, .06);\r\n  padding: 20rpx;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 99;\r\n}\r\n\r\n.sum {\r\n  color: #e1251b;\r\n  font-weight: 600;\r\n}\r\n\r\n.checkout {\r\n  background: #ff5500;\r\n  color: #fff;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 20rpx;\r\n  margin-top: 20rpx;\r\n}\r\n.action-buttons .checkout {\r\n  flex: 1;\r\n  margin: 0;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  border-radius: 40rpx;\r\n  font-size: 28rpx;\r\n}\r\n.action-buttons .export-btn {\r\n  flex: 1;\r\n  margin: 0;\r\n  background: #fff;\r\n  color: #333;\r\n  border: 1px solid #ddd;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  border-radius: 40rpx;\r\n  font-size: 28rpx;\r\n}\r\n.action-buttons .export-btn::after { border: none; }\r\n\r\n/* å°ç¨‹åºç«¯å‹¾é€‰æ ·å¼ */\r\n.actions-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.actions-left .chk-ico {\r\n  display: none;\r\n}\r\n\r\n.chk {\r\n  width: 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.chk-ico {\r\n  width: 28rpx;\r\n  height: 28rpx;\r\n  border-radius: 50%;\r\n  border: 2rpx solid #ccc;\r\n}\r\n\r\n.chk-ico.on {\r\n  background: #333;\r\n  /* border-color: #ff5500; */\r\n}\r\n\r\n.chk-txt {\r\n  margin-left: 8rpx;\r\n  color: #333;\r\n}\r\n\r\n.chk.btn-style {\r\n  width: auto;\r\n  padding: 10rpx 20rpx;\r\n  background: #ddd;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 30rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8rpx;\r\n  margin-right: 10rpx;\r\n}\r\n.chk.btn-style .chk-txt {\r\n  margin-left: 0;\r\n  font-size: 26rpx;\r\n  line-height: 1;\r\n}\r\n\r\n.footer .actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.footer-btn {\r\n  width: auto;\r\n  padding: 0 40rpx;\r\n  /* #ifndef H5 */\r\n  background: #000;\r\n  /* #endif */\r\n  /* #ifdef H5 */\r\n  background: linear-gradient(135deg, #ff6a00, #ff2d55);\r\n  /* #endif */\r\n  border: none;\r\n  border-radius: 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 72rpx;\r\n  line-height: 72rpx;\r\n  font-size: 28rpx;\r\n  color: #fff;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.footer-btn.disabled {\r\n  color: #999;\r\n  border-color: #eee;\r\n  background: #f5f5f5;\r\n}\r\n\r\n/* #ifdef H5 */\r\n.footer {\r\n  display: none;\r\n}\r\n\r\n.h5-nav-bar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 88rpx; /* Standard nav height */\r\n  padding: 0 40rpx;\r\n  background: #ffffff;\r\n  display: flex;\r\n  align-items: center;\r\n  z-index: 100;\r\n  box-shadow: 0 1rpx 0 #f0f0f0;\r\n  box-sizing: border-box;\r\n}\r\n.nav-title {\r\n  flex: 1;\r\n  text-align: center;\r\n  font-size: 34rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-right: 80rpx; /* Balance the back button width */\r\n}\r\n.nav-back {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center; /* Center the arrow */\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  cursor: pointer;\r\n  width: 80rpx; /* Fixed width for balance */\r\n  height: 100%;\r\n}\r\n.back-arrow {\r\n  width: 20rpx;\r\n  height: 20rpx;\r\n  border-left: 4rpx solid #333;\r\n  border-bottom: 4rpx solid #333;\r\n  transform: rotate(45deg);\r\n}\r\n\r\n.cart-grid {\r\n  display: grid;\r\n  grid-template-columns: 3fr 1.2fr;\r\n  grid-gap: 80rpx;\r\n  padding-right: 130rpx;\r\n  padding-left: 130rpx;\r\n  padding-top: 108rpx; /* 88rpx header + 20rpx space */\r\n  /* padding: 20rpx; */\r\n}\r\n\r\n.cart-main {\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  height: calc(100vh - 220rpx);\r\n  overflow: auto;\r\n  margin-bottom: 60rpx;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16rpx 20rpx;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.toolbar .chk {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n}\r\n\r\n.toolbar .chk-ico {\r\n  display: none;\r\n}\r\n\r\n\r\n.toolbar .chk-ico.on {\r\n  background: #ff5500;\r\n  border-color: #ff5500;\r\n  box-shadow: 0 0 0 6rpx rgba(255, 85, 0, .12) inset;\r\n}\r\n\r\n.toolbar .chk-txt {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  white-space: nowrap;\r\n}\r\n\r\n.btn-clear {\r\n  background: #ff5500;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 999rpx;\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.list.h5 .item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 20rpx;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.list.h5 .cover {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n  border-radius: 12rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.list.h5 .meta {\r\n  flex: 1;\r\n  margin-left: 16rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.cart-aside {}\r\n\r\n.summary-card {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.05);\r\n  height: calc(100vh - 300rpx);\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 60rpx;\r\n}\r\n\r\n.sum-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n/* Address Section in Summary Card */\r\n.addr-section {\r\n  margin-bottom: 30rpx;\r\n  padding-bottom: 20rpx;\r\n  /* border-bottom: 1px solid #f0f0f0; */\r\n}\r\n.addr-label {\r\n  font-size: 24rpx;\r\n  color: #434343;\r\n  margin-bottom: 16rpx;\r\n  font-weight: 600;\r\n}\r\n.addr-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.addr-top-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8rpx;\r\n}\r\n.addr-name {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n.btn-select-addr {\r\n  font-size: 22rpx;\r\n  background: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 24rpx;\r\n  padding: 0 20rpx;\r\n  line-height: 44rpx;\r\n  height: 44rpx;\r\n  margin: 0;\r\n  color: #666;\r\n}\r\n.addr-detail {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  line-height: 1.4;\r\n}\r\n.addr-empty {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.group-header {\r\n  background: transparent;\r\n  border-bottom: none;\r\n  padding: 20rpx 20rpx 0 20rpx;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.group-header .store-icon {\r\n  font-size: 32rpx;\r\n  margin-right: 12rpx;\r\n}\r\n\r\n.group-header .room {\r\n  background: #ddd;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  display: inline-block;\r\n}\r\n\r\n.group-header .arrow {\r\n  color: #ccc;\r\n  margin-left: 10rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.sum-hint {\r\n  position: absolute;\r\n  right: 24rpx;\r\n  top: 24rpx;\r\n  color: #999;\r\n  font-size: 22rpx;\r\n}\r\n\r\n.thumbs {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  margin-top: 16rpx;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.thumb {\r\n  width: 100rpx;\r\n  height: 100rpx;\r\n  border-radius: 8rpx;\r\n  background: #f5f5f5;\r\n  border: 1rpx solid #eee;\r\n}\r\n\r\n.rows {\r\n  margin-top: 30rpx;\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 20rpx;\r\n}\r\n\r\n.row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12rpx 0;\r\n}\r\n\r\n.row.small {\r\n  color: #666;\r\n}\r\n\r\n.label {\r\n  color: #666;\r\n  font-weight: 800;\r\n  font-size: 44rpx;\r\n}\r\n\r\n.value {\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.value.reduce {\r\n  color: #333;\r\n}\r\n\r\n.coupon-bar {\r\n  margin-top: 12rpx;\r\n  background: #ffe9ee;\r\n  color: #e1242b;\r\n  border-radius: 8rpx;\r\n  padding: 12rpx 16rpx;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.coupon-action {\r\n  color: #e1242b;\r\n}\r\n\r\n.row.total {\r\n  margin-top: 20rpx;\r\n  align-items: flex-end;\r\n}\r\n\r\n.row.total .label {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #000;\r\n  margin-bottom: 4rpx;\r\n}\r\n\r\n.total-box {\r\n  text-align: right;\r\n}\r\n\r\n.pay {\r\n  color: #000;\r\n  font-weight: 800;\r\n  font-size: 40rpx;\r\n}\r\n\r\n.total-reduce {\r\n  display: block;\r\n  color: #999;\r\n  font-size: 22rpx;\r\n}\r\n\r\n.sum-row {\r\n  margin-top: 12rpx;\r\n  color: #555;\r\n}\r\n\r\n.sum {\r\n  color: #e1251b;\r\n  font-weight: 600;\r\n}\r\n\r\n.sum-body, .sum-empty {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.summary-card .checkout {\r\n  margin-top: auto;\r\n  margin-bottom: 40rpx;\r\n  width: 100%;\r\n  background: #000;\r\n  color: #fff;\r\n  border-radius: 50rpx;\r\n  height: 90rpx;\r\n  line-height: 90rpx;\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  box-shadow: none;\r\n}\r\n\r\n.summary-card .checkout.disabled {\r\n  background: #ccc;\r\n  opacity: 1;\r\n  pointer-events: none;\r\n}\r\n\r\n.empty-ico {\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  border-radius: 16rpx;\r\n  background: #f8f8f8;\r\n  display: grid;\r\n  place-items: center;\r\n  color: #cfcfcf;\r\n  font-size: 60rpx;\r\n  margin: 20rpx auto;\r\n}\r\n\r\n.cart-aside {\r\n  position: sticky;\r\n  top: 20rpx;\r\n}\r\n\r\n.floating-back {\r\n  position: fixed;\r\n  left: 40rpx;\r\n  top: 40rpx;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  text-align: center;\r\n  /* border-radius: 50%; */\r\n  /* background: rgba(255,255,255,0.7); */\r\n  /* box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.12); */\r\n  color: #333;\r\n  font-size: 36rpx;\r\n  z-index: 999;\r\n  -webkit-backdrop-filter: blur(8px);\r\n  backdrop-filter: blur(8px);\r\n}\r\n\r\n/* \r\n@media (max-width: 1024px) {\r\n  .cart-grid {\r\n    grid-template-columns: 1fr 400rpx;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .cart-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .cart-aside {\r\n    order: -1;\r\n  }\r\n} \r\n*/\r\n/* #endif */\r\n\r\n/* æ–°ç‰ˆå•†å“å¡ç‰‡æ ·å¼ */\r\n.row-title {\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  overflow: hidden;\r\n  font-size: 26rpx;\r\n  line-height: 36rpx;\r\n  color: #333;\r\n}\r\n.tag {\r\n  display: inline-block;\r\n  background: #00c853;\r\n  color: #fff;\r\n  font-size: 20rpx;\r\n  padding: 0 6rpx;\r\n  border-radius: 4rpx;\r\n  margin-right: 8rpx;\r\n  vertical-align: middle;\r\n}\r\n.title { vertical-align: middle; }\r\n\r\n.row-attr {\r\n  background: #f7f7f7;\r\n  border-radius: 8rpx;\r\n  padding: 4rpx 12rpx;\r\n  margin-top: 12rpx;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  align-self: flex-start;\r\n  max-width: 100%;\r\n}\r\n.attr-txt { font-size: 22rpx; color: #666; margin-right: 8rpx; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\r\n.attr-icon { font-size: 20rpx; color: #999; }\r\n\r\n.row-main {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 16rpx;\r\n}\r\n.price-box { flex: 1; }\r\n.price { color: #e1251b; font-size: 32rpx; font-weight: 700; }\r\n\r\n.qty-box {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #f7f7f7;\r\n  border-radius: 6rpx;\r\n  height: 44rpx;\r\n}\r\n.qty-btn { width: 44rpx; height: 44rpx; display: flex; align-items: center; justify-content: center; color: #333; }\r\n.qty-num { padding: 0 12rpx; font-size: 24rpx; color: #333; }\r\n\r\n.actions-col {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  margin-left: 20rpx;\r\n}\r\n.act-txt { font-size: 22rpx; color: #666; margin-bottom: 8rpx; }\r\n.act-txt.del { margin-bottom: 0; }\r\n\r\n.row-service {\r\n  margin-top: 12rpx;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.svc-tag { color: #e1251b; font-size: 20rpx; border: 1rpx solid #e1251b; padding: 0 4rpx; border-radius: 4rpx; margin-right: 8rpx; }\r\n.svc-txt { color: #666; font-size: 22rpx; }\r\n\r\n/* è§„æ ¼å¼¹çª—æ ·å¼ */\r\n.spec-modal-mask {\r\n  position: fixed;\r\n  top: 0; left: 0; right: 0; bottom: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  z-index: 9999;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.spec-modal {\r\n  width: 600rpx;\r\n  background: #fff;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 80vh;\r\n}\r\n.spec-header {\r\n  padding: 24rpx;\r\n  display: flex;\r\n  gap: 20rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  position: relative;\r\n}\r\n.spec-img { width: 120rpx; height: 120rpx; border-radius: 8rpx; background: #f5f5f5; }\r\n.spec-info { display: flex; flex-direction: column; justify-content: center; }\r\n.spec-price { color: #e1251b; font-size: 32rpx; font-weight: 700; margin-bottom: 8rpx; }\r\n.spec-selected { color: #666; font-size: 24rpx; }\r\n.spec-close {\r\n  position: absolute;\r\n  top: 20rpx; right: 24rpx;\r\n  font-size: 36rpx; color: #000; padding: 10rpx;\r\n}\r\n.spec-body {\r\n  padding: 24rpx;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n}\r\n.spec-group { margin-bottom: 32rpx; }\r\n.spec-title { font-size: 28rpx; color: #333; font-weight: 700; margin-bottom: 16rpx; display: block; }\r\n.spec-list { display: flex; flex-wrap: wrap; gap: 16rpx; }\r\n.spec-opt {\r\n  padding: 10rpx 24rpx;\r\n  background: #f7f7f7;\r\n  border-radius: 8rpx;\r\n  font-size: 24rpx;\r\n  color: #333;\r\n  border: 1rpx solid transparent;\r\n}\r\n.spec-opt.active {\r\n  background: #fff5f5;\r\n  color: #e1251b;\r\n  border-color: #e1251b;\r\n}\r\n.spec-footer {\r\n  padding: 20rpx;\r\n  border-top: 1rpx solid #f0f0f0;\r\n  display: flex;\r\n  gap: 20rpx;\r\n}\r\n.spec-btn { flex: 1; font-size: 28rpx; border-radius: 999rpx; }\r\n.spec-btn.cancel { background: #fff; border: 1rpx solid #ddd; color: #333; }\r\n.spec-btn.confirm { background: #e1251b; color: #fff; border: none; }\r\n\r\n/* #ifdef H5 */\r\n.h5-row {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx 0;\r\n  border-bottom: 1rpx solid #f5f5f5;\r\n  justify-content: space-between;\r\n}\r\n.h5-row .chk {\r\n  margin-right: 20rpx;\r\n  flex-shrink: 0;\r\n  align-self: center;\r\n}\r\n.h5-row .cover {\r\n  width: 100rpx !important; /* Make image smaller */\r\n  height: 100rpx !important;\r\n  margin-right: 20rpx;\r\n  flex-shrink: 0;\r\n  align-self: center;\r\n}\r\n.h5-row .title {\r\n  flex: 1;\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  margin: 0 10rpx;\r\n  text-align: center;\r\n  align-self: center;\r\n}\r\n.h5-row .attr-txt {\r\n  flex: 1;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin: 0 10rpx;\r\n  text-align: center;\r\n  background: none;\r\n  padding: 0;\r\n  margin-top: 0;\r\n  align-self: center;\r\n}\r\n.h5-row .price {\r\n  width: 140rpx;\r\n  font-size: 36rpx;\r\n  font-weight: 700;\r\n  color: #333;\r\n  text-align: center;\r\n  flex-shrink: 0;\r\n  align-self: center;\r\n}\r\n.h5-row .qty-box {\r\n  margin: 0 20rpx;\r\n  flex-shrink: 0;\r\n  align-self: center;\r\n  height: 60rpx;\r\n}\r\n.h5-row .qty-box .qty-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  font-size: 32rpx;\r\n}\r\n.h5-row .del-btn {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  cursor: pointer;\r\n  width: 80rpx;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 12rpx;\r\n  right: 20rpx;\r\n  z-index: 7;\r\n}\r\n.h5-row .del-btn:hover {\r\n  color: #e1251b;\r\n}\r\n/* #endif */\r\n\r\n/* #ifndef H5 */\r\n.mp-address-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 24rpx 20rpx;\r\n  /* background: #fff; */\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n.bar-left { display: flex; align-items: center; gap: 12rpx; }\r\n.addr-icon { font-size: 28rpx; color: #000; }\r\n.bar-info { display: flex; flex-direction: column; font-size: 24rpx; color: #555; }\r\n.bar-line { white-space: nowrap; }\r\n.bar-btn { background: #fff; border: 1rpx solid #ddd; color: #333; border-radius: 999rpx; }\r\n.mp-room {\r\n  margin: 0 30rpx;\r\n  background: #ddd;\r\n  color: #333;\r\n  padding: 16rpx;\r\n  border-radius: 8rpx;\r\n  display: block;\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.mp-qty-box {\r\n  height: 60rpx;\r\n  background: #f8f8f8;\r\n  border-radius: 8rpx;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.mp-qty-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.mp-qty-box .count {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin: 0 10rpx;\r\n}\r\n\r\n.act-txt.del {\r\n  font-size: 32rpx;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.price { color: #000; }\r\n.sum { color: #000; }\r\n.spec-price { color: #000; }\r\n.price-box .price { color: #000; }\r\n/* #endif */\r\n/* #ifdef MP-WEIXIN */\r\n.page { position: relative; }\r\n.page-bg {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: -1;\r\n  pointer-events: none;\r\n}\r\n/* #endif */\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/HP/Desktop/LiShop/LiShop/pages/cart/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getAddresses","addAddress","getCartItems","getCartItemsByIDs","updateCartItem","deleteCartItem","clearCart","createOrderByIds","_a","getRooms"],"mappings":"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"}