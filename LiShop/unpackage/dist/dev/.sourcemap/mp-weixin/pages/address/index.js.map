{"version":3,"file":"index.js","sources":["pages/address/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkcmVzcy9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"page address-list-page\">\r\n    <Skeleton :loading=\"loading\" :showTitle=\"true\" />\r\n    <view class=\"address-list\" v-if=\"addressList.length > 0\">\r\n      <view class=\"address-item\" v-for=\"(item, index) in addressList\" :key=\"item.addresses_id\"\r\n        @click=\"editAddress(item.addresses_id)\">\r\n        <view class=\"info\">\r\n          <view class=\"user-info\">\r\n            <text class=\"name\">{{ item.receiver }}</text>\r\n            <text class=\"phone\">{{ item.phone }}</text>\r\n            <text v-if=\"item.is_default === 1\" class=\"tag\">默认</text>\r\n          </view>\r\n          <view class=\"address-detail\">\r\n            {{ item.province }}{{ item.city }}{{ item.district }}{{ item.detail_address }}\r\n          </view>\r\n        </view>\r\n        <view class=\"actions\">\r\n          <text class=\"btn-edit\" @click.stop=\"editAddress(item.addresses_id)\">编辑</text>\r\n          <text class=\"btn-delete\" @click.stop=\"handleDelete(item.addresses_id)\">删除</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-else class=\"empty-state\">\r\n      <text>暂无收货地址</text>\r\n    </view>\r\n\r\n    <view class=\"footer\">\r\n      <button class=\"btn-add\" @click=\"addAddress\">新建收货地址</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport Skeleton from '@/components/Skeleton.vue'\r\nimport { getAddresses, deleteAddress } from '../../api/index.js'\r\n\r\nexport default {\r\n  components: { Skeleton },\r\n  data() {\r\n    return {\r\n      addressList: [],\r\n      loading: true\r\n    }\r\n  },\r\n  onShow() {\r\n    this.loadAddresses()\r\n  },\r\n  methods: {\r\n    loadAddresses() {\r\n      this.loading = true\r\n      const u = uni.getStorageSync('user')\r\n      const token = (u && (u.token || (u.data && u.data.token))) || ''\r\n      if (!token) {\r\n        uni.showToast({ title: '请先登录', icon: 'none' })\r\n        setTimeout(() => uni.navigateTo({ url: '/pages/login/index' }), 1500)\r\n        this.loading = false\r\n        return\r\n      }\r\n\r\n      getAddresses({ token }).then(res => {\r\n        if (res && res.success) {\r\n          this.addressList = res.data.items || []\r\n        }\r\n      }).catch(err => {\r\n        console.error(err)\r\n        uni.showToast({ title: '获取地址失败', icon: 'none' })\r\n      }).finally(() => { this.loading = false })\r\n    },\r\n    addAddress() {\r\n      uni.navigateTo({ url: '/pages/address/edit' })\r\n    },\r\n    editAddress(id) {\r\n      uni.navigateTo({ url: `/pages/address/edit?id=${id}` })\r\n    },\r\n    handleDelete(id) {\r\n      uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除该地址吗？',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            const u = uni.getStorageSync('user')\r\n            const token = (u && (u.token || (u.data && u.data.token))) || ''\r\n            deleteAddress({ addresses_id: id, token }).then(resp => {\r\n              if (resp && resp.success) {\r\n                uni.showToast({ title: '删除成功', icon: 'success' })\r\n                this.loadAddresses()\r\n              } else {\r\n                uni.showToast({ title: resp.message || '删除失败', icon: 'none' })\r\n              }\r\n            }).catch(err => {\r\n              uni.showToast({ title: '删除失败', icon: 'none' })\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.page {\r\n  padding-bottom: 100rpx;\r\n  background-color: #f7f7f7;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* #ifdef MP-WEIXIN */\r\n.page {\r\n  background: url('/static/product_detail_background.jpg') no-repeat center center fixed;\r\n  background-size: cover;\r\n}\r\n/* #endif */\r\n\r\n.address-list {\r\n  padding: 20rpx;\r\n}\r\n\r\n.address-item {\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.info {\r\n  flex: 1;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.name {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.phone {\r\n  color: #666;\r\n  font-size: 28rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.tag {\r\n  background-color: #e1251b;\r\n  color: #fff;\r\n  font-size: 20rpx;\r\n  padding: 2rpx 10rpx;\r\n  border-radius: 4rpx;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.address-detail {\r\n  color: #333;\r\n  font-size: 28rpx;\r\n  line-height: 1.4;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 20rpx;\r\n  align-items: flex-end;\r\n}\r\n\r\n.btn-edit,\r\n.btn-delete {\r\n  display: inline-block;\r\n  padding: 10rpx 30rpx;\r\n  border-radius: 30rpx;\r\n  border: 1rpx solid #ccc;\r\n  margin-bottom: 10rpx;\r\n  text-align: center;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.btn-edit {\r\n  color: #666;\r\n  border-color: #ddd;\r\n}\r\n\r\n.btn-delete {\r\n  color: #e1251b;\r\n  border-color: #e1251b;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.empty-state {\r\n  padding: 100rpx;\r\n  text-align: center;\r\n  color: #999;\r\n}\r\n\r\n.footer {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 20rpx;\r\n  background-color: #fff;\r\n  box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.btn-add {\r\n  background-color: #e1251b;\r\n  color: #fff;\r\n  border-radius: 40rpx;\r\n  font-size: 32rpx;\r\n}\r\n\r\n/* #ifdef H5 */\r\n.address-list-page {\r\n  padding-left: 600rpx;\r\n  padding-right: 600rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.footer {\r\n  padding-left: 170rpx;\r\n  /* 150 + 20 original */\r\n  padding-right: 170rpx;\r\n}\r\n\r\n.btn-add {\r\n  width: 30%;\r\n  /* Reduce width */\r\n  margin: 0 auto;\r\n}\r\n\r\n/* #endif */\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/HP/Desktop/LiShop/LiShop/pages/address/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getAddresses","deleteAddress"],"mappings":";;;AAiCA,MAAO,WAAU,MAAW;AAG5B,MAAK,YAAU;AAAA,EACb,YAAY,EAAE,SAAU;AAAA,EACxB,OAAO;AACL,WAAO;AAAA,MACL,aAAa,CAAE;AAAA,MACf,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,cAAc;AAAA,EACpB;AAAA,EACD,SAAS;AAAA,IACP,gBAAgB;AACd,WAAK,UAAU;AACf,YAAM,IAAIA,cAAAA,MAAI,eAAe,MAAM;AACnC,YAAM,QAAS,MAAM,EAAE,SAAU,EAAE,QAAQ,EAAE,KAAK,UAAY;AAC9D,UAAI,CAAC,OAAO;AACVA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC7C,mBAAW,MAAMA,cAAAA,MAAI,WAAW,EAAE,KAAK,qBAAmB,CAAG,GAAG,IAAI;AACpE,aAAK,UAAU;AACf;AAAA,MACF;AAEAC,gBAAAA,aAAa,EAAE,MAAM,CAAC,EAAE,KAAK,SAAO;AAClC,YAAI,OAAO,IAAI,SAAS;AACtB,eAAK,cAAc,IAAI,KAAK,SAAS,CAAC;AAAA,QACxC;AAAA,MACF,CAAC,EAAE,MAAM,SAAO;AACdD,sBAAAA,MAAA,MAAA,SAAA,iCAAc,GAAG;AACjBA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAA,MACjD,CAAC,EAAE,QAAQ,MAAM;AAAE,aAAK,UAAU;AAAA,OAAO;AAAA,IAC1C;AAAA,IACD,aAAa;AACXA,oBAAAA,MAAI,WAAW,EAAE,KAAK,uBAAuB;AAAA,IAC9C;AAAA,IACD,YAAY,IAAI;AACdA,oBAAG,MAAC,WAAW,EAAE,KAAK,0BAA0B,EAAE,IAAI;AAAA,IACvD;AAAA,IACD,aAAa,IAAI;AACfA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,kBAAM,IAAIA,cAAAA,MAAI,eAAe,MAAM;AACnC,kBAAM,QAAS,MAAM,EAAE,SAAU,EAAE,QAAQ,EAAE,KAAK,UAAY;AAC9DE,sBAAa,cAAC,EAAE,cAAc,IAAI,MAAI,CAAG,EAAE,KAAK,UAAQ;AACtD,kBAAI,QAAQ,KAAK,SAAS;AACxBF,8BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,WAAW;AAChD,qBAAK,cAAc;AAAA,qBACd;AACLA,oCAAI,UAAU,EAAE,OAAO,KAAK,WAAW,QAAQ,MAAM,QAAQ;AAAA,cAC/D;AAAA,YACF,CAAC,EAAE,MAAM,SAAO;AACdA,4BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAA,aAC9C;AAAA,UACH;AAAA,QACF;AAAA,OACD;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChGA,GAAG,WAAW,eAAe;"}