{"version":3,"file":"index.js","sources":["pages/order/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <Skeleton :loading=\"loading\" :showTitle=\"true\" />\r\n    <!-- #ifdef MP-WEIXIN -->\r\n    <image class=\"page-bg\" src=\"/static/product_detail_background.jpg\" mode=\"aspectFill\" />\r\n    <!-- #endif -->\r\n    <!-- 顶部导航 -->\r\n    <view id=\"og-order-tabs\" class=\"nav\" v-if=\"!order\">\r\n      <view class=\"nav-item\" :class=\"{ active: activeTab === 'all' }\" @click=\"switchTab('all')\">全部订单</view>\r\n      <view class=\"nav-item\" :class=\"{ active: activeTab === 'pending_payment' }\" @click=\"switchTab('pending_payment')\">\r\n        待付款</view>\r\n      <view class=\"nav-item\" :class=\"{ active: activeTab === 'pending_shipment' }\"\r\n        @click=\"switchTab('pending_shipment')\">待发货</view>\r\n      <view class=\"nav-item\" :class=\"{ active: activeTab === 'pending_receipt' }\" @click=\"switchTab('pending_receipt')\">\r\n        待收货</view>\r\n      <!-- <view class=\"nav-item\" :class=\"{ active: activeTab === 'history' }\" @click=\"switchTab('history')\">历史订单</view> -->\r\n    </view>\r\n\r\n    <!-- 订单详情 -->\r\n    <view class=\"order\" v-if=\"order\">\r\n      <view class=\"header\">\r\n        <text class=\"title\">订单号：{{ order.orderNo || order.id }}</text>\r\n        <text class=\"log-title\">物流信息</text>\r\n        <text class=\"time\" v-if=\"order.createdAt\">下单时间：{{ formatTime(order.createdAt) }}</text>\r\n        <!-- Total moved to footer for H5 and MP -->\r\n        <!-- #ifndef H5 -->\r\n        <!-- <text class=\"total\">合计：¥{{ order.total.toFixed(2) }}</text> -->\r\n        <!-- #endif -->\r\n      </view>\r\n      <view class=\"logistics\">\r\n        <view class=\"log-header\">\r\n          <view class=\"waybill\" v-if=\"order.waybillNo\">\r\n            <text>运单号：{{ order.waybillNo }}</text>\r\n            <button size=\"mini\" class=\"copy\" @click=\"copyWaybill(order.waybillNo)\">复制运单号</button>\r\n          </view>\r\n\r\n        </view>\r\n        <view v-if=\"(order.tracking || []).length\">\r\n          <view class=\"log-item\"\r\n            v-for=\"(ev, i) in (logisticsCollapsed ? (order.tracking || []).slice(0, 1) : order.tracking)\" :key=\"i\">\r\n            <view class=\"dot\">•</view>\r\n            <view class=\"log-meta\">\r\n              <view class=\"log-row\">\r\n                <text class=\"log-status\">{{ ev.status }}</text>\r\n                <text class=\"log-time\">{{ formatTime(ev.time) }}</text>\r\n              </view>\r\n              <text class=\"log-desc\">{{ ev.desc }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view v-else class=\"log-empty\">{{ order.trackingMessage || '暂无物流信息' }}</view>\r\n        <view class=\"log-toggle-center\">\r\n          <text class=\"toggle-icon\" @click=\"toggleLogistics\">{{ logisticsCollapsed ? '展开更多物流明细 ▼' : '收起物流明细 ▲' }}</text>\r\n        </view>\r\n        <view v-if=\"order.mapUrl\" class=\"logistics-map\">\r\n          <view v-if=\"isH5\" class=\"map-frame\">\r\n            <iframe class=\"map-iframe\" :src=\"order.mapUrl\" frameborder=\"0\"></iframe>\r\n          </view>\r\n          <!-- #ifdef MP-WEIXIN -->\r\n          <view v-else>\r\n            <map v-if=\"hasMapCoords(order.tracking)\" class=\"map-canvas\" :latitude=\"mapCenter(order.tracking).latitude\"\r\n              :longitude=\"mapCenter(order.tracking).longitude\" :markers=\"mapMarkers(order.tracking)\"\r\n              :polyline=\"mapPolyline(order.tracking)\" scale=\"12\"></map>\r\n            <image v-else-if=\"isImageLink(order.mapUrl)\" class=\"map-image\"\r\n              :src=\"mapError ? '/static/logo.png' : order.mapUrl\" mode=\"widthFix\" @click=\"openMap(order.mapUrl)\"\r\n              @error=\"onMapError\" />\r\n            <view v-else class=\"map-link-row\">\r\n              <text class=\"map-link\" @click=\"openMap(order.mapUrl)\">查看物流地图</text>\r\n            </view>\r\n          </view>\r\n          <!-- #endif -->\r\n          <!-- #ifndef MP-WEIXIN -->\r\n          <!-- <view v-else class=\"map-link-row\">\r\n            <text class=\"map-link\" @click=\"openMap(order.mapUrl)\">查看物流地图</text>\r\n          </view> -->\r\n          <!-- #endif -->\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"rooms\">\r\n        <view class=\"room\" v-for=\"r in order.rooms\" :key=\"r.name\">\r\n          <view class=\"room-hd\">\r\n            <text class=\"room-name\">{{ r.name }}</text>\r\n            <text class=\"room-total\">小计：¥{{ r.roomTotal.toFixed(2) }}</text>\r\n          </view>\r\n          <view class=\"items\">\r\n            <view class=\"item\" v-for=\"x in r.items\" :key=\"x.id + '_' + x.specLength + '_' + x.specTemp\">\r\n              <view class=\"meta\">\r\n                <text class=\"title\">{{ x.available_product_name }}</text>\r\n                <text class=\"spec\">型号：{{ x.title }}｜色温：{{ x.specTemp || '-' }}｜长度：{{ x.specLength || '-' }}</text>\r\n              </view>\r\n              <view class=\"price-row\">\r\n                <text class=\"price\">¥{{ x.price.toFixed(2) }}</text>\r\n                <text>× {{ x.quantity }}</text>\r\n                <!-- #ifndef H5 -->\r\n                <!-- <text>＝ ¥{{ (x.price * x.quantity).toFixed(2) }}</text> -->\r\n                <!-- #endif -->\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"ops\">\r\n        <text class=\"total-text\">合计：¥{{ order.total.toFixed(2) }}</text>\r\n        <view class=\"btns\">\r\n          <button class=\"btn-action\" v-if=\"isPendingReceipt(order.status)\"\r\n            @click=\"confirmReceipt(order.id)\">确认收货</button>\r\n          <button class=\"btn-action\" v-if=\"['pending_payment', 'pending_shipment'].includes(order.status)\"\r\n            @click=\"handleCancelOrder(order.id)\">取消订单</button><button class=\"btn\"\r\n            @click=\"exportExcel(order)\">导出Excel</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 订单列表 -->\r\n    <view class=\"orders\" v-else>\r\n      <view v-if=\"orders.length\" id=\"og-order-list\" class=\"orders-list\">\r\n        <view class=\"order-card\" v-for=\"o in orders\" :key=\"o.id\">\r\n          <view class=\"card-hd\">\r\n            <text class=\"id\">订单号：{{ o.orderNo || o.id }}</text>\r\n            <text class=\"time\" v-if=\"o.createdAt\">下单时间：{{ formatTime(o.createdAt) }}</text>\r\n            <text class=\"total\">¥{{ o.total.toFixed(2) }}</text>\r\n          </view>\r\n          <view class=\"card-body\">\r\n            <view class=\"thumbs\">\r\n              <image v-for=\"(src, i) in firstThumbs(o)\" :key=\"i\" :src=\"src\" mode=\"aspectFill\" class=\"thumb\" />\r\n            </view>\r\n            <view class=\"actions\">\r\n              <button size=\"mini\" class=\"btn-action\" v-if=\"o.status === 'pending_receipt'\"\r\n                @click.stop=\"confirmReceipt(o.orderNo || o.id)\">确认收货</button>\r\n              <button size=\"mini\" class=\"btn-action\" v-if=\"['pending_payment', 'pending_shipment'].includes(o.status)\"\r\n                @click.stop=\"handleCancelOrder(o.orderNo || o.id)\">取消订单</button>\r\n              <button size=\"mini\" class=\"btn-action primary\" @click.stop=\"openDetail(o.id, o.status)\">查看详情</button>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view v-else class=\"empty\">暂无订单</view>\r\n    </view>\r\n    <!-- #ifdef H5 -->\r\n    <FloatingNav />\r\n    <view class=\"floating-back\" @click=\"goBack\">←</view>\r\n    <!-- #endif -->\r\n    <OnboardingGuide\r\n      v-if=\"showOnboarding\"\r\n      :steps=\"onboardingSteps\"\r\n      :targets=\"onboardingRects\"\r\n      :initialIndex=\"onboardingIndex\"\r\n      @advance=\"handleOnboardingNext\"\r\n      @back=\"handleOnboardingPrev\"\r\n      @close=\"closeOnboarding\"\r\n    />\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getPendingPaymentOrders, getPendingShipmentOrders, getPendingReceiptOrders, getHistoryOrders, getOrderDetail, confirmOrderReceipt, cancelOrder, exportOrderExcel } from '../../api/index.js'\r\nimport FloatingNav from '../../components/FloatingNav.vue'\r\nimport Skeleton from '@/components/Skeleton.vue'\r\nimport OnboardingGuide from '@/components/OnboardingGuide.vue'\r\n\r\nexport default {\r\n  components: { FloatingNav, Skeleton, OnboardingGuide },\r\n  data() { return { order: null, orders: [], activeTab: 'all', loading: true, logisticsCollapsed: true, isH5: false, mapError: false, detailStatusHint: '', showOnboarding: false, onboardingRects: [], onboardingSteps: [], onboardingIndex: 0 } },\r\n  onLoad(query) {\r\n    const id = query?.id\r\n    try { this.isH5 = typeof window !== 'undefined' } catch (e) { this.isH5 = false }\r\n    const status = query?.status\r\n    if (status) { this.detailStatusHint = String(status) }\r\n    if (id) {\r\n      this.fetchDetail(id)\r\n    } else {\r\n      this.fetchOrders()\r\n    }\r\n  },\r\n  onShow() {\r\n    try {\r\n      if (this.isH5) {\r\n        const cur = (typeof location !== 'undefined' && location.href) ? location.href : ''\r\n        const ref = (typeof document !== 'undefined' && document.referrer) ? document.referrer : ''\r\n        if (ref && (!cur || ref !== cur)) {\r\n          try { uni.setStorageSync('last_order_back', ref) } catch (e) { }\r\n        }\r\n      }\r\n    } catch (e) { }\r\n    try {\r\n      const cont = !!uni.getStorageSync('onboarding_continue')\r\n      const sel = uni.getStorageSync('onboarding_target_selector') || ''\r\n      const idx = Number(uni.getStorageSync('onboarding_index') || 0)\r\n      const stepsStored = uni.getStorageSync('onboarding_steps') || []\r\n      if (cont && sel) {\r\n        if (Array.isArray(stepsStored) && stepsStored.length) this.onboardingSteps = stepsStored\r\n        const safeIdx = Math.max(0, Math.min(idx, this.onboardingSteps.length - 1))\r\n        this.onboardingIndex = safeIdx\r\n        this.$nextTick(() => {\r\n          this.refreshOnboardingRect(sel)\r\n        })\r\n      }\r\n    } catch (e) {}\r\n  },\r\n  methods: {\r\n    refreshOnboardingRect(sel) {\r\n      const total = this.onboardingSteps.length || 0\r\n      const arr = new Array(total).fill(null)\r\n      if (this.isH5) {\r\n        const el = typeof document !== 'undefined' ? document.querySelector(sel) : null\r\n        if (el) {\r\n          const r = el.getBoundingClientRect()\r\n          arr[this.onboardingIndex] = { left: r.left, top: r.top, width: r.width, height: r.height }\r\n          this.onboardingRects = arr\r\n          this.showOnboarding = true\r\n        }\r\n      } else {\r\n        const tryMp = (attempt = 0) => {\r\n          const q = uni.createSelectorQuery().in(this)\r\n          q.select(sel).boundingClientRect()\r\n          q.exec(res => {\r\n            const r = (res || [])[0]\r\n            if (r) {\r\n              arr[this.onboardingIndex] = { left: r.left, top: r.top, width: r.width, height: r.height }\r\n              this.onboardingRects = arr\r\n              this.showOnboarding = true\r\n            } else if (attempt < 3) {\r\n              setTimeout(() => tryMp(attempt + 1), 140)\r\n            }\r\n          })\r\n        }\r\n        tryMp(0)\r\n      }\r\n    },\r\n    handleOnboardingNext(nextIndex) {\r\n      const idx = Number(nextIndex || 0)\r\n      this.onboardingIndex = idx\r\n      try {\r\n        uni.setStorageSync('onboarding_index', idx)\r\n        if (Array.isArray(this.onboardingSteps) && this.onboardingSteps.length) {\r\n          uni.setStorageSync('onboarding_steps', this.onboardingSteps)\r\n        }\r\n        uni.setStorageSync('onboarding_continue', true)\r\n      } catch (e) {}\r\n      const isH5 = typeof window !== 'undefined'\r\n      if (isH5) {\r\n        if (idx <= 4) {\r\n          const map = ['#og-search', '#og-cate', '#og-banner', '#og-guess', '#og-quick']\r\n          const sel = map[idx] || '#og-search'\r\n          uni.setStorageSync('onboarding_target_selector', sel)\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n          else uni.navigateTo({ url: '/pages/home/index' })\r\n          return\r\n        }\r\n        if (idx === 5) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-product-add')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 6) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-room-modal-list')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 7) {\r\n          this.$nextTick(() => { this.refreshOnboardingRect('#og-order-tabs') })\r\n          return\r\n        }\r\n        if (idx === 8) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 9) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 10) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n      } else {\r\n        if (idx <= 3) {\r\n          const map = ['#og-search', '#og-mp-cate', '#og-banner', '#og-mp-guess']\r\n          const sel = map[idx] || '#og-search'\r\n          uni.setStorageSync('onboarding_target_selector', sel)\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n          else uni.navigateTo({ url: '/pages/home/index' })\r\n          return\r\n        }\r\n        if (idx === 4) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-product-add')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 5) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-room-modal-list')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 6) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 7) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 8) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n      }\r\n    },\r\n    handleOnboardingPrev(prevIndex) {\r\n      const idx = Number(prevIndex || 0)\r\n      if (idx < 0) return\r\n      this.onboardingIndex = idx\r\n      try {\r\n        uni.setStorageSync('onboarding_index', idx)\r\n        uni.setStorageSync('onboarding_continue', true)\r\n      } catch (e) {}\r\n      const isH5 = typeof window !== 'undefined'\r\n      if (isH5) {\r\n        if (idx <= 4) {\r\n          const map = ['#og-search', '#og-cate', '#og-banner', '#og-guess', '#og-quick']\r\n          const sel = map[idx] || '#og-search'\r\n          uni.setStorageSync('onboarding_target_selector', sel)\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n          else uni.navigateTo({ url: '/pages/home/index' })\r\n          return\r\n        }\r\n        if (idx === 5) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-product-add')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 6) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-room-modal-list')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 7) {\r\n          this.$nextTick(() => { this.refreshOnboardingRect('#og-order-tabs') })\r\n          return\r\n        }\r\n        if (idx === 8) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 9) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 10) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n      } else {\r\n        if (idx <= 3) {\r\n          const map = ['#og-search', '#og-mp-cate', '#og-banner', '#og-mp-guess']\r\n          const sel = map[idx] || '#og-search'\r\n          uni.setStorageSync('onboarding_target_selector', sel)\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/home/index' })\r\n          else uni.navigateTo({ url: '/pages/home/index' })\r\n          return\r\n        }\r\n        if (idx === 4) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-product-add')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 5) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-room-modal-list')\r\n          uni.navigateTo({ url: '/pages/product/index' })\r\n          return\r\n        }\r\n        if (idx === 6) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-info')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 7) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-menu')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n        if (idx === 8) {\r\n          uni.setStorageSync('onboarding_target_selector', '#og-profile-addr')\r\n          if (uni.switchTab) uni.switchTab({ url: '/pages/profile/index' })\r\n          else uni.navigateTo({ url: '/pages/profile/index' })\r\n          return\r\n        }\r\n      }\r\n    },\r\n    isImageLink(url) {\r\n      try { return /\\.(png|jpg|jpeg|gif|bmp|webp)(\\?.*)?$/i.test(String(url || '')) } catch (e) { return false }\r\n    },\r\n    onMapError() { this.mapError = true; try { uni.showToast({ title: '物流地图加载失败', icon: 'none' }) } catch (e) { } },\r\n    isPendingReceipt(status) {\r\n      try {\r\n        const s = String(status || '')\r\n        return s === 'pending_receipt' || s.includes('待收货')\r\n      } catch (e) { return false }\r\n    },\r\n    formatTime(t) {\r\n      try {\r\n        let dateStr = t;\r\n        if (typeof dateStr === 'string') {\r\n          dateStr = dateStr.replace(/-/g, '/')\r\n        }\r\n        return new Date(dateStr).toLocaleString()\r\n      } catch { return t }\r\n    },\r\n    copyWaybill(no) { try { uni.setClipboardData({ data: String(no) }); uni.showToast({ title: '已复制运单号', icon: 'success' }) } catch (e) { } },\r\n    openDetail(id, status) {\r\n      const qs = status ? ('&status=' + encodeURIComponent(status)) : ''\r\n      uni.navigateTo({ url: '/pages/order/index?id=' + id + qs })\r\n    },\r\n    firstThumbs(o) {\r\n      try {\r\n        const imgs = []\r\n        o.rooms.forEach(r => r.items.forEach(x => imgs.push(x.image || '/static/logo.png')))\r\n        return imgs.slice(0, 2)\r\n      } catch { return [] }\r\n    },\r\n    async exportExcel(order) {\r\n      try {\r\n        uni.showLoading({ title: '请求导出' })\r\n        const res = await exportOrderExcel({ order_id: order.id })\r\n        uni.hideLoading()\r\n        if (res.success) {\r\n          const msg = res.message || '导出请求已发送'\r\n          uni.showToast({ title: msg, icon: 'success' })\r\n          // #ifdef H5\r\n          if (res.blob) {\r\n            try {\r\n              const url = URL.createObjectURL(res.blob)\r\n              const a = document.createElement('a')\r\n              a.href = url\r\n              a.download = res.filename || '订单导出.xlsx'\r\n              document.body.appendChild(a)\r\n              a.click()\r\n              a.remove()\r\n              try { URL.revokeObjectURL(url) } catch (e) { }\r\n              return\r\n            } catch (e) { }\r\n          }\r\n          // #endif\r\n          // #ifndef H5\r\n          if (res.blob) {\r\n            try {\r\n              const fs = (typeof wx !== 'undefined' && typeof wx.getFileSystemManager === 'function') ? wx.getFileSystemManager() : null\r\n              const base = (typeof wx !== 'undefined' && wx.env && wx.env.USER_DATA_PATH) ? wx.env.USER_DATA_PATH : ((uni && uni.env && uni.env.USER_DATA_PATH) ? uni.env.USER_DATA_PATH : '')\r\n              const fname = res.filename || '订单导出.xlsx'\r\n              const filePath = base ? (base + '/' + fname) : fname\r\n              if (fs && filePath) {\r\n                fs.writeFile({\r\n                  filePath,\r\n                  data: res.blob,\r\n                  success: () => {\r\n                    uni.showToast({ title: '文件已保存', icon: 'success' })\r\n                    try { if (typeof wx !== 'undefined' && typeof wx.openDocument === 'function') wx.openDocument({ filePath }) } catch (e) { }\r\n                  },\r\n                  fail: () => {\r\n                    uni.showToast({ title: '文件保存失败', icon: 'none' })\r\n                  }\r\n                })\r\n                return\r\n              }\r\n            } catch (e) { }\r\n          }\r\n          // #endif\r\n          const possibleUrl = (res && res.url) || (res && res.data && res.data.url) || (res && res.data && typeof res.data === 'string' ? res.data : '')\r\n          if (possibleUrl && typeof possibleUrl === 'string') {\r\n            const url = possibleUrl\r\n            // #ifdef H5\r\n            try { window.open(url, '_blank') } catch (e) { window.location.href = url }\r\n            // #endif\r\n            // #ifndef H5\r\n            uni.setClipboardData({ data: url, success: () => uni.showToast({ title: '下载链接已复制', icon: 'none' }) })\r\n            // #endif\r\n          } else {\r\n            uni.showToast({ title: '未获取到导出链接', icon: 'none' })\r\n          }\r\n        } else {\r\n          uni.showToast({ title: res.message || '导出失败', icon: 'none' })\r\n        }\r\n      } catch (e) {\r\n        uni.hideLoading()\r\n        uni.showToast({ title: '导出出错', icon: 'none' })\r\n      }\r\n    },\r\n\r\n    mapApiOrderToLocal(apiOrder) {\r\n      const roomsMap = {};\r\n      (apiOrder.items || []).forEach(item => {\r\n        const roomName = item.room_name || '默认房间';\r\n        if (!roomsMap[roomName]) {\r\n          roomsMap[roomName] = { name: roomName, roomTotal: 0, items: [] };\r\n        }\r\n        const price = Number(item.price || 0);\r\n        const localItem = {\r\n          title: item.product_name || item.available_product_name,\r\n          available_product_name: item.available_product_name || '',\r\n          id: item.product_id || item.available_product_id,\r\n          specTemp: (item.color_temperature && item.color_temperature !== 'None' && item.color_temperature !== '无') ? item.color_temperature : '',\r\n          specLength: item.length,\r\n          price: price,\r\n          quantity: item.quantity,\r\n          image: item.main_picture\r\n        };\r\n        roomsMap[roomName].items.push(localItem);\r\n        roomsMap[roomName].roomTotal += (price * (item.quantity || 0));\r\n      });\r\n      const tracking = [];\r\n      let rawList = [];\r\n      let trackingMessage = '';\r\n      let mapUrl = ''\r\n      try {\r\n        const last = apiOrder && apiOrder.logistics_data && apiOrder.logistics_data.lastResult\r\n        rawList = last && Array.isArray(last.data) ? last.data : [];\r\n        trackingMessage = (last && (last.message || last.msg)) || (apiOrder && apiOrder.logistics_message) || ''\r\n        mapUrl = (last && last.trailUrl) ? String(last.trailUrl).replace(/`/g, '').trim() : ''\r\n      } catch (e) { rawList = [] }\r\n      rawList.forEach(ev => {\r\n        let lat = null\r\n        let lng = null\r\n        const ac = ev.areaCenter || ev.area_center || ''\r\n        if (ac) {\r\n          const parts = String(ac).split(',')\r\n          if (parts.length >= 2) {\r\n            lng = Number(parts[0])\r\n            lat = Number(parts[1])\r\n          }\r\n        }\r\n        tracking.push({\r\n          status: ev.status || '',\r\n          desc: ev.context || '',\r\n          time: ev.ftime || ev.time || '',\r\n          place: ev.areaName || ev.location || '',\r\n          lat: lat,\r\n          lng: lng\r\n        })\r\n      })\r\n      return {\r\n        id: apiOrder.order_id,\r\n        orderNo: apiOrder.order_id,\r\n        createdAt: null,\r\n        total: Number(apiOrder.total_price || 0),\r\n        waybillNo: (apiOrder && apiOrder.tracking_number) || (apiOrder && apiOrder.logistics_data && apiOrder.logistics_data.lastResult && apiOrder.logistics_data.lastResult.nu) || '',\r\n        tracking: tracking,\r\n        trackingMessage: tracking.length ? '' : (trackingMessage || ''),\r\n        mapUrl: mapUrl,\r\n        status: apiOrder.status || 'unknown',\r\n        rooms: Object.values(roomsMap)\r\n      };\r\n    },\r\n    switchTab(tab) {\r\n      this.activeTab = tab\r\n      this.fetchOrders()\r\n    },\r\n    async fetchOrders() {\r\n      this.loading = true\r\n      this.orders = []\r\n\r\n      const allEndpoints = [\r\n        { fn: getPendingPaymentOrders, status: 'pending_payment' },\r\n        { fn: getPendingShipmentOrders, status: 'pending_shipment' },\r\n        { fn: getPendingReceiptOrders, status: 'pending_receipt' },\r\n        { fn: getHistoryOrders, status: '' }\r\n      ]\r\n\r\n      let endpoints = []\r\n      if (this.activeTab === 'all') {\r\n        endpoints = allEndpoints\r\n      } else {\r\n        const map = {\r\n          'pending_payment': { fn: getPendingPaymentOrders, status: 'pending_payment' },\r\n          'pending_shipment': { fn: getPendingShipmentOrders, status: 'pending_shipment' },\r\n          'pending_receipt': { fn: getPendingReceiptOrders, status: 'pending_receipt' },\r\n          'history': { fn: getHistoryOrders, status: '' }\r\n        }\r\n        if (map[this.activeTab]) endpoints = [map[this.activeTab]]\r\n      }\r\n\r\n      const seenIds = new Set()\r\n      const allOrders = []\r\n      for (const { fn, status } of endpoints) {\r\n        try {\r\n          const res = await fn()\r\n          if (res.success && res.data && res.data.orders) {\r\n            res.data.orders.forEach(o => {\r\n              if (!seenIds.has(o.order_id)) {\r\n                seenIds.add(o.order_id)\r\n                if (status && !o.status) o.status = status\r\n                allOrders.push(this.mapApiOrderToLocal(o))\r\n              }\r\n            })\r\n          }\r\n        } catch (e) { }\r\n      }\r\n      this.orders = allOrders\r\n      this.loading = false\r\n    },\r\n    async fetchDetail(id) {\r\n      this.loading = true\r\n      try {\r\n        const res = await getOrderDetail({ order_id: id })\r\n        if (res.success && res.data) {\r\n          this.order = this.mapApiOrderToLocal(res.data)\r\n          if (this.order && (!this.order.status || this.order.status === 'unknown') && this.detailStatusHint) {\r\n            this.order.status = this.detailStatusHint\r\n          }\r\n        }\r\n      } catch (e) { }\r\n      this.loading = false\r\n    },\r\n    goHome() {\r\n      if (uni && uni.switchTab) { uni.switchTab({ url: '/pages/home/index' }); return }\r\n      if (uni && uni.navigateTo) { uni.navigateTo({ url: '/pages/home/index' }); return }\r\n    },\r\n    goBack() {\r\n      if (this.order) {\r\n        try { uni.navigateTo({ url: '/pages/order/index' }); return } catch (e) { }\r\n        this.goHome()\r\n      } else {\r\n        this.goHome()\r\n      }\r\n    },\r\n    toggleLogistics() { this.logisticsCollapsed = !this.logisticsCollapsed },\r\n    openMap(url) {\r\n      if (!url) return\r\n      try {\r\n        if (this.isH5 && typeof window !== 'undefined') {\r\n          window.open(url, '_blank')\r\n          return\r\n        }\r\n      } catch (e) { }\r\n\r\n      if (url.indexOf('http') === 0) {\r\n        uni.navigateTo({ url: '/pages/webview/index?url=' + encodeURIComponent(url) })\r\n        return\r\n      }\r\n\r\n      try { uni.setClipboardData({ data: String(url) }); uni.showToast({ title: '链接已复制', icon: 'none' }) } catch (e) { }\r\n    },\r\n    hasMapCoords(list) {\r\n      try { return Array.isArray(list) && list.some(it => it && typeof it.lat === 'number' && typeof it.lng === 'number') } catch (e) { return false }\r\n    },\r\n    mapCenter(list) {\r\n      try {\r\n        const arr = (Array.isArray(list) ? list : []).filter(it => typeof it.lat === 'number' && typeof it.lng === 'number')\r\n        if (!arr.length) return { latitude: 0, longitude: 0 }\r\n        const last = arr[arr.length - 1]\r\n        return { latitude: last.lat, longitude: last.lng }\r\n      } catch (e) { return { latitude: 0, longitude: 0 } }\r\n    },\r\n    mapMarkers(list) {\r\n      try {\r\n        const arr = (Array.isArray(list) ? list : []).filter(it => typeof it.lat === 'number' && typeof it.lng === 'number')\r\n        return arr.map((it, i) => ({ id: i, latitude: it.lat, longitude: it.lng }))\r\n      } catch (e) { return [] }\r\n    },\r\n    mapPolyline(list) {\r\n      try {\r\n        const pts = (Array.isArray(list) ? list : []).filter(it => typeof it.lat === 'number' && typeof it.lng === 'number').map(it => ({ latitude: it.lat, longitude: it.lng }))\r\n        return pts.length > 1 ? [{ points: pts, color: '#FF4D4F', width: 4 }] : []\r\n      } catch (e) { return [] }\r\n    },\r\n    async confirmReceipt(id) {\r\n      try {\r\n        const res = await confirmOrderReceipt({ order_id: id })\r\n        if (res.success) {\r\n          uni.showToast({ title: '确认收货成功', icon: 'success' })\r\n          if (this.order && (this.order.id === id || this.order.orderNo === id)) {\r\n            this.fetchDetail(id)\r\n          } else {\r\n            this.fetchOrders()\r\n          }\r\n        }\r\n      } catch (e) { }\r\n    },\r\n    async handleCancelOrder(id) {\r\n      uni.showModal({\r\n        title: '提示',\r\n        content: '确定要取消该订单吗？',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              const res = await cancelOrder({ order_id: id })\r\n              if (res.success) {\r\n                uni.showToast({ title: '订单已取消', icon: 'success' })\r\n                if (this.order && (this.order.id === id || this.order.orderNo === id)) {\r\n                  this.fetchDetail(id)\r\n                } else {\r\n                  this.fetchOrders()\r\n                }\r\n              }\r\n            } catch (e) {\r\n              uni.showToast({ title: '取消失败', icon: 'none' })\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    closeOnboarding() {\r\n      this.showOnboarding = false\r\n      try {\r\n        uni.removeStorageSync('onboarding_continue')\r\n        uni.removeStorageSync('onboarding_target_selector')\r\n        uni.removeStorageSync('onboarding_step_text')\r\n        uni.removeStorageSync('onboarding_steps')\r\n        uni.removeStorageSync('onboarding_index')\r\n        uni.reLaunch({ url: '/pages/home/index' })\r\n      } catch (e) {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  min-height: 100vh;\r\n}\r\n\r\n/* #ifdef H5 */\r\n.page {\r\n  background: url('/static/product_detail_background.jpg') no-repeat center center fixed;\r\n  background-size: cover;\r\n}\r\n\r\n/* #endif */\r\n\r\n.nav {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  background: #fff;\r\n  height: 88rpx;\r\n  border-bottom: 1rpx solid #f5f5f5;\r\n  margin-bottom: 20rpx;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 99;\r\n}\r\n\r\n.nav-item {\r\n  position: relative;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  padding: 0 10rpx;\r\n}\r\n\r\n.nav-item.active {\r\n  color: #333;\r\n  font-weight: bold;\r\n  font-size: 30rpx;\r\n}\r\n\r\n.nav-item.active::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 40rpx;\r\n  height: 4rpx;\r\n  background: #ff5000;\r\n  border-radius: 4rpx;\r\n}\r\n\r\n/* #ifdef H5 */\r\n.page {\r\n  padding: 40rpx 600rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* #endif */\r\n/* #ifndef H5 */\r\n.page {\r\n  padding: 30rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* #endif */\r\n.order {\r\n  margin: 20rpx 0;\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  position: relative;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 25rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.time {\r\n  color: #999;\r\n  font-size: 24rpx;\r\n  /* #ifdef MP-WEIXIN */\r\n  white-space: nowrap;\r\n  /* #endif */\r\n}\r\n\r\n.total {\r\n  color: #333;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.room {\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.room-hd {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: #ddd;\r\n  padding: 12rpx;\r\n  border-radius: 10rpx;\r\n  color: #333;\r\n}\r\n\r\n.items {\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12rpx 8rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.meta {\r\n  flex: 1;\r\n  max-width: 50%;\r\n}\r\n\r\n.meta .title {\r\n  display: block;\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.meta .spec {\r\n  display: block;\r\n  font-size: 22rpx;\r\n  color: #777;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.price-row {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  align-items: center;\r\n  color: #333;\r\n}\r\n\r\n.ops {\r\n  margin-top: 16rpx;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 20rpx;\r\n}\r\n\r\n.total-text {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.btns {\r\n  display: flex;\r\n  gap: 20rpx;\r\n}\r\n\r\n.btn {\r\n  background: #333;\r\n  color: #fff;\r\n  border-radius: 100rpx;\r\n  margin: 0;\r\n  padding: 0 30rpx;\r\n  height: 60rpx;\r\n  line-height: 60rpx;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.empty {\r\n  padding: 40rpx;\r\n  text-align: center;\r\n  color: #999;\r\n}\r\n\r\n/* 列表样式 */\r\n.orders {\r\n  padding: 20rpx 0;\r\n}\r\n\r\n.orders-list {\r\n  display: grid;\r\n  gap: 16rpx;\r\n}\r\n\r\n.order-card {\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 16rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, .04);\r\n}\r\n\r\n.card-hd {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.card-hd .id {\r\n  font-weight: 600;\r\n}\r\n\r\n.card-hd .total {\r\n  color: #333;\r\n  font-weight: 700;\r\n}\r\n\r\n.card-body {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.thumbs {\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.thumb {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 8rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 16rpx;\r\n}\r\n\r\n.btn-action {\r\n  margin: 0;\r\n  background: #ddd;\r\n  /* border: 1rpx solid #ddd; */\r\n  color: #333;\r\n  border-radius: 100rpx;\r\n  padding: 0 24rpx;\r\n  height: 56rpx;\r\n  line-height: 54rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.btn-action.primary {\r\n  /* border-color: #333; */\r\n  background-color: #333;\r\n  color: #fff;\r\n}\r\n\r\n/* 运单与物流 */\r\n.waybill {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 12rpx;\r\n  margin: 10rpx 0;\r\n}\r\n\r\n.waybill .copy {\r\n  background: #eee;\r\n  margin: 0;\r\n}\r\n\r\n.logistics {\r\n  background: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 12rpx;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.log-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding-bottom: 8rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.log-title {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.log-toggle {\r\n  margin: 0;\r\n  background: #eee;\r\n  color: #333;\r\n  border-radius: 100rpx;\r\n  padding: 0 20rpx;\r\n  height: 50rpx;\r\n  line-height: 50rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.log-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 16rpx;\r\n  padding: 14rpx 0;\r\n  position: relative;\r\n}\r\n\r\n.log-item::before {\r\n  content: '';\r\n  position: absolute;\r\n  left: 8rpx;\r\n  top: 36rpx;\r\n  bottom: 0;\r\n  width: 2rpx;\r\n  background: #eee;\r\n}\r\n\r\n.log-empty {\r\n  padding: 16rpx 8rpx;\r\n  color: #999;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.logistics-map {\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.map-frame {\r\n  width: 100%;\r\n  height: 420rpx;\r\n  border-radius: 10rpx;\r\n  overflow: hidden;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.map-iframe {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0;\r\n}\r\n\r\n.map-image {\r\n  width: 100%;\r\n  border-radius: 10rpx;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.map-webview {\r\n  width: 100%;\r\n  height: 420rpx;\r\n  border-radius: 10rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.map-link-row {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 12rpx 0;\r\n}\r\n\r\n.map-link {\r\n  color: #007aff;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.log-toggle-center {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding-top: 8rpx;\r\n}\r\n\r\n.toggle-icon {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 700;\r\n}\r\n\r\n.floating-back {\r\n  position: fixed;\r\n  left: 40rpx;\r\n  top: 40rpx;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  text-align: center;\r\n  color: #333;\r\n  font-size: 36rpx;\r\n  z-index: 999;\r\n  -webkit-backdrop-filter: blur(8px);\r\n  backdrop-filter: blur(8px);\r\n}\r\n\r\n.log-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.dot {\r\n  width: 16rpx;\r\n  height: 16rpx;\r\n  border-radius: 50%;\r\n  background: #bbb;\r\n  margin: 8rpx 0 0 0;\r\n  font-size: 0;\r\n  line-height: 16rpx;\r\n}\r\n\r\n.log-item:first-child .dot {\r\n  background: #333;\r\n}\r\n\r\n.log-meta {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n}\r\n\r\n.log-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.log-status {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.log-time {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n}\r\n\r\n.log-desc {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  line-height: 1.5;\r\n}\r\n\r\n.log-item:first-child .log-status {\r\n  color: #54D1F4 ;\r\n  font-size: 32rpx;\r\n}\r\n\r\n.log-item:first-child .log-time {\r\n  color: #54D1F4 ;\r\n}\r\n\r\n.log-item:first-child .log-desc {\r\n  color: #333;\r\n}\r\n\r\n.log-status {\r\n  font-weight: 600;\r\n}\r\n\r\n/* #ifdef H5 */\r\n.waybill {\r\n  position: static;\r\n  margin: 10rpx 0;\r\n  background: #fff;\r\n  padding: 12rpx;\r\n  border-radius: 10rpx;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 20rpx;\r\n  justify-content: flex-start;\r\n}\r\n\r\n.item {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.meta {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 20rpx;\r\n  flex: 1;\r\n  margin: 0;\r\n  max-width: 50%;\r\n}\r\n\r\n.meta .title {\r\n  margin-bottom: 0;\r\n  width: 100%;\r\n  text-align: left;\r\n}\r\n\r\n.meta .spec {\r\n  margin-top: 0;\r\n  margin-left: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.price-row {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.header .title,\r\n.ops .total-text,\r\n.card-hd .id,\r\n.card-hd .total {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n}\r\n.log-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.btn,\r\n.btn-action {\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  padding: 0 40rpx;\r\n  font-size: 30rpx;\r\n  border-radius: 40rpx;\r\n}\r\n\r\n/* #endif */\r\n\r\n/* #ifdef MP-WEIXIN */\r\n.waybill {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 12rpx;\r\n}\r\n\r\n.waybill .copy {\r\n  width: 300rpx;\r\n  height: 64rpx;\r\n  line-height: 64rpx;\r\n  padding: 0 40rpx;\r\n  border-radius: 40rpx;\r\n}\r\n\r\n.header .title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 20rpx;\r\n  display: block;\r\n}\r\n.log-title {\r\n  font-size: 28rpx;\r\n}\r\n\r\n.meta .title {\r\n  display: block;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.meta .spec {\r\n  display: block;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.total {\r\n  font-size: 36rpx;\r\n}\r\n\r\n.price-row .price {\r\n  color: #000;\r\n}\r\n\r\n/* #endif */\r\n/* #ifdef MP-WEIXIN */\r\n.page {\r\n  position: relative;\r\n}\r\n\r\n.page-bg {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: -1;\r\n  pointer-events: none;\r\n}\r\n\r\n/* #endif */\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/HP/Desktop/LiShop/LiShop/pages/order/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","exportOrderExcel","wx","getPendingPaymentOrders","getPendingShipmentOrders","getPendingReceiptOrders","getHistoryOrders","getOrderDetail","confirmOrderReceipt","res","cancelOrder"],"mappings":"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"}