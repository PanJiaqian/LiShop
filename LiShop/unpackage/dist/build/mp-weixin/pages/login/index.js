"use strict";const e=require("../../common/vendor.js"),s=require("../../common/assets.js"),t={data:()=>({username:"",password:""}),methods:{login(){if(!this.username||!this.password)return void e.index.showToast({title:"请输入账号和密码",icon:"none"});const s={phone:this.username,password:this.password};e.index.showLoading({title:"登录中...",mask:!0}),e.index.request({url:"http://182.61.54.90:6149/api/auth/login/admin",method:"POST",header:{"Content-Type":"application/json"},data:s,success:s=>{let t=null==s?void 0:s.data;if("string"==typeof t)try{t=JSON.parse(t)}catch(n){}const o={username:this.username,...t||{}};try{e.index.setStorageSync("user",o)}catch(n){}e.index.showToast({title:"登录成功",icon:"success"}),setTimeout((()=>{try{e.index.navigateBack()}catch(n){e.index.switchTab?e.index.switchTab({url:"/pages/home/index"}):e.index.navigateTo({url:"/pages/home/index"})}}),300)},fail:s=>{console.error("login error",s),e.index.showToast({title:"登录失败",icon:"none"})},complete:()=>{try{e.index.hideLoading()}catch(s){}}})}}};const o=e._export_sfc(t,[["render",function(t,o,n,a,i,r){return{a:s._imports_0,b:i.username,c:e.o((e=>i.username=e.detail.value)),d:i.password,e:e.o((e=>i.password=e.detail.value)),f:e.o(((...e)=>r.login&&r.login(...e)))}}],["__scopeId","data-v-8b997782"]]);wx.createPage(o);
