import{k as e,l as t,p as a,m as l,u as s,c,w as d,d as i,o as u,a as o,z as r,b as n,v as f,f as h,r as _,F as m,t as p,i as y,e as k,g}from"./index-DYnAU-Ut.js";import{F as b}from"./FloatingNav.CPEeJr_3.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=C({components:{FloatingNav:b},data:()=>({cart:[]}),computed:{total(){return this.cart.reduce(((e,t)=>e+t.price*(t.quantity||1)),0)},selectedTotal(){return this.cart.reduce(((e,t)=>e+(t.selected?t.price*(t.quantity||1):0)),0)},selectedCount(){return this.cart.filter((e=>e.selected)).length},isAllSelected(){return this.cart.length>0&&this.selectedCount===this.cart.length},selectedThumbs(){return this.cart.filter((e=>e.selected)).slice(0,2).map((e=>e.image||"/static/logo.png"))},officialReduce(){return this.cart.reduce(((e,t)=>e+(t.selected&&t.officialReduce||0)),0)},redReduce(){return this.cart.reduce(((e,t)=>e+(t.selected&&t.redReduce||0)),0)},extraReduce(){return this.cart.reduce(((e,t)=>e+(t.selected&&t.reduce||0)),0)},totalReduce(){return this.officialReduce+this.redReduce+this.extraReduce},payable(){return Math.max(0,this.selectedTotal-this.totalReduce)},needForCoupon(){return Math.max(0,800-this.payable).toFixed(2)}},onShow(){this.load();try{e({animation:!1})}catch(t){}},methods:{load(){try{this.cart=t("cart")||[]}catch(e){this.cart=[]}this.cart=(this.cart||[]).map((e=>({...e,quantity:e.quantity||1,selected:!!e.selected})))},sync(){a("cart",this.cart)},inc(e){this.cart[e].quantity+=1,this.sync()},dec(e){this.cart[e].quantity=Math.max(1,(this.cart[e].quantity||1)-1),this.sync()},remove(e){this.cart.splice(e,1),this.sync()},removeSelected(){this.cart=this.cart.filter((e=>!e.selected)),this.sync()},toggle(e){this.cart[e].selected=!this.cart[e].selected,this.sync()},toggleAll(){const e=!(this.selectedCount===this.cart.length&&this.cart.length>0);this.cart.forEach((t=>t.selected=e)),this.sync()},clear(){this.cart=[],this.sync()},checkout(){0!==this.selectedCount?l({title:"æš‚æœªæŽ¥å…¥æ”¯ä»˜",icon:"none"}):l({title:"è¯·é€‰æ‹©å•†å“",icon:"none"})}}},[["render",function(e,t,a,l,b,C){const x=i,F=y,v=k,R=g,q=s("FloatingNav");return u(),c(x,{class:"page"},{default:d((()=>[o(x,{class:"cart-grid"},{default:d((()=>[o(x,{class:"cart-main"},{default:d((()=>[b.cart.length?(u(),c(x,{key:0,class:"toolbar"},{default:d((()=>[o(x,{class:"tool-left"},{default:d((()=>[o(x,{class:"chk all",onClick:C.toggleAll},{default:d((()=>[o(x,{class:r(["chk-ico",{on:C.isAllSelected}])},null,8,["class"]),o(F,{class:"chk-txt"},{default:d((()=>[n("å…¨é€‰")])),_:1})])),_:1},8,["onClick"])])),_:1}),o(x,{class:"tool-right"},{default:d((()=>[o(v,{size:"mini",class:"btn-del",disabled:0===C.selectedCount,onClick:C.removeSelected},{default:d((()=>[n("åˆ é™¤é€‰ä¸­")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})):f("",!0),b.cart.length?(u(),c(x,{key:1,class:"list h5"},{default:d((()=>[(u(!0),h(m,null,_(b.cart,((e,t)=>(u(),c(x,{class:"item",key:e.id},{default:d((()=>[o(x,{class:"chk",onClick:e=>C.toggle(t)},{default:d((()=>[o(x,{class:r(["chk-ico",{on:e.selected}])},null,8,["class"])])),_:2},1032,["onClick"]),o(R,{class:"cover",src:e.image||"/static/logo.png",mode:"aspectFill"},null,8,["src"]),o(x,{class:"meta"},{default:d((()=>[o(F,{class:"title"},{default:d((()=>[n(p(e.title),1)])),_:2},1024),e.attr?(u(),c(F,{key:0,class:"attr"},{default:d((()=>[n(p(e.attr),1)])),_:2},1024)):f("",!0),o(F,{class:"price"},{default:d((()=>[n("Â¥"+p(e.price.toFixed(2)),1)])),_:2},1024),o(x,{class:"qty"},{default:d((()=>[o(v,{size:"mini",onClick:e=>C.dec(t)},{default:d((()=>[n("-")])),_:2},1032,["onClick"]),o(F,{class:"count"},{default:d((()=>[n(p(e.quantity),1)])),_:2},1024),o(v,{size:"mini",onClick:e=>C.inc(t)},{default:d((()=>[n("+")])),_:2},1032,["onClick"]),o(v,{size:"mini",class:"del",onClick:e=>C.remove(t)},{default:d((()=>[n("åˆ é™¤")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(u(),c(x,{key:2,class:"empty"},{default:d((()=>[n("è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ~")])),_:1}))])),_:1}),o(x,{class:"cart-aside"},{default:d((()=>[o(x,{class:"summary-card"},{default:d((()=>[o(x,{class:"sum-title"},{default:d((()=>[n("ç»“ç®—æ˜Žç»†")])),_:1}),o(x,{class:"sum-hint"},{default:d((()=>[n("å®žé™…ä¼˜æƒ é‡‘é¢ä»¥ä¸‹å•é¡µä¸ºå‡†")])),_:1}),C.selectedCount>0?(u(),c(x,{key:0,class:"sum-body"},{default:d((()=>[o(x,{class:"thumbs"},{default:d((()=>[(u(!0),h(m,null,_(C.selectedThumbs,((e,t)=>(u(),c(R,{key:t,src:e,class:"thumb",mode:"aspectFill"},null,8,["src"])))),128))])),_:1}),o(x,{class:"rows"},{default:d((()=>[o(x,{class:"row"},{default:d((()=>[o(F,{class:"label"},{default:d((()=>[n("å•†å“æ€»ä»·")])),_:1}),o(F,{class:"value"},{default:d((()=>[n("Â¥"+p(C.selectedTotal.toFixed(2)),1)])),_:1})])),_:1}),o(x,{class:"row"},{default:d((()=>[o(F,{class:"label"},{default:d((()=>[n("å…±å‡")])),_:1}),o(F,{class:"value reduce"},{default:d((()=>[n("å‡ Â¥"+p(C.totalReduce.toFixed(2)),1)])),_:1})])),_:1}),o(x,{class:"row small"},{default:d((()=>[o(F,{class:"label"},{default:d((()=>[n("å®˜æ–¹ç«‹å‡")])),_:1}),o(F,{class:"value reduce"},{default:d((()=>[n("å‡ Â¥"+p(C.officialReduce.toFixed(2)),1)])),_:1})])),_:1}),o(x,{class:"row small"},{default:d((()=>[o(F,{class:"label"},{default:d((()=>[n("çº¢åŒ…")])),_:1}),o(F,{class:"value reduce"},{default:d((()=>[n("å‡ Â¥"+p(C.redReduce.toFixed(2)),1)])),_:1})])),_:1})])),_:1}),o(x,{class:"coupon-bar"},{default:d((()=>[o(F,{class:"coupon-txt"},{default:d((()=>[n("æ¶ˆè´¹åˆ¸ï½œå†å®žä»˜"+p(C.needForCoupon)+"äº«æ»¡800å‡80",1)])),_:1}),o(F,{class:"coupon-action"},{default:d((()=>[n("å‡‘å•â€º")])),_:1})])),_:1}),o(x,{class:"row total"},{default:d((()=>[o(F,{class:"label"},{default:d((()=>[n("åˆè®¡ï¼š")])),_:1}),o(x,{class:"total-box"},{default:d((()=>[o(F,{class:"pay"},{default:d((()=>[n("Â¥"+p(C.payable.toFixed(2)),1)])),_:1}),o(F,{class:"total-reduce"},{default:d((()=>[n("å…±å‡ Â¥ "+p(C.totalReduce.toFixed(2)),1)])),_:1})])),_:1})])),_:1}),o(v,{class:"checkout",onClick:C.checkout},{default:d((()=>[n("ç»“ç®—("+p(C.selectedCount)+")",1)])),_:1},8,["onClick"])])),_:1})):(u(),c(x,{key:1,class:"sum-empty"},{default:d((()=>[o(x,{class:"empty-ico"},{default:d((()=>[n("ðŸ›’")])),_:1}),o(x,{class:"empty-tip"},{default:d((()=>[n("é€‰æ‹©å•†å“æŸ¥çœ‹å®žé™…æ”¯ä»˜ä»·æ ¼")])),_:1}),o(x,{class:"row total"},{default:d((()=>[o(F,{class:"label"},{default:d((()=>[n("åˆè®¡ï¼š")])),_:1}),o(x,{class:"total-box"},{default:d((()=>[o(F,{class:"pay"},{default:d((()=>[n("Â¥0")])),_:1})])),_:1})])),_:1}),o(v,{class:"checkout disabled"},{default:d((()=>[n("ç»“ç®—")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1}),o(q)])),_:1})}],["__scopeId","data-v-0f067478"]]);export{x as default};
