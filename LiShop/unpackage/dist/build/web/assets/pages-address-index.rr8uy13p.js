import{k as s,m as e,n as a,J as d,c as t,w as l,d as i,o as n,f as o,r as c,F as r,a as u,b as f,i as _,e as k,t as p,v as h,C as m}from"./index-D--6mQz1.js";import{r as g,t as C}from"./index.XrWgwEH0.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=A({data:()=>({addressList:[]}),onShow(){this.loadAddresses()},methods:{loadAddresses(){const d=s("user"),t=d&&(d.token||d.data&&d.data.token)||"";if(!t)return e({title:"请先登录",icon:"none"}),void setTimeout((()=>a({url:"/pages/login/index"})),1500);g({token:t}).then((s=>{s&&s.success&&(this.addressList=s.data.items||[])})).catch((s=>{console.error(s),e({title:"获取地址失败",icon:"none"})}))},addAddress(){a({url:"/pages/address/edit"})},editAddress(s){a({url:`/pages/address/edit?id=${s}`})},handleDelete(a){d({title:"提示",content:"确定要删除该地址吗？",success:d=>{if(d.confirm){const d=s("user"),t=d&&(d.token||d.data&&d.data.token)||"";C({addresses_id:a,token:t}).then((s=>{s&&s.success?(e({title:"删除成功",icon:"success"}),this.loadAddresses()):e({title:s.message||"删除失败",icon:"none"})})).catch((s=>{e({title:"删除失败",icon:"none"})}))}}})}}},[["render",function(s,e,a,d,g,C){const A=_,v=i,y=k;return n(),t(v,{class:"page"},{default:l((()=>[g.addressList.length>0?(n(),t(v,{key:0,class:"address-list"},{default:l((()=>[(n(!0),o(r,null,c(g.addressList,((s,e)=>(n(),t(v,{class:"address-item",key:s.addresses_id,onClick:e=>C.editAddress(s.addresses_id)},{default:l((()=>[u(v,{class:"info"},{default:l((()=>[u(v,{class:"user-info"},{default:l((()=>[u(A,{class:"name"},{default:l((()=>[f(p(s.receiver),1)])),_:2},1024),u(A,{class:"phone"},{default:l((()=>[f(p(s.phone),1)])),_:2},1024),1===s.is_default?(n(),t(A,{key:0,class:"tag"},{default:l((()=>[f("默认")])),_:1})):h("",!0)])),_:2},1024),u(v,{class:"address-detail"},{default:l((()=>[f(p(s.province)+p(s.city)+p(s.district)+p(s.detail_address),1)])),_:2},1024)])),_:2},1024),u(v,{class:"actions"},{default:l((()=>[u(A,{class:"btn-edit",onClick:m((e=>C.editAddress(s.addresses_id)),["stop"])},{default:l((()=>[f("编辑")])),_:2},1032,["onClick"]),u(A,{class:"btn-delete",onClick:m((e=>C.handleDelete(s.addresses_id)),["stop"])},{default:l((()=>[f("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(n(),t(v,{key:1,class:"empty-state"},{default:l((()=>[u(A,null,{default:l((()=>[f("暂无收货地址")])),_:1})])),_:1})),u(v,{class:"footer"},{default:l((()=>[u(y,{class:"btn-add",onClick:C.addAddress},{default:l((()=>[f("新建收货地址")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-84a2726f"]]);export{v as default};
