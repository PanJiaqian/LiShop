import{m as s,A as a,p as e,H as l,s as t,n as o,B as r,c as n,w as d,d as c,o as i,a as u,b as p,g as m,i as f,I as h,e as _}from"./index-D--6mQz1.js";import{o as g}from"./index.XrWgwEH0.js";import{_ as b}from"./logo.rRFpfryy.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=w({data:()=>({username:"",password:""}),methods:{login(){if(!this.username||!this.password)return void s({title:"请输入账号和密码",icon:"none"});const n={phone:this.username,password:this.password};a({title:"登录中...",mask:!0}),g(n).then((a=>{let r=a;if("string"==typeof r)try{r=JSON.parse(r)}catch(d){}const n={username:this.username,...r||{}};try{e("user",n)}catch(d){}s({title:"登录成功",icon:"success"}),setTimeout((()=>{try{l()}catch(d){t?t({url:"/pages/home/index"}):o({url:"/pages/home/index"})}}),300)})).catch((a=>{console.error("login error",a),s({title:"登录失败",icon:"none"})})).finally((()=>{try{r()}catch(s){}}))}}},[["render",function(s,a,e,l,t,o){const r=m,g=f,w=c,y=h,x=_;return i(),n(w,{class:"page"},{default:d((()=>[u(w,{class:"brand"},{default:d((()=>[u(r,{class:"brand-logo",src:b,mode:"aspectFit"}),u(g,{class:"brand-name"},{default:d((()=>[p("LiShop")])),_:1})])),_:1}),u(w,{class:"form"},{default:d((()=>[u(w,{class:"field"},{default:d((()=>[u(g,{class:"label"},{default:d((()=>[p("账号")])),_:1}),u(y,{class:"input",type:"text",modelValue:t.username,"onUpdate:modelValue":a[0]||(a[0]=s=>t.username=s),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),u(w,{class:"field"},{default:d((()=>[u(g,{class:"label"},{default:d((()=>[p("密码")])),_:1}),u(y,{class:"input",type:"password",modelValue:t.password,"onUpdate:modelValue":a[1]||(a[1]=s=>t.password=s),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),u(x,{class:"btn",onClick:o.login},{default:d((()=>[p("登录")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-a34ba58d"]]);export{y as default};
