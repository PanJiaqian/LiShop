import{K as e,k as a,m as t,H as l,c as s,w as o,d as i,o as d,a as r,b as n,i as c,I as u,L as m,M as f,e as p}from"./index-D--6mQz1.js";import{r as h,v as _,w as v}from"./index.XrWgwEH0.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=V({data:()=>({id:"",form:{receiver:"",phone:"",province:"",city:"",district:"",detail_address:"",is_default:0}}),onLoad(a){a.id?(this.id=a.id,this.loadAddress(a.id),e({title:"编辑收货地址"})):e({title:"新建收货地址"})},methods:{loadAddress(e){const l=a("user"),s=l&&(l.token||l.data&&l.data.token)||"";h({addresses_id:e,token:s}).then((e=>{if(e&&e.success&&e.data){const a=e.data;this.form={receiver:a.receiver,phone:a.phone,province:a.province,city:a.city,district:a.district,detail_address:a.detail_address,is_default:a.is_default}}})).catch((e=>{console.error(e),t({title:"获取地址详情失败",icon:"none"})}))},onSwitchChange(e){this.form.is_default=e.detail.value?1:0},saveAddress(){if(!this.form.receiver)return t({title:"请填写收货人",icon:"none"});if(!this.form.phone)return t({title:"请填写手机号",icon:"none"});if(!this.form.province||!this.form.city||!this.form.district)return t({title:"请填写完整地区",icon:"none"});if(!this.form.detail_address)return t({title:"请填写详细地址",icon:"none"});const e=a("user"),s=e&&(e.token||e.data&&e.data.token)||"",o={...this.form,token:s};let i;this.id?(o.addresses_id=this.id,i=_(o)):i=v(o),i.then((e=>{e&&e.success?(t({title:"保存成功",icon:"success"}),setTimeout((()=>{l()}),1500)):t({title:e.message||"保存失败",icon:"none"})})).catch((e=>{console.error(e),t({title:"保存失败",icon:"none"})}))}}},[["render",function(e,a,t,l,h,_){const v=c,V=u,g=i,k=m,b=f,y=p;return d(),s(g,{class:"page"},{default:o((()=>[r(g,{class:"form"},{default:o((()=>[r(g,{class:"form-item"},{default:o((()=>[r(v,{class:"label"},{default:o((()=>[n("收货人")])),_:1}),r(V,{class:"input",modelValue:h.form.receiver,"onUpdate:modelValue":a[0]||(a[0]=e=>h.form.receiver=e),placeholder:"请填写收货人姓名"},null,8,["modelValue"])])),_:1}),r(g,{class:"form-item"},{default:o((()=>[r(v,{class:"label"},{default:o((()=>[n("手机号码")])),_:1}),r(V,{class:"input",type:"number",modelValue:h.form.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>h.form.phone=e),placeholder:"请填写收货人手机号",maxlength:"11"},null,8,["modelValue"])])),_:1}),r(g,{class:"form-item"},{default:o((()=>[r(v,{class:"label"},{default:o((()=>[n("所在地区")])),_:1}),r(g,{class:"region-inputs"},{default:o((()=>[r(V,{class:"input region-input",modelValue:h.form.province,"onUpdate:modelValue":a[2]||(a[2]=e=>h.form.province=e),placeholder:"省"},null,8,["modelValue"]),r(V,{class:"input region-input",modelValue:h.form.city,"onUpdate:modelValue":a[3]||(a[3]=e=>h.form.city=e),placeholder:"市"},null,8,["modelValue"]),r(V,{class:"input region-input",modelValue:h.form.district,"onUpdate:modelValue":a[4]||(a[4]=e=>h.form.district=e),placeholder:"区"},null,8,["modelValue"])])),_:1})])),_:1}),r(g,{class:"form-item"},{default:o((()=>[r(v,{class:"label"},{default:o((()=>[n("详细地址")])),_:1}),r(k,{class:"textarea",modelValue:h.form.detail_address,"onUpdate:modelValue":a[5]||(a[5]=e=>h.form.detail_address=e),placeholder:"街道、楼牌号等"},null,8,["modelValue"])])),_:1}),r(g,{class:"form-item switch-item"},{default:o((()=>[r(v,{class:"label"},{default:o((()=>[n("设为默认地址")])),_:1}),r(b,{checked:1===h.form.is_default,color:"#e1251b",onChange:_.onSwitchChange},null,8,["checked","onChange"])])),_:1})])),_:1}),r(g,{class:"footer"},{default:o((()=>[r(y,{class:"btn-save",onClick:_.saveAddress},{default:o((()=>[n("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-58c00ed3"]]);export{g as default};
