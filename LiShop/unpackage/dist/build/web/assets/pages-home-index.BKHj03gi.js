import{o as e,c as a,w as t,a as l,b as s,i,I as o,d as n,e as r,f as c,r as d,F as u,S as p,g as m,h as g,s as h,n as f,t as _,j as v,k as y,l as C,m as k,p as b,q as I,u as w,v as x,x as S}from"./index-D--6mQz1.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{P as A}from"./ProductCard.DLNICDsN.js";import{F as L}from"./FloatingNav.BIlG4RBz.js";import{g as R,a as j}from"./index.XrWgwEH0.js";import{_ as V}from"./logo.rRFpfryy.js";const F=N({components:{SearchBar:N({name:"SearchBar",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"æœç´¢å•†å“ã€åº—é“º"}},emits:["update:modelValue","search"],methods:{onInput(e){var a;const t=(null==(a=null==e?void 0:e.detail)?void 0:a.value)??"";this.$emit("update:modelValue",t)},onSearch(){this.$emit("search",this.modelValue)}}},[["render",function(c,d,u,p,m,g){const h=i,f=o,_=n,v=r;return e(),a(_,{class:"search-bar"},{default:t((()=>[l(_,{class:"search-input"},{default:t((()=>[l(h,{class:"icon"},{default:t((()=>[s("ðŸ”")])),_:1}),l(f,{class:"input",value:u.modelValue,placeholder:u.placeholder,"confirm-type":"search",onInput:g.onInput},null,8,["value","placeholder","onInput"])])),_:1}),l(v,{class:"search-btn",size:"mini",onClick:g.onSearch},{default:t((()=>[s("æœç´¢")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-6d3f531e"]]),BannerSwiper:N({name:"BannerSwiper",props:{images:{type:Array,default:()=>["/static/logo.png","/static/logo.png"]}}},[["render",function(s,i,o,r,h,f){const _=m,v=g,y=p,C=n;return e(),a(C,{class:"banner"},{default:t((()=>[l(y,{class:"swiper","indicator-dots":!0,autoplay:!0,interval:4e3,circular:!0},{default:t((()=>[(e(!0),c(u,null,d(o.images,((s,i)=>(e(),a(v,{key:i},{default:t((()=>[l(_,{class:"img",src:s,mode:"aspectFill"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1})}],["__scopeId","data-v-191b3b65"]]),CategoryGrid:N({name:"CategoryGrid",props:{categories:{type:Array,default:()=>[]}},methods:{go(e){h?h({url:"/pages/category/index"}):f({url:"/pages/category/index"})}}},[["render",function(o,r,p,g,h,f){const v=m,y=i,C=n;return e(),a(C,{class:"grid"},{default:t((()=>[(e(!0),c(u,null,d(p.categories,((i,o)=>(e(),a(C,{class:"item",key:o,onClick:e=>f.go(i)},{default:t((()=>[l(v,{class:"icon",src:i.icon||"/static/logo.png",mode:"aspectFill"},null,8,["src"]),l(y,{class:"name"},{default:t((()=>[s(_(i.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})}],["__scopeId","data-v-cdd05985"]]),ProductCard:A,FloatingNav:L},data:()=>({keyword:"",roomName:"",user:null,banners:["/static/logo.png","/static/logo.png","/static/logo.png"],topCategories:[],activeCateId:"",activeCateName:"",leftChildren:[],subCategoryList:[],seckillList:[{id:"s1",title:"çˆ†æ¬¾ç§’æ€1",price:99,image:"/static/logo.png"},{id:"s2",title:"çˆ†æ¬¾ç§’æ€2",price:129,image:"/static/logo.png"},{id:"s3",title:"çˆ†æ¬¾ç§’æ€3",price:59,image:"/static/logo.png"}],recommendList:[]}),onShow(){try{v({animation:!1})}catch(e){}try{this.user=y("user")||null}catch(e){}try{this.roomName=y("currentRoom")||""}catch(e){}try{R({page:1,page_size:20,sort_by:"id"}).then((e=>{var a;const t=(Array.isArray(null==(a=null==e?void 0:e.data)?void 0:a.items)?e.data.items:[]).map(((e,a)=>({name:(null==e?void 0:e.name)||"åˆ†ç±»"+(a+1),icon:"",categories_id:(null==e?void 0:e.categories_id)||(null==e?void 0:e.id)||""})));this.topCategories=t,this.subCategoryList=t})).catch((()=>{})),j({page:1,page_size:20}).then((e=>{var a;const t=(Array.isArray(null==(a=null==e?void 0:e.data)?void 0:a.carousel)?e.data.carousel:[]).map(((e,a)=>({id:(null==e?void 0:e.available_product_id)||"p"+a,title:(null==e?void 0:e.name)||"æŽ¨èå•†å“ "+(a+1),price:Number((null==e?void 0:e.price)??0)||0,sales:0,image:("string"==typeof(null==e?void 0:e.thumbnail)?e.thumbnail.replace(/`/g,"").trim():"")||"/static/logo.png"})));this.recommendList=t})).catch((()=>{}))}catch(e){}},onPullDownRefresh(){setTimeout((()=>{C()}),600)},methods:{onSearch(e){const a=(e||this.keyword||"").trim();if(a)try{const e=window.location.origin+window.location.pathname+"#/pages/search/index?q="+encodeURIComponent(a);window.open(e,"_blank")}catch(t){f({url:"/pages/search/index?q="+encodeURIComponent(a)})}else k({title:"è¯·è¾“å…¥å…³é”®å­—",icon:"none"})},openCategory(e){const a=(null==e?void 0:e.categories_id)||"";if(a){if(this.activeCateId===a)return this.activeCateId="",this.activeCateName="",void(this.leftChildren=[]);this.activeCateId=a,this.activeCateName=(null==e?void 0:e.name)||"";try{R({page:1,page_size:50,sort_by:"id",categories_id:a}).then((e=>{var a;const t=Array.isArray(null==(a=null==e?void 0:e.data)?void 0:a.items)?e.data.items:[];this.leftChildren=t.map(((e,a)=>({name:(null==e?void 0:e.name)||"å­åˆ†ç±»"+(a+1),categories_id:(null==e?void 0:e.categories_id)||(null==e?void 0:e.id)||""})))})).catch((()=>{this.leftChildren=[]}))}catch(t){this.leftChildren=[]}}else k({title:"åˆ†ç±»ç¼ºå°‘ID",icon:"none"})},goSubList(e){const a=encodeURIComponent(this.activeCateId||""),t=encodeURIComponent((null==e?void 0:e.categories_id)||""),l=encodeURIComponent(this.activeCateName||"");if(!t)return void k({title:"å­åˆ†ç±»ç¼ºå°‘ID",icon:"none"});f({url:`/pages/category/list?parent_id=${a}&category_id=${t}&active=${l}`})},addToCart(e){try{const a=y("cart")||[],t=a.findIndex((a=>a.id===e.id));t>=0?a[t].quantity=(a[t].quantity||1)+1:a.push({...e,quantity:1}),b("cart",a),k({title:"å·²åŠ å…¥è´­ç‰©è½¦",icon:"success"})}catch(a){console.error(a)}},goLogin(){f({url:"/pages/login/index"})},onAvatarClick(){this.user?h?h({url:"/pages/profile/index"}):f({url:"/pages/profile/index"}):f({url:"/pages/login/index"})},saveRoom(){try{const e=(this.roomName||"").trim();if(!e)return;b("currentRoom",e);const a=y("rooms")||[];a.includes(e)||(a.push(e),b("rooms",a)),k({title:"æˆ¿é—´åå·²ä¿å­˜",icon:"success"})}catch(e){}},logout(){try{I("user")}catch(e){}this.user=null,k({title:"å·²é€€å‡ºç™»å½•",icon:"success"})}}},[["render",function(o,p,g,h,f,v){const y=n,C=i,k=w("SearchBar"),b=w("BannerSwiper"),I=w("ProductCard"),N=m,A=r,L=S,R=w("FloatingNav");return e(),a(y,{class:"page"},{default:t((()=>[l(y,{class:"h5-layout"},{default:t((()=>[l(y,{class:"side-cate"},{default:t((()=>[l(y,{class:"cate-title"},{default:t((()=>[s("å…¨éƒ¨åˆ†ç±»")])),_:1}),l(y,{class:"cate-list"},{default:t((()=>[(e(!0),c(u,null,d(f.topCategories,((i,o)=>(e(),a(y,{class:"cate-item",key:o,onClick:e=>v.openCategory(i)},{default:t((()=>[l(C,{class:"dot"},{default:t((()=>[s("â€¢")])),_:1}),l(C,{class:"cate-name"},{default:t((()=>[s(_(i.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),l(y,{class:"main"},{default:t((()=>[l(k,{modelValue:f.keyword,"onUpdate:modelValue":p[0]||(p[0]=e=>f.keyword=e),onSearch:v.onSearch},null,8,["modelValue","onSearch"]),l(b,{images:f.banners},null,8,["images"]),f.activeCateId?(e(),a(y,{key:0,class:"sub-panel"},{default:t((()=>[l(y,{class:"panel-title"},{default:t((()=>[l(C,null,{default:t((()=>[s(_(f.activeCateName||"äºŒçº§åˆ†ç±»"),1)])),_:1})])),_:1}),l(y,{class:"panel-columns"},{default:t((()=>[(e(!0),c(u,null,d(f.leftChildren,((l,i)=>(e(),a(y,{class:"panel-link",key:i,onClick:e=>v.goSubList(l)},{default:t((()=>[s(_(l.name),1)])),_:2},1032,["onClick"])))),128))])),_:1}),f.leftChildren&&0!==f.leftChildren.length?x("",!0):(e(),a(y,{key:0,class:"sub-empty"},{default:t((()=>[s("æš‚æ— å­åˆ†ç±»")])),_:1}))])),_:1})):x("",!0),l(y,{class:"block"},{default:t((()=>[l(y,{class:"block-title"},{default:t((()=>[l(C,null,{default:t((()=>[s("çŒœä½ å–œæ¬¢")])),_:1})])),_:1}),l(y,{class:"grid2"},{default:t((()=>[(e(!0),c(u,null,d(f.recommendList,((s,i)=>(e(),a(y,{class:"grid2-item",key:i},{default:t((()=>[l(I,{product:s},null,8,["product"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),l(y,{class:"side-user"},{default:t((()=>[l(y,{class:"user-card"},{default:t((()=>[l(N,{class:"avatar",src:V,onClick:v.onAvatarClick},null,8,["onClick"]),l(y,{class:"u-row"},{default:t((()=>[l(C,{class:"u-name"},{default:t((()=>{var e;return[s(_((null==(e=f.user)?void 0:e.username)||"æœªç™»å½•"),1)]})),_:1}),f.user?x("",!0):(e(),a(A,{key:0,class:"u-btn",size:"mini",onClick:v.goLogin},{default:t((()=>[s("åŽ»ç™»å½•")])),_:1},8,["onClick"]))])),_:1}),l(y,{class:"u-links"},{default:t((()=>[l(L,{class:"u-link",url:"/pages/cart/index","open-type":"switchTab"},{default:t((()=>[s("æˆ‘çš„è´­ç‰©è½¦")])),_:1}),l(L,{class:"u-link",url:"/pages/order/index"},{default:t((()=>[s("æˆ‘çš„è®¢å•")])),_:1}),l(L,{class:"u-link",url:"/pages/messages/index"},{default:t((()=>[s("æ¶ˆæ¯")])),_:1}),l(L,{class:"u-link",url:"/pages/settings/index"},{default:t((()=>[s("è®¾ç½®")])),_:1}),f.user?(e(),a(y,{key:0,class:"u-link",onClick:v.logout},{default:t((()=>[s("é€€å‡ºç™»å½•")])),_:1},8,["onClick"])):x("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),l(R)])),_:1})}],["__scopeId","data-v-a2390d4b"]]);export{F as default};
